;/*FB_PKG_DELIM*/

__d("CometMarketplaceConfirmMarkAsPaidDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5436864742990701"}),null);
__d("CometMarketplaceConfirmMarkAsPaidDialogQuery$Parameters",["CometMarketplaceConfirmMarkAsPaidDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometMarketplaceConfirmMarkAsPaidDialogQuery_facebookRelayOperation"),metadata:{},name:"CometMarketplaceConfirmMarkAsPaidDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometMarketplaceInboxLabelChatDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5046975135324826"}),null);
__d("CometMarketplaceInboxLabelChatDialogQuery$Parameters",["CometMarketplaceInboxLabelChatDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("CometMarketplaceInboxLabelChatDialogQuery_facebookRelayOperation"),metadata:{},name:"CometMarketplaceInboxLabelChatDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWPublicChatsNUXQuickPromotionQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6098288313524910"}),null);
__d("MWPublicChatsNUXQuickPromotionQuery$Parameters",["MWPublicChatsNUXQuickPromotionQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWPublicChatsNUXQuickPromotionQuery_facebookRelayOperation"),metadata:{},name:"MWPublicChatsNUXQuickPromotionQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWQuickPromotionThreadViewBannerContainerQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6578447052222731"}),null);
__d("MWQuickPromotionThreadViewBannerContainerQuery.graphql",["MWQuickPromotionThreadViewBannerContainerQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"community_id"},{defaultValue:null,kind:"LocalArgument",name:"fb_group_id"},{defaultValue:null,kind:"LocalArgument",name:"thread_id"},{defaultValue:null,kind:"LocalArgument",name:"trigger"}],c=[{kind:"Literal",name:"surface_nux_id",value:10999},{kind:"Variable",name:"trigger",variableName:"trigger"},{fields:[{fields:[{kind:"Variable",name:"community_id",variableName:"community_id"},{kind:"Variable",name:"fb_group_id",variableName:"fb_group_id"},{kind:"Variable",name:"thread_id",variableName:"thread_id"}],kind:"ObjectValue",name:"community_messaging_context"}],kind:"ObjectValue",name:"trigger_context_v2"}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWQuickPromotionThreadViewBannerContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:c,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWQuickPromotionThreadViewBanner_eligiblePromotions"}],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWQuickPromotionThreadViewBannerContainerQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:c,concreteType:"ViewerEligibleQuickPromotionsConnection",kind:"LinkedField",name:"eligible_promotions",plural:!1,selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"3XEtNp"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"MWQuickPromotionThreadViewBanner_eligiblePromotions",fragmentName:"CometQuickPromotionInboxThreadViewBannerRendererStrategy_promotion",fragmentPropName:"promotion",kind:"ModuleImport"}],type:"CometQuickPromotionInboxThreadViewBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"MWQuickPromotionThreadViewBanner_eligiblePromotions",fragmentName:"CometQuickPromotionChatTabNotificationSettingsBannerRendererStrategy_promotion",fragmentPropName:"promotion",kind:"ModuleImport"}],type:"CometQuickPromotionChatTabNotificationSettingsBannerRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"3XEtNp")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MWQuickPromotionThreadViewBannerContainerQuery_facebookRelayOperation"),metadata:{},name:"MWQuickPromotionThreadViewBannerContainerQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWQuickPromotionThreadViewBanner_eligiblePromotions.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWQuickPromotionThreadViewBanner_eligiblePromotions",selections:[{alias:null,args:null,concreteType:"QuickPromotion",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,concreteType:"CometQuickPromotionSections",kind:"LinkedField",name:"comet_qp_sections",plural:!1,selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:"3XEtNp"}],concreteType:null,kind:"LinkedField",name:"renderer_strategy",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"MWQuickPromotionThreadViewBanner_eligiblePromotions",fragmentName:"CometQuickPromotionInboxThreadViewBannerRendererStrategy_promotion",fragmentPropName:"promotion",kind:"ModuleImport"}],type:"CometQuickPromotionInboxThreadViewBannerRendererStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"MWQuickPromotionThreadViewBanner_eligiblePromotions",fragmentName:"CometQuickPromotionChatTabNotificationSettingsBannerRendererStrategy_promotion",fragmentPropName:"promotion",kind:"ModuleImport"}],type:"CometQuickPromotionChatTabNotificationSettingsBannerRendererStrategy",abstractKey:null}],storageKey:'renderer_strategy(supported:"3XEtNp")'}],storageKey:null}],storageKey:null}],type:"ViewerEligibleQuickPromotionsConnection",abstractKey:null};e.exports=a}),null);
__d("useMessengerUnsendNUXQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4823686477743600"}),null);
__d("useMessengerUnsendNUXQuery.graphql",["useMessengerUnsendNUXQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],c=[{kind:"Variable",name:"nux_id",variableName:"id"}],d={alias:null,args:null,kind:"ScalarField",name:"should_show",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useMessengerUnsendNUXQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[d],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useMessengerUnsendNUXQuery",selections:[{alias:null,args:c,concreteType:null,kind:"LinkedField",name:"nux",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},d,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:b("useMessengerUnsendNUXQuery_facebookRelayOperation"),metadata:{},name:"useMessengerUnsendNUXQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("CometAccessibilityAnnouncementForDynamicContent.react",["CometAccessibilityAnnouncement.react","DocumentTranslationStatusProvider.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("DocumentTranslationStatusProvider.react").useTranslationKeyForTextParent();return i.createElement(c("CometAccessibilityAnnouncement.react"),babelHelpers["extends"]({},a,{key:b}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometMarketplaceConfirmMarkAsPaidDialog.entrypoint",["CometMarketplaceConfirmMarkAsPaidDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{cometMarketplaceConfirmMarkAsPaidDialogQueryReference:{parameters:c("CometMarketplaceConfirmMarkAsPaidDialogQuery$Parameters"),variables:{thread_id:a.threadId}}}}},root:c("JSResourceForInteraction")("CometMarketplaceConfirmMarkAsPaidDialog.react").__setRef("CometMarketplaceConfirmMarkAsPaidDialog.entrypoint")};g["default"]=a}),98);
__d("CometMarketplaceInboxLabelChatDialog.entrypoint",["CometMarketplaceInboxLabelChatDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){return{queries:{cometMarketplaceInboxLabelChatDialogQueryReference:{parameters:c("CometMarketplaceInboxLabelChatDialogQuery$Parameters"),variables:{id:a.thread_id}}}}},root:c("JSResourceForInteraction")("CometMarketplaceInboxLabelChatDialog.react").__setRef("CometMarketplaceInboxLabelChatDialog.entrypoint")};g["default"]=a}),98);
__d("MWPublicChatsNUXQuickPromotionContainer.entrypoint",["JSResourceForInteraction","MWPublicChatsNUXQuickPromotionQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{queryRef:{parameters:c("MWPublicChatsNUXQuickPromotionQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWPublicChatsNUXQuickPromotion.react").__setRef("MWPublicChatsNUXQuickPromotionContainer.entrypoint")};g["default"]=a}),98);
__d("useMWPThreadPointQueryOneToOneCutoverThreadThenNavigate",["I64","LSFactory","LSPlatformWaitForTaskCompletion","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWJids","MAWJobDefinitions","MAWTimedJob","QPLUserFlow","ReQL","WAJobOrchestratorTypes","WALoggerDeferred","asyncToGeneratorRuntime","promiseDone","qpl","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[Thread-Point-Query][OD-Cutover] LSThreadPointQueryAndRestoreMessagesWithJID finished successfully for ThreadKey: ",""]);k=function(){return a};return a}var l=(h||d("react")).useCallback;function a(){var a=c("useAsyncReStore")();return l(function(e){var f=e.contactId,g=e.isOnDemandCutover,h=e.navigationApi;c("promiseDone")(a,function(a){var e=d("ReQL").fromTableAscending(a.tables.mi_act_mapping_table.index("jid")).getKeyRange(f);e.subscribe(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,g){b=g.operation;if(b==="delete")return;g=(yield d("ReQL").firstAsync(e));if(g==null)return;b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(g.serverThreadKey)));if(b==null)return;g=b.clientThreadKey;var j=b.threadKey;b=b.threadType;c("promiseDone")(d("MAWTimedJob").TimedUIJobStarters.waitUntilPersisted(d("MAWJobDefinitions").createStartJobInfo("getDevices",{ignoreDhash:!1,reason:"thread-point-querying-1-to-1-thread",scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},users:new Set().add(d("MAWJids").toUserJid((i||(i=d("I64"))).to_string(f)))})));h.openTabOrInbox({clientThreadKey:g,threadKey:j,threadType:b},"preCutoverThread")});return function(a,b){return g.apply(this,arguments)}}());c("LSPlatformWaitForTaskCompletion")(a,function(a){return c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(a),{waJid:f})},"readwrite").then(function(){c("promiseDone")(d("WALoggerDeferred").LOG(k(),(i||(i=d("I64"))).to_string(f))),g===!0&&c("QPLUserFlow").endSuccess(c("qpl")._(1056847893,"505"))})["catch"](function(a){a="[Thread-Point-Query][OD-Cutover] LSThreadPointQueryAndRestoreMessagesWithJID finished with an error for ThreadKey: "+(i||(i=d("I64"))).to_string(f)+"\nError: "+a;c("promiseDone")(d("WALoggerDeferred").LOG(j(),a));g===!0&&c("QPLUserFlow").endFailure(c("qpl")._(1056847893,"505"),a)})})},[a])}g["default"]=a}),98);
__d("useMWLSAdContextCtaParser",["JSResourceForInteraction","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWCTMAdContextDialog.react").__setRef("useMWLSAdContextCtaParser")),b=a[0];return function(a,c){return c.ctaType!=="ads_context"?{type:"unimplemented"}:{onPress:function(){return b({adId:c.ctaId,threadKey:a.banner.threadKey})},type:"action"}}}g["default"]=a}),98);
__d("LSRequestAdContextFromThreadKey",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"ctm_ad_context",c.i64.cast([0,235]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSRequestAdContextFromThreadKeyStoredProcedure",["LSRequestAdContextFromThreadKey","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSRequestAdContextFromThreadKey").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("useMWLSEnsureAdContextExists",["LSFactory","LSRequestAdContextFromThreadKeyStoredProcedure","MWThreadKey.react","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect;function a(){var a=(h||(h=c("useReStore")))(),b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();j(function(){c("promiseDone")(a.runInTransaction(function(a){return c("LSRequestAdContextFromThreadKeyStoredProcedure")(c("LSFactory")(a),{threadKey:b})},"readwrite"))},[b,a])}g["default"]=a}),98);
__d("useIsAdmodOnboardingEnabledForThread.react",["LSThreadBitOffset","MWLSThread","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=d("MWLSThread").useThread(a,function(a){return d("LSThreadBitOffset").has(199,a)});return c("gkx")("24034")&&Boolean(a)}g.useIsAdmodOnboardingEnabledForThread=a}),98);
__d("MAWFilePressable.react",["fbt","CometErrorBoundary.react","FBLogger","I64","MAWAttachmentBlob.react","MWChatMessageId","MWFileViewerLogger","MWXPressable.react","formatFileSize","goUriOnNewWindow","react","useMWFileOnPress"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react")),l=i.useCallback,m={filePressable:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},n=h._("__JHASH__uiTAWyhPCWI__JHASH__");function o(a){return a.filesize==null?null:c("formatFileSize")((j||(j=d("I64"))).to_int32(a.filesize))}function p(a){var b=a.children,d=a.linkProps,e=a.onPress;a=a.testid;return k.jsx(c("MWXPressable.react"),{display:"inline",linkProps:d,onPress:e,overlayDisabled:!0,testid:void 0,xstyle:m.filePressable,children:b})}p.displayName=p.name+" [from "+f.id+"]";function q(a){var b=a.attachmentID,e=a.children,f=a.entrypoint,g=a.linkProps,h=a.messageID,i=a.onPress;a=a.testid;a=c("useMWFileOnPress")(h,b,i,f,d("MWFileViewerLogger").generateSessionId());return k.jsx(p,{linkProps:g,onPress:a,testid:void 0,children:e})}q.displayName=q.name+" [from "+f.id+"]";function a(a){var b=a.children,e=a.entrypoint,f=a.file,g=a.onPress;a=a.testid;a=((a=f.filename)!=null?a:n).toString();var h=d("MAWAttachmentBlob.react").getAttachmentBlob(f,"MAWFilePressable"),i=d("MWChatMessageId").makeSent((j||(j=d("I64"))).to_string(f.threadKey),f.messageId,j.to_string(f.timestampMs)),m={download:a,target:"_blank",url:h},r=o(f),s=l(function(a,b){c("FBLogger")("rpp_file_viewer","cannot_load_entry_point").mustfix(a.message||"Cannot open file viewer in "+b),c("goUriOnNewWindow")(h)},[h]);return i.type==="sent"?k.jsx(c("CometErrorBoundary.react"),{onError:s,children:k.jsx(q,{attachmentID:f.attachmentFbid,entrypoint:e,linkProps:m,messageID:i.value,onPress:g,testid:void 0,children:b({filename:a,messageID:i,size:r})})}):k.jsx(p,{linkProps:m,onPress:g,testid:void 0,children:b({filename:a,messageID:i,size:r})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWChatFile.react",["MAWFilePressable.react","MDSTextPairing.react","MWChatFilePreview.react","MWInboxInfoSharedContentQPLLogger","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={content:{color:"xzsf02u",flexGrow:"x1iyjqo2",fontWeight:"x1s688f",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",wordBreak:"x13faqbe",$$css:!0},fileSize:{paddingTop:"x889kno",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",userSelect:"x87ps6o",$$css:!0}};function l(){d("MWInboxInfoSharedContentQPLLogger").logOpenSharedContentFromThread("files")}function a(a){var b=a.file;return j.jsx(c("MAWFilePressable.react"),{entrypoint:"chat_file_v4",file:b,onPress:l,testid:void 0,children:function(a){var d=a.filename;a=a.size;return j.jsxs("div",{className:(h||(h=c("stylex")))(k.root,!1),children:[j.jsx(c("MWChatFilePreview.react"),{attachment:b,withPreview:!1}),j.jsxs("div",{className:"xzsf02u x1iyjqo2 x1s688f xz9dl7a xn6708d xsag5q8 x1ye3gou x13faqbe",children:[j.jsx(c("MDSTextPairing.react"),{headline:d,headlineLineLimit:3,level:4}),j.jsx("div",{className:"x889kno",children:j.jsx(c("MDSTextPairing.react"),{body:a,bodyColor:"secondary",bodyLineLimit:1,level:4})})]})]})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWChatStateUpdateThreadKeyDescriptorIfAuthoritative",["Int64Hooks","LSAuthorityLevel","LSIntEnum","MWChatStateActions","MWChatStateV2.react"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){e===void 0&&(e={shouldClearOldHiddenTab:!1,shouldUpdateThreadType:!1});var f=d("MWChatStateV2.react").useDispatch(),g=a==null?void 0:a.threadKey,i=a==null?void 0:a.clientThreadKey,j=a==null?void 0:a.threadType,k=a==null?void 0:a.authorityLevel;d("Int64Hooks").useEffectInt64(function(){g!=null&&k!=null&&(h||(h=d("LSIntEnum"))).toNumber(k)>=c("LSAuthorityLevel").AUTHORITATIVE&&f(d("MWChatStateActions").updateThreadKeyDescriptor(b.tabId,g,i,e.shouldUpdateThreadType?j:void 0,{shouldClearOldHiddenTab:e.shouldClearOldHiddenTab}))},[b.tabId,g,i,f,k,j,e.shouldUpdateThreadType,e.shouldClearOldHiddenTab])}g["default"]=a}),98);
__d("MWPChatConnectionStatusCard.react",["fbt","I64","LSIntEnum","LSInternetConnectionState","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||d("react");function n(a){var b=a.connectionStatus;a=a.renderWrapper;if(b==="Connected")return null;else if(b==="Disconnected")return a(h._("__JHASH__vs4VWaH-KyB__JHASH__"));else if(b==="Connecting")return a(h._("__JHASH__t43xAFuvvRz__JHASH__"));else return null}n.displayName=n.name+" [from "+f.id+"]";function a(a){a=a.renderWrapper;var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(b.tables.connectivity_status).map(function(a){return(j||(j=d("I64"))).equal(a.internetConnectionState,(k||(k=d("LSIntEnum"))).ofNumber(c("LSInternetConnectionState").CONNECTED))?"Connected":"Disconnected"})},[b],f.id+":59");return m.jsx(n,{connectionStatus:(e=e)!=null?e:"Connected",renderWrapper:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatConnectionStatusCard.react",["MWPChatConnectionStatusCard.react","MWXText.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){return i.jsx("div",{className:"xwwskcc x1q0q8m5 xso031l x1lliihq xz9dl7a xsag5q8 x2b8uid",children:i.jsx(c("MWXText.react"),{type:"meta4",children:a})})}j.displayName=j.name+" [from "+f.id+"]";function a(){return i.jsx(c("MWPChatConnectionStatusCard.react"),{renderWrapper:j})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBRestoreInThreadScrollPersistentBanner.react",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWPColorUtils","MWXLink.react","MWXText.react","QPLUserFlow","cr:8641","promiseDone","qex","react","requireDeferred","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useRef,m=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreInThreadScrollPersistentBanner.react"),n=(e=c("qex")._("179"))!=null?e:!1;function a(a){var e,f=a.onDismissUpsell;a=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),{});var g=a[0];a=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var j=a.startFlow,o=(i||(i=c("useReStore")))(),p=l(!1),q=c("MWChatEncryptedBackupsQPLSource.enum").IN_THREAD_SCROLL_PERSISTENT_BANNER,r=function(a){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:o,onFetch:function(b){var e=b.ebsmWiped,f=b.firstUpsellTime,g=b.hasEbKeysLocally,h=b.hasEBSM,i=b.hasPDB,k=b.hasUserRestoredBefore;b=b.hasUserRestoredBeforeTemp;j({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:g,has_ebsm:h,has_pdb:i,has_user_restored_before:k,has_user_restored_before_temp:b,restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:q});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,a);p.current===!1&&(p.current=!0,c("promiseDone")(m.load(),function(a){return a(g)}))}})};a=c("useVisibilityObserver")({onVisible:function(){r("RESTORE_IN_THREAD_PERSISTENT_BANNER_IMPRESSION")}});e=b("cr:8641")==null?void 0:(e=b("cr:8641")())==null?void 0:e.threadTheme;var s=(e==null?void 0:e.titlebarBackgroundColor)!=null?d("MWPColorUtils").int64ToHex(e.titlebarBackgroundColor):void 0;e=(e==null?void 0:e.composerTintColor)!=null?d("MWPColorUtils").int64ToHex(e.composerTintColor):void 0;return n?null:k.jsx("div",{className:"xcrg951 x80vd3b x1q0q8m5 xso031l xt0psk2 x1o1nzlu x10b6aqq x889kno x10l6tqk x1wo2wf3 xh8yej3 x1vjfegm",ref:a,style:s!=null?{backgroundColor:s}:void 0,children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",numberOfLines:2,type:"meta4",children:k.jsxs(k.Fragment,{children:[h._("__JHASH__4WMqcKoHbeS__JHASH__")," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:function(){r("RESTORE_IN_THREAD_PERSISTENT_BANNER_CTA_CLICKED"),g({onDismissUpsell:f,source:q})},target:"_blank",testid:void 0,weight:"semibold",children:k.jsx("div",{style:{color:e,display:"inline"},children:h._("__JHASH__6flAN3HetRr__JHASH__")})})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBRestoreInThreadScrollPersistentBannerWrapper.react",["MWEBRestoreInThreadScrollPersistentBanner.react","MWEncryptedBackupsDeferLocalStorageUpsell","cr:4062","react","useCometRouterState","useMWEBGetUpsellState","useMWEncryptedBackupsIsUpsellDismissed","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(){var a=(h||(h=c("useReStore")))(),e=c("useMWEncryptedBackupsIsUpsellDismissed")({upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.SCROLL_BANNER_CHAT_TAB}),f=e[0],g=e[1];e=c("useCometRouterState")();e=e==null?void 0:e.main.route.tabKey;var i=b("cr:4062")({}),k=c("useMWEBGetUpsellState")();k=k.isRestoreUpsellsDismissed;return e!=="messenger"&&i===4&&!f&&k===!1?j.jsx(c("MWEBRestoreInThreadScrollPersistentBanner.react"),{onDismissUpsell:function(){g(!0),d("MWEncryptedBackupsDeferLocalStorageUpsell").updateUpsellEntry({db:a,upsellType:d("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.SCROLL_BANNER_CHAT_TAB})}}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBRestoreGapUI.react",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","QPLUserFlow","cr:4062","promiseDone","qex","react","requireDeferred","useLabyrinthLogging","useMWEBGetUpsellState","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react")),l=j.useRef,m=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreGapUI.react"),n={banner:{backgroundColor:"xlhe6ec",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingStart:"x1xfsgkm",paddingLeft:null,paddingRight:null,paddingEnd:"xqmdsaz",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0}},o=(e=c("qex")._("179"))!=null?e:!1;function a(){var a=(i||(i=c("useReStore")))(),e=b("cr:4062")({}),f=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),{}),g=f[0];f=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var j=f.startFlow;f=c("useMWEBGetUpsellState")();f=f.isRestoreUpsellsDismissed;var p=c("MWChatEncryptedBackupsQPLSource.enum").IN_THREAD_GAP_UI,q=l(!1),r=function(b){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:a,onFetch:function(a){var e=a.ebsmWiped,f=a.firstUpsellTime,g=a.hasEbKeysLocally,h=a.hasEBSM,i=a.hasPDB,k=a.hasUserRestoredBefore;a=a.hasUserRestoredBeforeTemp;j({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:g,has_ebsm:h,has_pdb:i,has_user_restored_before:k,has_user_restored_before_temp:a,restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:p});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,b);q.current===!1&&(q.current=!0,c("promiseDone")(m.load(),function(a){return a(g)}))}})},s=c("useVisibilityObserver")({onVisible:function(){r("RESTORE_IN_THREAD_MISSING_MESSAGE_GAP_UI_IMPRESSION")}});return e!==4||f||o?null:k.jsx(c("MWXRow.react"),{align:"center",paddingHorizontal:16,paddingVertical:12,ref:s,spacing:0,children:k.jsx(c("MWXRowItem.react"),{xstyle:n.banner,children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:k.jsxs(k.Fragment,{children:[h._("__JHASH__4WMqcKoHbeS__JHASH__")," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:function(){r("RESTORE_IN_THREAD_GAP_UI_CTA_CLICK"),g({source:p})},target:"_blank",testid:void 0,children:h._("__JHASH__6flAN3HetRr__JHASH__")})})]})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMDotMeReferrerContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=e();function a(a){var b=a.children;a=a.referrer;return i.jsx(k.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(k)}g.MWMDotMeReferrerContextProvider=a;g.useMDotMeReferrer=b}),98);
__d("MWCMAutoJoinNotifNUX.react",["fbt","CometContextualMessage.react","CometErrorBoundary.react","CometPlaceholder.react","JSResourceForInteraction","LSCommunityBitOffset","MWInboxPersistedUIState","MWXButtonGroup.react","ReQL","ReQLSuspense","react","useMWXLazyDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useRef,m=b.useState,n=c("JSResourceForInteraction")("LSMuteThreadDialog.react").__setRef("MWCMAutoJoinNotifNUX.react");function o(a){var b=a.thread;a=c("useMWXLazyDialog")(n);var e=a[0];a=m(!1);var f=a[0],g=a[1];a=d("MWInboxPersistedUIState").usePersistedUIState(0,"__MWCMAutoJoinNotifNuxBanner.showBanner__");var i=a[0],j=a[1];a=l(i);var o=l(!1);i=c("useVisibilityObserver")({onVisible:function(){o.current||(o.current=!0,j(function(a){return a+1}))}});return a.current<3&&!f?k.jsx("div",{className:"xcrg951 x7m3og9 x1vjfegm",ref:i,children:k.jsx(c("CometContextualMessage.react"),{addOnPrimary:k.jsx(c("MWXButtonGroup.react"),{primary:{label:h._("__JHASH__7NhHq3FFyid__JHASH__"),onPress:function(){e({threadKey:b.threadKey},function(){})},padding:"wide",type:"secondary"}}),body:h._("__JHASH__y4SjVH1sWqP__JHASH__"),headline:h._("__JHASH__Y1eNmRtGK12__JHASH__",[h._param("param",b.threadName)]),level:4,onClose:function(){g(!0)}})}):null}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.thread,e=(i||(i=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.community_folders).getKeyRange(b.parentThreadKey)},[e,b.parentThreadKey],f.id+":122");if(a){a=d("LSCommunityBitOffset").has(39,a);return a?k.jsx(o,{thread:b}):null}else return null}p.displayName=p.name+" [from "+f.id+"]";function a(a){a=a.thread;return k.jsx(c("CometErrorBoundary.react"),{children:k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(p,{thread:a})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWCMMemberRequestsCtaParser.react",["GroupsCometChatsEngagementLogger","I64","MWCMMemberRequestsDialog.entrypoint","MWInboxInfoPanelContext.react","MWLSThreadDisplayContext","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),b=a.isOnMemberRequestsPageRef,e=a.pushMemberRequestsPage,f=a.setShouldNavToMemberRequests,g=a.setThreadInfoVisible,i=a.threadInfoVisible;a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();var j=a==="ChatTab";a=c("useMWXEntryPointDialog")(c("MWCMMemberRequestsDialog.entrypoint"),{});var k=a[0],l=function(a){k({parentSurface:"request_to_join_activity_banner",threadKey:a})};return function(a,c){var k=function(){d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{member_join_request_enabled:"1"},event:"request_to_join_banner",source:"request_to_join_activity_banner",surface:"thread_view",thread_id:(h||(h=d("I64"))).to_string(a.banner.threadKey)})};if(c.ctaType!=="cm_thread_member_requests_view")return{type:"unimplemented"};return j?{onPress:function(){k(),l(a.banner.threadKey)},type:"action"}:{onPress:function(){k();if(b.current===!0)return;i===!0?e("request_to_join_activity_banner"):(f(!0),g(!0))},type:"action"}}}g["default"]=a}),98);
__d("MWCMSubThreadChatTabWithSubthread.react",["BaseMultiStepContainer.react","CometPlaceholder.react","MWCMSubthreadChatTabContext.react","MWV2ChatTabLoadingWithGlimmers.react","MWV2TabContainer","cr:4346","cr:8674","deferredLoadComponent","react","requireDeferredForDisplay"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback,k=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWCMSubthreadThreadViewChatTab.react").__setRef("MWCMSubThreadChatTabWithSubthread.react"));function l(a,b){return j(function(d){a(function(a){var e=a.onReturn;return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2ChatTabLoadingWithGlimmers.react"),{tab:b}),children:i.jsx(k,{onReturn:function(){e()},tab:b,threadKey:d})})})},[a,b])}function m(a){var b=a.children,c=a.pushPage;a=a.tab;c=l(c,a);return i.jsx(d("MWCMSubthreadChatTabContext.react").MWCMSubthreadChatTabContextProvider,{pushSubthreadViewPage:c,children:b})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var d=a.children,e=a.tab,f=a.thread,g=f.threadKey,h=f.threadType;return i.jsx("div",{className:"xgqcy7u x1lq5wgf x2c8kfy x17adc0v xhvchuf x1jx94hy x1rgmuzj xbbk1sx",children:i.jsx(c("BaseMultiStepContainer.react"),{disableFocusContainment:!1,disableInitialAutoFocus:!1,fallback:i.jsx(c("MWV2ChatTabLoadingWithGlimmers.react"),{tab:e}),fitContentWidth:!0,children:function(a){return i.jsx(m,{pushPage:a,tab:e,children:i.jsxs(c("MWV2TabContainer"),{style:{boxShadow:"none",margin:0},tab:e,threadKey:f.threadKey,children:[b("cr:4346")!=null?i.jsx(b("cr:4346"),{pushPage:a,tab:e,thread:f}):null,b("cr:8674")!=null?i.jsx(b("cr:8674"),{pushPage:a,tab:e,threadKey:g,threadType:h}):null,d]})})}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEditThreadNameDialogTrigger.react",["JSResourceForInteraction","promiseDone","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;i||(i=d("react"));var j=i.useRef,k=c("JSResourceForInteraction")("MWV2ThreadNameDialog.react").__setRef("MWEditThreadNameDialogTrigger.react");function a(a){var b=a.children,d=a.threadKey;a=j(null);var e=(h||(h=c("useReStore")))(),f=c("useMWXLazyDialog")(k),g=f[0];f=function(){c("promiseDone")(e.table("threads").get(d),function(a){if(a==null)return;g({thread:a})})};return b(f,a)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXIconFriendGenericAdd",["MWXSvgIcon","SVGIcon","cr:9160","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9160")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWAddMemberToGroupCircleButton.react",["MWXCircleButton.react","MWXIconFriendGenericAdd","MessengerWebUXLogger","react","useMWAddParticipantDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.label,d=a.testid,e=a.threadKey,f=a.threadType,g=c("useMWAddParticipantDialog")(e,f),h=c("MessengerWebUXLogger").useInteractionLogger();d=function(){g(),h==null?void 0:h({eventName:"open_add_members_dialog",threadKey:e,threadType:f})};return i.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconFriendGenericAdd"),label:b,onPress:d,size:36,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatInthreadBannerIcon.react",["MWXIconStrict.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.icon;return a==null?null:i.jsx("div",{className:"x6s0dn4 x4tc44c x14yjl9h xudhj91 x18nykt9 xww2gxu x78zum5 xl56j7k x1yrsyyn xsyo7zv x10b6aqq x16hj40l",children:i.jsx(c("MWXIconStrict.react"),{color:"white",icon:a.icon,size:12})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatInthreadIconParser.react",["MWPXMAIconParser","MWXIconFriendGenericAdd","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";function h(a){switch(a){case"friend-woman-add":return c("MWXIconFriendGenericAdd");default:c("recoverableViolation")("Unknown XMA Icon: "+a,"messenger_web_product");return}}function a(a){a=d("MWPXMAIconParser").parse(a);if(a==null)return;if(typeof a==="string")return a;var b=a.color;a=a.icon;a=h(a);if(a!=null)return{color:b,icon:a}}g.parse=a}),98);
__d("MWChatInThreadBanner.react",["CometProfilePhoto.react","MWChatInthreadBannerIcon.react","MWChatInthreadIconParser.react","MWLSThreadDisplayContext","MWXIconChevronRight","MWXIconStrict.react","MWXPressable.react","MWXRow.react","MWXRowItem.react","MWXText.react","MWXTextPairing.react","TetraButton.react","react","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={bannerIcon:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",justifyContent:"xl56j7k",$$css:!0},container:{backgroundColor:"xfpmyvw",position:"x1n2onr6",$$css:!0},grow:{flexGrow:"x1iyjqo2",$$css:!0},image:{marginEnd:"x11i5rnm",marginLeft:null,marginRight:null,$$css:!0},infoLabel:{backgroundColor:"x1qhmfi1",borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x4p5aij",paddingEnd:"x150jy0e",paddingBottom:"x1j85h84",paddingStart:"x1e558r4",textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",$$css:!0},linkBanner:{width:"xh8yej3",$$css:!0},sheet:{borderBottomColor:"x80vd3b",borderBottomStyle:"x1q0q8m5",borderBottomWidth:"xso031l",$$css:!0},sheetInner:{paddingBottom:"x1a8lsjc",width:"xh8yej3",$$css:!0},withTopDivider:{borderTopColor:"x1l1xfun",borderEndColor:"xv160w3",borderBottomColor:"xwwskcc",borderStartColor:"xsb8bxb",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0}};function k(a){var b=a.action;a=a.button;var d=a.ctaTitle;switch(b.type){case"link":return i.jsx(c("MWXRowItem.react"),{xstyle:j.grow,children:i.jsx(c("TetraButton.react"),{label:d,linkProps:{url:b.url},type:"secondary"})});case"action":return i.jsx(c("MWXRowItem.react"),{xstyle:j.grow,children:i.jsx(c("TetraButton.react"),{label:d,onPress:b.onPress,ref:b.contextRef,type:"secondary"})});case"popover":return i.jsx(c("MWXRowItem.react"),{xstyle:j.grow,children:b.popoverTrigger(function(a,b){return i.jsx(c("TetraButton.react"),{label:d,onPress:function(){return b()},ref:a,type:"secondary"})})});case"unimplemented":c("recoverableViolation")("In thread banner cta not implemented, CTA type: "+a.ctaType+" CTA Title: "+a.ctaTitle,"messenger_web_product");return null}}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b,e,f=a.banner,g=a.ctaParser;a=a.impressionRef;b=d("MWChatInthreadIconParser.react").parse((b=f.banner.iconUrl)!=null?b:"");var h=f.banner.chevronCtaType!=null,l=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();l=l==="Inbox";b=b!=null?typeof b==="string"?i.jsx(c("MWXRowItem.react"),{expanding:!1,children:i.jsx("div",{className:"x11i5rnm",children:i.jsx(c("CometProfilePhoto.react"),{shape:"circle",size:24,source:{uri:b}})})}):i.jsx(c("MWXRowItem.react"),{expanding:!1,children:i.jsx("div",{className:[j.grow,"x78zum5 xdt5ytf x1iyjqo2 xl56j7k"],children:i.jsx(c("MWChatInthreadBannerIcon.react"),{icon:b})})}):null;e=i.jsx(c("MWXRowItem.react"),{expanding:!0,children:i.jsx(c("MWXTextPairing.react"),{body:((e=f.banner.titleSectionOne)!=null?e:"")+((e=f.banner.titleSectionTwo)!=null?e:""),bodyLineLimit:1,level:4,meta:f.banner.heading,metaLineLimit:1,metaLocation:"above"})});var m=f.banner.infoLabel!=null?i.jsx(c("MWXRowItem.react"),{children:i.jsx(c("MWXText.react"),{type:"meta1",children:i.jsx("span",{className:"x1qhmfi1 x1lcm9me x1yr5g0i xrt01vj x10y3i5r x6ikm8r x10wlt62 x4p5aij x150jy0e x1j85h84 x1e558r4 xlyipyv xuxw1ft",children:f.banner.infoLabel})})}):null,n=f.leftButton,o=f.rightButton,p;if(n!=null&&o!=null)p=i.jsxs(c("MWXRow.react"),{paddingTop:8,spacing:4,wrap:"forward",children:[i.jsx(k,{action:g(f,n),button:n}),i.jsx(k,{action:g(f,o),button:o})]});else{n=(n=n)!=null?n:o;n!=null&&(p=i.jsx(c("MWXRow.react"),{paddingTop:8,children:i.jsx(k,{action:g(f,n),button:n})}))}o=h?i.jsx(c("MWXRowItem.react"),{verticalAlign:"center",children:i.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconChevronRight"),size:12})}):null;var q=i.jsxs("div",{className:"x1a8lsjc xh8yej3",children:[i.jsxs(c("MWXRow.react"),{paddingTop:10,children:[b,e,m,o]}),p]});n=f.bannerAction!=null?g(f,f.bannerAction):void 0;var r;if(n!=null)switch(n.type){case"link":r=i.jsx(c("MWXPressable.react"),{expanding:!0,linkProps:{target:"_blank",url:n.url},xstyle:function(){return[j.linkBanner]},children:q});break;case"action":r=i.jsx(c("MWXPressable.react"),{expanding:!0,onPress:n.onPress,ref:n.contextRef,children:q});break;case"popover":r=n.popoverTrigger(function(a,b){return i.jsx(c("MWXPressable.react"),{expanding:!0,onPress:function(){return b()},ref:a,children:q})});break;case"unimplemented":e=(b=(h=f.bannerAction)==null?void 0:h.ctaType)!=null?b:"";e!=="member_requests_view"&&c("recoverableViolation")("In thread banner cta not implemented: "+e,"messenger_web_product");r=q;break}else r=q;return i.jsx("div",{className:["xfpmyvw x1n2onr6",l?"x1l1xfun xv160w3 xwwskcc xsb8bxb x13fuv20 x178xt8z":null],ref:a,children:i.jsx("div",{className:"x80vd3b x1q0q8m5 xso031l",children:r})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useInThreadBannerWithCta",["I64","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=function(a,b){return b!=null?a.get((i||(i=d("I64"))).to_string(b)):null};function k(a,b,c){return{banner:a,bannerAction:j(b,a.bannerCtaId),leftButton:j(b,a.cta1Id),overflowMenuActions:(c!=null?[c.cta1Id,c.cta2Id,c.cta3Id,c.cta4Id,c.cta5Id]:[]).map(function(a){return j(b,a)}).filter(Boolean),rightButton:j(b,a.cta2Id)}}function a(a,b){var e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.in_thread_banner_overflow_menu).getKeyRange(b,a.bannerId)},[e,b,a.bannerId],f.id+":67"),j=new Map(d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.tables.in_thread_banner_ctas).getKeyRange(a.bannerId).map(function(a){return[(i||(i=d("I64"))).to_string(a.ctaId),a]})},[e,a.bannerId],f.id+":74"));return k(a,j,g)}g.createBanner=k;g.useInThreadBannerWithCta=a}),98);
__d("LSFetchBannersStoredProcedure",["LSFetchBanners","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSFetchBanners").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("useMWLSEnsureInThreadBannerExists",["LSFactory","LSFetchBannersStoredProcedure","MWThreadKey.react","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect;function a(){var a=(h||(h=c("useReStore")))(),b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();j(function(){var d=a.runInTransaction(function(a){return c("LSFetchBannersStoredProcedure")(c("LSFactory")(a),{threadKey:b})},"readwrite");c("promiseDone")(d)},[b,a])}g["default"]=a}),98);
__d("LSExecuteCTA",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.filter(c.db.table(119).fetch(),function(b){return c.i64.eq(b.ctaId,a[0])}).next().then(function(a,e){var f=a.done;a=a.value;return f?0:(e=a.item,d[0]=new c.Map(),d[0].set("banner_id",e.bannerId),d[0].set("cta_type",e.ctaType),d[0].set("context_id",e.contextId),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"in_thread_banner_execute_cta_queue",c.i64.cast([0,73]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0])))})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSExecuteCTAStoredProcedure",["LSExecuteCTA","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.ctaId;return c("LSExecuteCTA").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("useMWLSExecuteInThreadBannerCta",["LSExecuteCTAStoredProcedure","LSFactory","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return j(function(b){c("promiseDone")(a.runInTransaction(function(a){return c("LSExecuteCTAStoredProcedure")(c("LSFactory")(a),{ctaId:b})},"readwrite"))},[a])}g["default"]=a}),98);
__d("LSServerMutationCta",["LSIssueNewError","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return c.sortBy(c.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[0]=!1:(b=a.item,d[0]=b.errorShouldBeShown)})},function(a){return d[0]===!0?c.sequence([function(a){return c.localizeV2Async(c.i64.cast([0,2285622730]),void 0).then(function(a){return d[4]=a})},function(a){return c.localizeV2Async(c.i64.cast([0,1919524925]),void 0).then(function(a){return d[5]=a})},function(a){return c.storedProcedure(b("LSIssueNewError"),void 0,c.i64.cast([0,1545093]),d[4],d[5],void 0,void 0)}]):c.resolve()},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("marketplace_cta_type",a[1]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),"marketplace_server_mutation_cta",c.i64.cast([0,279]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSServerMutationCtaStoredProcedure",["LSServerMutationCta","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.marketplaceCtaType;return c("LSServerMutationCta").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("useMWLSMarketplaceServerMutationCta",["LSFactory","LSServerMutationCtaStoredProcedure","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))();return j(function(b,d){c("promiseDone")(a.runInTransaction(function(a){return c("LSServerMutationCtaStoredProcedure")(c("LSFactory")(a),{marketplaceCtaType:d,threadKey:b})},"readwrite"))},[a])}g["default"]=a}),98);
__d("useMWLSMarketplaceCtaParser",["CometMarketplaceConfirmMarkAsPaidDialog.entrypoint","CometMarketplaceCreateDiscountedPriceDialog.entrypoint","CometMarketplaceInboxLabelChatDialog.entrypoint","CometMarketplaceLogger","FBLogger","I64","JSResourceForInteraction","MWPActor.react","MWThreadKey.react","MWXLazyPopoverTrigger.react","ReQL","ReQLSuspense","react","recoverableViolation","useMWLSExecuteInThreadBannerCta","useMWLSMarketplaceServerMutationCta","useMWXEntryPointDialog","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j.useMemo;b=["marketplace_mark_as_available","marketplace_mark_as_pending","marketplace_mark_as_sold","marketplace_mark_as_sold_scaled","marketplace_mark_as_sold_with_txn_survey","marketplace_mark_as_sold_with_txn_survey_scaled","marketplace_mark_as_sold_with_select_buyer","marketplace_mark_as_sold_with_select_buyer_scaled"];var m=new Set(b);e=new Set(b.concat(["marketplace_rate_buyer","marketplace_scaled_rate_buyer","marketplace_rate_seller","marketplace_scaled_rate_seller","marketplace_report_buyer","marketplace_report_seller","marketplace_see_details","marketplace_request_payment","marketplace_send_payment","marketplace_find_similar","marketplace_more_options","marketplace_p2m_request_payment","marketplace_xma_call_function","marketplace_label_chat","marketplace_mark_as_paid","marketplace_view_profile","marketplace_create_discount","marketplace_server_mutation","marketplace_banner_open_native"]));function n(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.participants,["contactId"]).getKeyRange(a).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,e)}).map(function(a){return(i||(i=d("I64"))).to_string(a.contactId)})},[e,a,b],f.id+":81")}function a(){var a=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),b=c("useMWLSMarketplaceServerMutationCta")(),e=c("useMWLSExecuteInThreadBannerCta")(),f=n(a),g=c("useMWXLazyDialog")(c("JSResourceForInteraction")("CometFRX_DEPRECATED.react").__setRef("useMWLSMarketplaceCtaParser")),h=g[0],j=(i||(i=d("I64"))).to_string(a);g=c("useMWXEntryPointDialog")(c("CometMarketplaceInboxLabelChatDialog.entrypoint"),{thread_id:j});var o=g[0];a=c("useMWXEntryPointDialog")(c("CometMarketplaceConfirmMarkAsPaidDialog.entrypoint"),{threadId:j});var p=a[0];g=c("useMWXEntryPointDialog")(c("CometMarketplaceCreateDiscountedPriceDialog.entrypoint"),{threadId:j});var q=g[0];return l(function(){var a=function a(g,l){var n=l.ctaId,r=l.ctaType,s=l.deeplinkUrl,t=l.webviewUrl;if(r==="marketplace_see_details"||r==="marketplace_banner_open_native"){var u;u=(u=t)!=null?u:s;if(u!=null)return{type:"link",url:u};c("recoverableViolation")("Marketplace see details cta without url","messenger_web_product")}if(r==="marketplace_view_profile"){u=(u=t)!=null?u:s;if(u!=null)return{type:"link",url:u};c("recoverableViolation")("Marketplace view profile cta without url","messenger_web_product")}if(r==="marketplace_scaled_rate_seller"&&t!=null)return{type:"link",url:t};if(r==="marketplace_more_options"&&g.overflowMenuActions.length>0)return{popoverTrigger:function(b){return k.jsx(c("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{ctaParser:function(b){return a(g,b)},menu:g.overflowMenuActions},popoverResource:c("JSResourceForInteraction")("MWLSMarketplacePopoverMenu.react").__setRef("useMWLSMarketplaceCtaParser"),children:b})},type:"popover"};if(r==="marketplace_report_buyer"||r==="marketplace_report_seller"){if(f!=null)return{onPress:function(){return h({entryPoint:"REPORT_BUTTON",id:f,location:r==="marketplace_report_buyer"?"marketplace_messenger_report_buyer":"marketplace_messenger_report_seller"},function(){})},type:"action"};c("recoverableViolation")("Haven't implemented report buyer/seller for threads with more than 1 person","messenger_web_product")}if(m.has(r))return{onPress:function(){return e(n)},type:"action"};if(r==="marketplace_label_chat")return{onPress:function(){return o({threadID:j},function(){return e(n)})},type:"action"};if(r==="marketplace_mark_as_paid")return{onPress:function(){return p({threadID:j},function(){return e(n)})},type:"action"};if(r==="marketplace_create_discount")return{onPress:function(){d("CometMarketplaceLogger").logClick("create_discount","messenger_thread_view");return q({},function(){return e(n)})},type:"action"};if(r==="marketplace_server_mutation"){s=l.actionContentBlob;var v="";if(s!=null){t=((u=JSON.parse(s))!=null?u:{}).marketplace_cta_type;typeof t==="string"?v=t:c("FBLogger")("messenger_web_product").mustfix("blob marketplace_cta_type is not a valid string type")}return{onPress:function(){return b((i||(i=d("I64"))).of_string(j),v)},type:"action"}}return{type:"unimplemented"}};return a},[e,b,f,h,q,o,p,j])}g.marketplaceCta=e;g.useMWLSMarketplaceCtaParser=a}),98);
__d("useMWLSInThreadBannerCtaParser",["useMWCMMemberRequestsCtaParser.react","useMWLSAdContextCtaParser","useMWLSMarketplaceCtaParser"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("useMWLSMarketplaceCtaParser").useMWLSMarketplaceCtaParser(),b=c("useMWLSAdContextCtaParser")(),e=c("useMWCMMemberRequestsCtaParser.react")();return function(c,f){var g=f.ctaType;if(d("useMWLSMarketplaceCtaParser").marketplaceCta.has(g))return a(c,f);else if(g==="ads_context")return b(c,f);else if(g==="cm_thread_member_requests_view")return e(c,f);return{type:"unimplemented"}}}g["default"]=a}),98);
__d("MWLSInThreadBannerComponent.react",["GroupsCometChatsEngagementLogger","I64","MWChatInThreadBanner.react","ReQL","ReQLSuspense","react","useInThreadBannerWithCta","useMWLSEnsureAdContextExists","useMWLSEnsureInThreadBannerExists","useMWLSInThreadBannerCtaParser","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function l(a){var b=a.banner,e=a.impressionRef;a=a.threadKey;b=d("useInThreadBannerWithCta").useInThreadBannerWithCta(b,a);a=c("useMWLSInThreadBannerCtaParser")();return k.jsx(c("MWChatInThreadBanner.react"),{banner:b,ctaParser:a,impressionRef:e})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.threadKey;c("useMWLSEnsureInThreadBannerExists")();c("useMWLSEnsureAdContextExists")();var e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.in_thread_banner).getKeyRange(b)},[e,b],f.id+":56");a=g==null?void 0:g.cta1Type;var j=g==null?void 0:g.cta2Type,m=c("useSinglePartialViewImpression")({onImpressionStart:function(){(g==null?void 0:g.bannerCtaType)==="cm_thread_member_requests_view"&&d("GroupsCometChatsEngagementLogger").log({action:"impression",client_extras:{member_join_request_enabled:"1"},event:"request_to_join_banner",source:"request_to_join_activity_banner",surface:"thread_view",thread_id:(i||(i=d("I64"))).to_string(b)})}});return g==null||a==="proactive_warning_affirmative"||a==="proactive_warning_negative"||j==="proactive_warning_affirmative"||j==="proactive_warning_negative"?null:k.jsx(l,{banner:g,impressionRef:m,threadKey:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWFailChatTabOpenQPLEvent",["MWGetChatTabOpenQPLEventTrace"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){c("MWGetChatTabOpenQPLEventTrace")(a,function(a){a.failTrace(b,!0)})}g["default"]=a}),98);
__d("useMAWThreadLastMessageConsistencyLoggingPerformLog",["CometDebounce","I64","Int64Hooks","MAWBridgeSendAndReceive","Promise","WATimeUtils","asyncToGeneratorRuntime","logMessengerWebFalcoEvent","promiseDone","useMWEntrypoint"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("CometDebounce")(c("logMessengerWebFalcoEvent")),k=5;function a(){var a=c("useMWEntrypoint")();return d("Int64Hooks").useCallbackInt64(function(e){var f=e.threadKey,g=e.threadLastActivityTimeMs,p=e.threadLastMessageTimeMs,q=e.threadType;c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(i||(i=d("I64"))).compare(p,g)>-1;c={hasMissingMessage:!c,threadLastActivityTimeMs:i.to_string(g),threadLastMessageTimeMs:i.to_string(p)};try{var e=(yield (h||(h=b("Promise"))).all([d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadLastNumMessagesByServerTs",{numMsgs:k,threadKey:(i||(i=d("I64"))).to_string(f)}),d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadLastNumMessagesBySortOrder",{numMsgs:k,threadKey:i.to_string(f)})])),r=e[0];e=e[1];j({threadKey:f,threadType:q},"thread_and_message_list_last_activity_mismatch",a,babelHelpers["extends"]({},c,{armadilloThreadLastMsgAuthoritativeTs:l(r),armadilloThreadLastMsgTs:m(e),isLastMsgsSetConsistent:n(r,e).toString(),lastNumMsgsByServerTs:o(r),lastNumMsgsBySortOrder:o(e)}))}catch(b){j({threadKey:f,threadType:q},"thread_and_message_list_last_activity_mismatch",a,c)}})())},[a])}function l(a){var b;return((b=a[0])==null?void 0:b.serverTs)!=null?d("WATimeUtils").castUnixTimeToMillisTime(a[0].serverTs).toString():""}function m(a){return(a=(a=a[0])==null?void 0:(a=a.sortOrderMs)==null?void 0:a.toString())!=null?a:""}function n(a,b){b=b.filter(function(a){return a.serverTs!=null});return b.every(function(b,c){return b.msgId===a[c].msgId})}function o(a){a=a.map(function(a){return{msgId:a.msgId,serverTsInMillis:a.serverTs!=null?d("WATimeUtils").castUnixTimeToMillisTime(a.serverTs):"",sortOrderMs:a.sortOrderMs,type:a.type}});return JSON.stringify(a)}g["default"]=a}),98);
__d("useMAWThreadLastMessageConsistencyLogging",["I64","Int64Hooks","MAWLoadingStateOutstandingOfflineQueueSelector","MAWStateContext.react","Promise","ReQL","asyncToGeneratorRuntime","promiseDone","react","useMAWThreadLastMessageConsistencyLoggingPerformLog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(k||d("react")).useRef;function a(a){var e=(j||(j=c("useReStore")))(),f=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateOutstandingOfflineQueueSelector").outstandingOfflineQueueSelector()),g=c("useMAWThreadLastMessageConsistencyLoggingPerformLog")(),k=l(null);d("Int64Hooks").useEffectInt64(function(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield (h||(h=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableDescending(e.tables.threads).getKeyRange(a)),d("ReQL").firstAsync(d("ReQL").fromTableDescending(e.tables.messages).getKeyRange(a)),d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(e.tables.reactions).getKeyRange(a).take(20))])),j=c[0],l=c[1];c=c[2];if(l==null||j==null)return;if(f)return;if(k.current===a)return;k.current=a;c=c.reduce(function(a,b){return(i||(i=d("I64"))).max(a,(a=b.reactionCreationTimestampMs)!=null?a:(i||(i=d("I64"))).zero)},(i||(i=d("I64"))).zero);g({threadKey:j.threadKey,threadLastActivityTimeMs:j.lastActivityTimestampMs,threadLastMessageTimeMs:i.max(l.timestampMs,c),threadType:j.threadType})})())},[e,f,g,a])}g["default"]=a}),98);
__d("useThreadLastMessageTimeMs",["ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(b.tables.messages).getKeyRange(a).map(function(a){return a.timestampMs})},[b,a],f.id+":26")}g["default"]=a}),98);
__d("MWMessageElementRefList",[],(function(a,b,c,d,e,f){"use strict";function a(){var a=new Map(),b=new Map(),c={contents:void 0};return{get:function(b,d){var e=a.get(b);if(e==null){c.contents=[b,d];return}return d(e)},set:function(d){var e=b.get(d);if(e!=null)return e;e=function(b){if(b==null){a["delete"](d);return}a.set(d,b);if(c.contents!=null&&c.contents[0]===d){var e=c.contents;e[0];e=e[1];e(b);c.contents=void 0;return}};b.set(d,e);return e}}}f["default"]=a}),66);
__d("isEventSupported",["fbjs/lib/ExecutionEnvironment"],(function(a,b,c,d,e,f,g){"use strict";var h;c("fbjs/lib/ExecutionEnvironment").canUseDOM&&(h=document.implementation&&document.implementation.hasFeature("","")!==!0);function a(a,b){if(!c("fbjs/lib/ExecutionEnvironment").canUseDOM||b===!0&&!("addEventListener"in document))return!1;b="on"+a;var d=b in document;if(!d){var e=document.createElement("div");e.setAttribute(b,"return;");d=typeof e.getAttribute(b)==="function"}!d&&h&&a==="wheel"&&(d=document.implementation.hasFeature("Events.wheel","3.0"));return d}g["default"]=a}),98);
__d("MWChatConversationScroller.react",["BaseScrollableAreaContext","CometThrottle","ExecutionEnvironment","emptyFunction","isEventSupported","react","useLayoutEffect_SAFE_FOR_SSR"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;e=b.forwardRef;var k=b.useCallback,l=b.useContext,m=b.useEffect,n=b.useImperativeHandle,o=b.useLayoutEffect,p=b.useMemo,q=b.useRef;function r(a,b){a=a!=null?a:20;if(b==null)return!1;else return b.scrollTop+b.clientHeight>=b.scrollHeight-a}function s(a,b){a=a!=null?a:20;if(b==null)return!1;else return b.scrollTop<=a}var t=(h||(h=c("ExecutionEnvironment"))).canUseDOM?document.body.style.overscrollBehavior==null&&((d=document.body)==null?void 0:d.style.scrollBoundaryBehavior)==null:!1;function a(a,b){var d=a.boundingClientRectRef,e=a.children,f=a.dispatch,g=a.hasMoreAfter,h=a.onScroll,i=h===void 0?c("emptyFunction"):h,u=a.scrollPositionRef,v=q(f),w=q(null),x=k(function(a){w.current=a;if(d!=null){d.current=a!=null?a.getBoundingClientRect():void 0;return}},[d]);m(function(){v.current=f});var y=function(a,b){b=w.current;if(b!=null){b.scrollTop=a;return}},z=function(a){a===void 0&&(a=!1);var b=w.current;if(b!=null)return y(b.scrollHeight,a)},A=function(a,b){var c=w.current;if(c!=null)return y(c.scrollHeight-(a+c.clientHeight),b)},B=q(!1);B.current=g;var C=function(){var a=u.current,b=w.current;b=b!=null?b.scrollHeight-(b.scrollTop+b.clientHeight):void 0;var c=r(void 0,w.current),d=s(void 0,w.current);u.current=c?B.current?{type:"Island"}:{type:"Bottom"}:b!=null?d?{type:"Top",value:b}:{type:"Between",value:b}:{type:"Bottom"};c=u.current;d=0;var e=0;switch(a.type){case"Bottom":d=1;break;case"Top":case"Between":e=2;break;case"Island":break}if(e===2)switch(c.type){case"Top":d=1;break;case"Between":break;case"Bottom":case"Island":v.current("ScrollToBottom");break}if(d===1){e=0;switch(a.type){case"Top":break;case"Bottom":case"Between":e=2;break}e===2&&c.type==="Top"&&v.current("ScrollToTop")}return i(b)},D=function(a){if(t){var b=a.deltaY>0,c=a.deltaY<0;(b&&r(0,w.current)||c&&s(0,w.current))&&a.preventDefault()}return C()},E=function(a){var b=c("isEventSupported")("mousewheel")?"mousewheel":c("isEventSupported")("wheel")?"wheel":"DOMMouseScroll",d=function(b,c){a.addEventListener(b,c,{passive:!0});return function(){return a.removeEventListener(b,c,{passive:!0})}},e=function(){return a.addEventListener(b,D,{passive:!t})},f=function(){return a.removeEventListener(b,D,{passive:!t})},g=d("mouseenter",e),h=d("mouseleave",f);e=c("CometThrottle")(C,50,{trailing:!0});var i=d("scroll",e),j=d("mouseup",C),k=d("mousedown",C);return function(){f();i();g();h();k();return j()}};m(function(){var a=w.current;if(a==null)return;var b=E(a);return function(){return b()}},[]);o(function(){var a=w.current;!(a==null)&&a.clientHeight>0&&Math.abs(a.clientHeight-a.scrollHeight)<20&&v.current("ContentDoesNotFillContainer")});c("useLayoutEffect_SAFE_FOR_SSR")(function(){var a=u.current;switch(a.type){case"Bottom":z();break;case"Top":A(a.value,!1);break;case"Between":case"Island":break}});c("useLayoutEffect_SAFE_FOR_SSR")(function(){var a=u.current;switch(a.type){case"Bottom":z();break;case"Top":case"Between":A(a.value,!1);break;case"Island":break}},[]);var F=l(c("BaseScrollableAreaContext")),G=p(function(){return{getDOMNode:function(){return w.current}}},[]);h=p(function(){return F.concat([G])},[G,F]);n(b,function(){return{getScroller:function(){return x},isContainerFilled:function(){var a=w.current;if(a==null)return!0;else return!(a.clientHeight>0&&Math.abs(a.clientHeight-a.scrollHeight)<20)},scrollElementIntoViewIfNeeded:function(a){var b=w.current;if(b==null)return;var c=a.getBoundingClientRect();b=b.getBoundingClientRect();c=c.top;b=b.top;if(c<=b){a.scrollIntoView();return}},scrollToBottom:function(){u.current={type:"Bottom"};return z()},scrollToElement:function(a,b){var c=w.current;if(c==null)return;a.scrollIntoView();a=a.getBoundingClientRect();var d=c.getBoundingClientRect();a=a.top;d=d.top;if(a<=d){c.scrollBy(0,-b|0);return C()}},scrollToPosition:A}},[]);return j.jsx(c("BaseScrollableAreaContext").Provider,{children:j.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x6ikm8r x1odjw0f xish69e x16qrkmw","data-release-focus-from":"CLICK",ref:x,tabIndex:-1,children:e}),value:h})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("MWV2MessageScroller.react",["LSIntEnum","LSMailboxMessagesRangeQueryDirection","MWChatConversationScroller.react","emptyFunction","react","useMWMarkThreadAsReadWhenNewMessagesArrive"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useCallback;function a(a){var b=a.children,e=a.fetchMore,f=a.hasMoreAfter,g=a.hasMoreBefore,h=a.markThreadAsRead,l=a.onScroll;l=l===void 0?c("emptyFunction"):l;var m=a.scrollerRefs;a=a.thread;h=h;var n=k(function(){var a;return((a=m.scrollPositionRef.current)==null?void 0:a.type)==="Bottom"},[m]),o=k(function(){return!1}),p=c("useMWMarkThreadAsReadWhenNewMessagesArrive")(a,h,n,o);return j.jsx(c("MWChatConversationScroller.react"),{dispatch:function(a){switch(a){case"ContentDoesNotFillContainer":if(g)return e((i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE));else return;case"ScrollToBottom":if(f)return e((i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").AFTER));else return p();case"ScrollToTop":return e((i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE))}},hasMoreAfter:f,onScroll:l,ref:m.scrollerRef,scrollPositionRef:m.scrollPositionRef,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWV2ConversationScrollerRefs",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useMemo,j=b.useRef;function a(){var a=j(null),b=j({type:"Bottom"});return i(function(){return{scrollerRef:a,scrollPositionRef:b}},[])}g["default"]=a}),98);
__d("useMWChatLoadMoreItemsIncrementally",["I64","LSIntEnum","LSMailboxMessagesRangeQueryDirection","react","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useCallback,l=b.useMemo,m=b.useRef,n=b.useState,o={contents:void 0};function p(){if(o.contents==null){var a;o.contents=((a=window.document.documentElement)==null?void 0:a.style.overflowAnchor)!=null}return(a=o.contents)!=null?a:!1}function a(a,b,e,f,g,h){a=a!=null?a:!1;var o=b!=null?b:!0;b=e!=null?e:{type:"Bottom"};e=a||!p();var q=f.length,r;switch(b.type){case"Top":case"Between":r=b.value>=200;break;case"Bottom":case"Island":r=!1;break}a=n(function(){if(r)return q;return o?window.screen.availHeight<1200?20:40:10});var s=a[0],t=a[1];b=l(function(){return f.slice(-s)},[f,s]);var u=m(s);a=k(function(a){if(!(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE)))throw c("unrecoverableViolation")("Message fetch direction must be 'before'","messenger_web_product");if(u.current+15<=q){u.current+=15;return t(function(){return u.current})}else{g((j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE));if(u.current<q+15){u.current=q+15;return t(function(){return u.current})}}},[g,q,t]);return e?[f,g,h]:[b,a,h||s<q]}g["default"]=a}),98);
__d("useMWLSIsViewerThreadAdminUsingThreadKey",["MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("MWPActor.react").useActor(),e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.table("participants")).getKeyRange(a,b)},[e,b,a],f.id+":24");return(g=g==null?void 0:g.isAdmin)!=null?g:!1}g["default"]=a}),98);
__d("MWPNewMessageAnnouncementForScreenReaders.react",["fbt","CometAccessibilityAnnouncementForDynamicContent.react","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSMessageReplySourceTypeV2","LSMessagingThreadTypeUtil","MWPActor.react","MWPForwardedContent","MWPMessageHasAttachment","MessagingAttachmentType","Promise","ReQL","ReQLSuspense","ServerTime","clearTimeout","cr:2472","promiseDone","react","setTimeout","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=k||(k=d("react"));e=k;var o=e.useCallback,p=e.useEffect,q=e.useRef,r=e.useState;function s(a){var b=a.message;a=a.outgoing;b=d("MWPForwardedContent").useTitle(b,a);return h._("__JHASH__Q9FyIHvWIxM__JHASH__",[h._param("forward title",b)])}function t(a){var b=a.message,e=a.participant;a=a.sender;var f=d("MWPActor.react").useActor();f=(l||(l=d("I64"))).equal(a.id,f);var g=b.replySourceTypeV2!=null&&(l||(l=d("I64"))).equal(b.replySourceTypeV2,(m||(m=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD));e=(e=(e=e==null?void 0:e.nickname)!=null?e:a.firstName)!=null?e:a.name;if(g)return n.jsx(s,{message:b,outgoing:f});a=b.replySnippet;if(a!=null)return h._("__JHASH__LPdQYmdaw5d__JHASH__",[h._param("reply snippet",a)]);else if(f)return h._("__JHASH__1b0bN0cduWX__JHASH__");else return h._("__JHASH__3ymXOGN3z8-__JHASH__",[h._param("name of sender",e)])}function u(a){return(l||(l=d("I64"))).equal(a.attachmentType,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))}function v(a){a=a.message;a=a;var b=(j||(j=c("useReStore")))(),e=a.messageId,g=a.threadKey;a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.tables.attachments).getKeyRange(g,e)},[b,e,g],f.id+":128");if(a.length===0)return null;if(a.length>1)return a.every(u)?h._("__JHASH__mLcLGv6kQjM__JHASH__",[h._param("count of images, greater than or equal to 2",String(a.length))]):null;a=a[0];var i=a.accessibilitySummaryText,k=a.attachmentType,o=a.filename;a=a.titleText;if((l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return n.jsxs(n.Fragment,{children:[h._("__JHASH__CsGZwNmXaIO__JHASH__"),a!=null?h._("__JHASH__tk2ipgOtBcG__JHASH__",[h._param("title of image",a)]):null]});else if((l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__0rNBSLJGEDI__JHASH__");else if((l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)))return h._("__JHASH__456qLg2FzOf__JHASH__");else if((l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return n.jsxs(n.Fragment,{children:[h._("__JHASH__0TMOPValyqo__JHASH__"),i!=null&&i!==""?h._("__JHASH__z9hWNeIESIs__JHASH__",[h._param("title of sticker",i)]):null]});else if((l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)))return h._("__JHASH__sBZdmUKngae__JHASH__");else if((l||(l=d("I64"))).equal(k,(m||(m=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)))return n.jsxs(n.Fragment,{children:[h._("__JHASH__3lrC4KV5Ban__JHASH__"),o!=null?h._("__JHASH__120leC-bvKi__JHASH__",[h._param("name of file",o)]):null]});else return h._("__JHASH__PpAv-1cm1Lu__JHASH__")}v.displayName=v.name+" [from "+f.id+"]";function w(a){var e=a.message,f=a.participant,g=a.sender;a=a.threadType;var h=r(!1),i=h[0],j=h[1];p(function(){var a=c("setTimeout")(function(){return j(!0)},100);return function(){c("clearTimeout")(a)}},[]);if(!i)return null;h=d("LSMessagingThreadTypeUtil").isSecure(a);i=e.text!=null&&b("cr:2472")!=null?b("cr:2472").unvault(e.text):e.text;return n.jsxs(c("CometAccessibilityAnnouncementForDynamicContent.react"),{children:[n.jsx(t,{message:e,participant:f,sender:g}),i!=null?i:null,c("MWPMessageHasAttachment")(e)&&!h?n.jsx(v,{message:e}):null]})}w.displayName=w.name+" [from "+f.id+"]";function x(a,e){var f=(j||(j=c("useReStore")))(),g=d("MWPActor.react").useActor(),h=q(d("ServerTime").getMillis()),k=e.threadKey;d("Int64Hooks").useEffectInt64(function(){return d("ReQL").fromTableAscending(f.table("messages")).getKeyRange(k).subscribe(function(e,g){if(g.operation!=="add")return;var j=g.value;(l||(l=d("I64"))).to_float(j.timestampMs)>h.current&&(h.current=(l||(l=d("I64"))).to_float(j.timestampMs),c("promiseDone")((i||(i=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.table("contacts")).getKeyRange(j.senderId)),d("ReQL").firstAsync(d("ReQL").fromTableAscending(f.table("participants")).getKeyRange(j.threadKey,j.senderId))]),function(b){var c=b[0];b=b[1];if(c!=null)return a(j,c,b)}))})},[f,g,a,k])}function a(a){a=a.thread;var b=a.threadType,e=r(null),f=e[0],g=e[1];e=o(function(a,e,f){if((l||(l=d("I64"))).equal(a.authorityLevel,(m||(m=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return g(function(){return n.jsx(w,{message:a,participant:f,sender:e,threadType:b})})},[b]);x(e,a);return f}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LsBotComposerQuickReplyDisplayedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743836");b=d("FalcoLoggerInternal").create("ls_bot_composer_quick_reply_displayed",a);e=b;g["default"]=e}),98);
__d("MWV2ThreadNullstatePill.react",["MWXPressable.react","react","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={dark_mode_legible_text_pill:{alignItems:"x6s0dn4",backgroundColor:"xmd5bsh",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",boxShadow:"x1vnslfi",boxSizing:"x9f619",color:"xi81zsa",display:"x3nfvp2",fontSize:"x6prxxf",fontWeight:"xo1l8bm",justifyContent:"xl56j7k",marginTop:"xr9ek0c",marginEnd:"x1emribx",marginBottom:"xjpr12u",marginStart:"x1i64zmx",overflowWrap:"x1mzt3pk",paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,paddingEnd:"xn6708d",paddingTop:"x123j3cw",paddingBottom:"xs9asl8",wordBreak:"x13faqbe",$$css:!0},pill:{alignItems:"x6s0dn4",backgroundColor:"x1eb86dx",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",boxShadow:"x1vnslfi",boxSizing:"x9f619",color:"xxq4lyh",display:"x3nfvp2",fontSize:"x6prxxf",fontWeight:"xo1l8bm",justifyContent:"xl56j7k",marginTop:"xr9ek0c",marginEnd:"x1emribx",marginBottom:"xjpr12u",marginStart:"x1i64zmx",overflowWrap:"x1mzt3pk",paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,paddingEnd:"xn6708d",paddingTop:"x123j3cw",paddingBottom:"xs9asl8",wordBreak:"x13faqbe",$$css:!0}};function a(a){var b=a.children;a=a.onClick;var d=c("useCurrentDisplayMode")()==="dark";return i.jsx(c("MWXPressable.react"),{onPress:a,overlayDisabled:!0,xstyle:function(){return[d?j.dark_mode_legible_text_pill:j.pill]},children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LsBotComposerQuickReplyTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743837");b=d("FalcoLoggerInternal").create("ls_bot_composer_quick_reply_tapped",a);e=b;g["default"]=e}),98);
__d("LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("1743846");b=d("FalcoLoggerInternal").create("ls_business_welcome_page_get_started_button_tapped",a);e=b;g["default"]=e}),98);
__d("useMWV2SendIcebreakerMessage",["I64","Int64Hooks","LSFactory","LSIntEnum","LSMailboxType","LSNullstateCTAType","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","LsBotComposerQuickReplyTappedFalcoEvent","LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent","LsFalcoEventEntryPoint","MWMDotMeReferrerContext.react","MWPActor.react","MessagePowerUp","MessageSendClickFalcoEvent","gkx","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,b,e,f){var g=(j||(j=c("useReStore")))(),k=d("MWPActor.react").useActor(),l=d("MWMDotMeReferrerContext.react").useMDotMeReferrer();return d("Int64Hooks").useCallbackInt64(function(j,m){var n=d("LSThreadAttributionTypeUtil").getSource(a,e),o=j!=null?(h||(h=d("I64"))).equal(j.ctaType,(i||(i=d("LSIntEnum"))).ofNumber(c("LSNullstateCTAType").GET_STARTED))&&j.ctaId===m.ctaId:!1;j=c("gkx")("6771")&&j!=null&&(h||(h=d("I64"))).equal(j.ctaType,(i||(i=d("LSIntEnum"))).ofNumber(c("LSNullstateCTAType").ICEBREAKER))&&j.ctaId===m.ctaId;var p=o||j?l:void 0;c("promiseDone")(g.runInTransaction(function(e){return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(e),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,initiating_source:(e=f)!=null?e:void 0,mark_read:!0,platform_ref:p,platform_token:m.platformToken,power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),source:n}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:k,text:m.title,threadKey:a,threadType:b})},"readwrite"));var q=(h||(h=d("I64"))).to_string(a);if(o)c("LsBusinessWelcomePageGetStartedButtonTappedFalcoEvent").log(function(){return{page:{id:q}}});else{var r=(j=m.ctaIdentifier)!=null?j:"";c("LsBotComposerQuickReplyTappedFalcoEvent").log(function(){return{display:void 0,page:{id:q},quick_reply:{id:r,type:64}}})}c("MessageSendClickFalcoEvent").log(function(){return{message_send_source:{entry_point:d("LsFalcoEventEntryPoint").icebreaker}}})},[a,e,l,g,k,b,f])}g["default"]=a}),98);
__d("MWPersistentIcebreakers",["I64","Int64Hooks","LsBotComposerQuickReplyDisplayedFalcoEvent","MWV2ThreadNullstatePill.react","ReQL","ReQLSuspense","ServerTime","react","useMWV2SendIcebreakerMessage","useReStore","useStable","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i.useState;function m(a){var b=a.initiatingSource,e=a.lsSource;e=e===void 0?"unknown":e;var f=a.nullstateCtas,g=a.threadKey;a=a.threadType;var h=c("useMWV2SendIcebreakerMessage")(g,a,e,b),i=f.map(function(a){return a.ctaIdentifier});a=l(!1);var m=a[0],n=a[1];e=c("useVisibilityObserver")({onVisible:d("Int64Hooks").useCallbackInt64(function(){if(!m&&i.length>0){n(!0);var a=(j||(j=d("I64"))).to_string(g);c("LsBotComposerQuickReplyDisplayedFalcoEvent").log(function(){return{displayed_quick_reply:{item_ids:i,num_items:i.length,type:60},page:{id:a}}})}},[m,i,g])});return k.jsx("div",{className:"x1n2onr6 xh8yej3 x1eb86dx",ref:e,children:k.jsx("ul",{className:"xuk3077 x1eb86dx x78zum5 xdt5ytf xm7lytj",children:f.map(function(a){if(a.ctaType==="nullstate_icebreaker")return k.jsx("li",{className:"xamitd3 xsag5q8 xn6708d x1ye3gou x2b8uid",children:k.jsx(c("MWV2ThreadNullstatePill.react"),{onClick:function(){return h(void 0,a)},children:a.title})},(j||(j=d("I64"))).to_string(a.ctaId));else return null})})})}m.displayName=m.name+" [from "+f.id+"]";function a(a){var b=c("useStable")(function(){return d("ServerTime").getMillis()}),e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.threads,["lastActivityTimestampMs"]).getKeyRange(a.threadKey)},[e,a.threadKey],f.id+":129");if(g==null)return null;return a.nullstateCtas.length===0||b-(j||(j=d("I64"))).to_int32(g.lastActivityTimestampMs)<216e5?null:k.jsx(m,babelHelpers["extends"]({},a))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWQuickPromotionThreadViewBanner.react",["CometQuickPromotionLoggerContext.react","CometRelay","MWQuickPromotionThreadViewBanner_eligiblePromotions.graphql","react","useQuickPromotionFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){a=a.eligiblePromotions;a=d("CometRelay").useFragment(h!==void 0?h:h=b("MWQuickPromotionThreadViewBanner_eligiblePromotions.graphql"),a);a=a==null?void 0:(a=a.nodes[0])==null?void 0:(a=a.comet_qp_sections)==null?void 0:a.renderer_strategy;var e=c("useQuickPromotionFalcoEvent")({context_surface_id:8783,context_trigger:"messenger_thread_open"});return a==null?null:j.jsx(c("CometQuickPromotionLoggerContext.react").Provider,{value:e,children:j.jsx(d("CometRelay").MatchContainer,{match:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWQuickPromotionThreadViewBannerContainer.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","I64","MWLSThreadDisplayContext","MWQuickPromotionThreadViewBanner.react","MWQuickPromotionThreadViewBannerContainerQuery.graphql","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||d("react"),l="CHAT_TAB_OPEN",m="MESSENGER_THREAD_OPEN";function n(a){switch(a){case"ChatTab":return l;default:return m}}function o(a){var e=a.communityId,f=a.fbGroupId;a=a.threadId;var g=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();g=n(g);e=d("CometRelay").useLazyLoadQuery(h!==void 0?h:h=b("MWQuickPromotionThreadViewBannerContainerQuery.graphql"),{community_id:e!=null?(j||(j=d("I64"))).to_string(e):null,fb_group_id:f!=null&&!(j||(j=d("I64"))).is_zero(f)?(j||(j=d("I64"))).to_string(f):null,thread_id:(j||(j=d("I64"))).to_string(a),trigger:g});a=e==null?void 0:(f=e.viewer)==null?void 0:f.eligible_promotions;return a==null?null:k.jsx(c("MWQuickPromotionThreadViewBanner.react"),{eligiblePromotions:a})}o.displayName=o.name+" [from "+f.id+"]";function a(a){return k.jsx(c("CometErrorBoundary.react"),{fallback:c("emptyFunction"),children:k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(o,babelHelpers["extends"]({},a))})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUnsendNUX.react",["cr:2884","cr:4186","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.senderUnsendNUXEnabled;return i.jsxs(i.Fragment,{children:[b("cr:2884")==null?null:i.jsx(b("cr:2884"),{}),b("cr:4186")!=null&&a?i.jsx(b("cr:4186"),{}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUnsendNUXReceiverBanner.react",["fbt","ix","FDSSkittleIcon.react","JSResourceForInteraction","MDSRow.react","MDSRowItem.react","MWXText.react","TetraButton.react","fbicon","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l=c("JSResourceForInteraction")("MWChatUnsendNUXInterstitialDialog.react").__setRef("MWChatUnsendNUXReceiverBanner.react"),m={button:{flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",$$css:!0},card:{backgroundColor:"xcrg951",boxShadow:"x7m3og9",position:"x10l6tqk",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0},imageRow:{paddingTop:"x1nn3v0j",$$css:!0}};function a(a){var b,e=a.onDismiss,f=a.onView;a=h._("__JHASH__7PesNdiLm6N__JHASH__");var g=h._("__JHASH__jjSY-Fh1rGw__JHASH__"),j={},n=c("useMWXLazyDialog")(l),o=n[0],p=function(){return o(j,function(){})};return k.jsxs("div",{className:"xcrg951 x7m3og9 x10l6tqk xh8yej3 x1vjfegm",children:[k.jsxs(n=c("MDSRow.react"),{paddingHorizontal:12,paddingTop:12,children:[k.jsx(b=c("MDSRowItem.react"),{xstyle:m.imageRow,children:k.jsx(c("FDSSkittleIcon.react"),{color:"gray",icon:d("fbicon")._(i("685851"),16),size:36})}),k.jsxs(b,{expanding:!0,children:[k.jsx(n,{paddingHorizontal:0,paddingTop:0,children:k.jsx(b,{children:k.jsx(c("MWXText.react"),{color:"primary",type:"headline4",children:a})})}),k.jsx(n,{paddingHorizontal:0,paddingTop:8,children:k.jsx(b,{children:k.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:g})})})]})]}),k.jsxs(n,{paddingHorizontal:12,paddingTop:8,paddingVertical:12,wrap:"forward",children:[k.jsx(b,{xstyle:m.button,children:k.jsx(c("TetraButton.react"),{label:h._("__JHASH__W_KwwnBzw9K__JHASH__"),onPress:function(){p();return f()},type:"secondary"})}),k.jsx(b,{xstyle:m.button,children:k.jsx(c("TetraButton.react"),{label:h._("__JHASH__CqytfJoYvSJ__JHASH__"),onPress:e,type:"secondary"})})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("isMessageUnsentInLastTenSeconds",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return Date.now()-(h||(h=d("I64"))).to_float((a=a.unsentTimestampMs)!=null?a:(h||(h=d("I64"))).zero)<=1e4}g["default"]=a}),98);
__d("useMessengerUnsendNUX",["CometDismissFBNuxMutation","CometLogImpressionFBNuxMutation","CometRelay","RelayHooks","promiseDone","react","useMessengerUnsendNUXQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback,k=h!==void 0?h:h=b("useMessengerUnsendNUXQuery.graphql");function a(a){var b=d("RelayHooks").useRelayEnvironment(),e=j(function(e){c("promiseDone")(d("CometRelay").fetchQuery(b,k,{id:a}).toPromise(),function(a){a=(a=a==null?void 0:(a=a.nux)==null?void 0:a.should_show)!=null?a:!1;e(a)},null)},[b,a]),f=j(function(){d("CometDismissFBNuxMutation").commit(b,a)},[b,a]),g=j(function(){d("CometLogImpressionFBNuxMutation").commit(b,a)},[b,a]);return[e,f,g]}g["default"]=a}),98);
__d("MWChatUnsendNUXReceiver.react",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MWChatUnsendNUXReceiverBanner.react","MWLSThread","MWPActor.react","MWThreadKey.react","ReQL","isMessageUnsentInLastTenSeconds","react","useMessengerUnsendNUX","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;var l=b.useCallback,m=b.useRef,n=b.useState;function a(){var a=d("MWPActor.react").useActor(),b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),e=d("MWLSThread").useThread(b,function(a){return a.threadType});e=e!=null&&d("LSMessagingThreadTypeUtil").isDiscoverableChannel(e);var f=(h||(h=c("useReStore")))(),g=n(!1),j=g[0],o=g[1],p=m(!1),q=m(!1),r=m();g=c("useMessengerUnsendNUX")(8568);var s=g[0],t=g[1],u=g[2],v=l(function(){var a=r.current;if(a!=null){a();r.current=void 0;return}},[]);g=l(function(){q.current=!0;t();v();return o(!1)},[t,v]);var w=l(function(a){var b=!j&&!p.current;if(b&&c("isMessageUnsentInLastTenSeconds")(a)){p.current=!0;return s(function(a){p.current=!1;if(a)return o(!0);else{v();q.current=!0;return}})}},[j,s,v]);d("Int64Hooks").useEffectInt64(function(){if(q.current)return;r.current=d("ReQL").fromTableAscending(f.tables.messages).getKeyRange(b).filter(function(b){if(b.isUnsent)return!(i||(i=d("I64"))).equal(b.senderId,a);else return!1}).subscribe(function(a,b){b.operation!=="delete"&&w(b.value)});return function(){v();if(j&&!q.current)return u()}},[f,a,j,u,w,b,v]);if(j&&!e)return k.jsx(c("MWChatUnsendNUXReceiverBanner.react"),{onDismiss:g,onView:g});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUnsendNUXSender.react",["I64","JSResourceForInteraction","MWPActor.react","MWThreadKey.react","ReQL","isMessageUnsentInLastTenSeconds","react","useMWXLazyDialog","useMessengerUnsendNUX","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;j||(j=d("react"));b=j;var k=b.useCallback,l=b.useEffect,m=b.useRef;function a(){var a=d("MWPActor.react").useActor(),b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn(),e=(h||(h=c("useReStore")))(),f=m(!1),g=m(!1),j=m(!1),n=m(),o=c("useMessengerUnsendNUX")(8598),p=o[0],q=o[1],r=k(function(){var a=n.current;if(a!=null){a();n.current=void 0;return}},[]),s=k(function(){if(!j.current){j.current=!0;r();return q()}},[]);o=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatUnsendNUXSenderDialog.react").__setRef("MWChatUnsendNUXSender.react"));var t=o[0],u=k(function(a){var b=!f.current&&!g.current;if(b&&c("isMessageUnsentInLastTenSeconds")(a)){f.current=!0;return p(function(a){f.current=!1,a?(t({onView:s},function(){}),g.current=!0):(r(),j.current=!0)})}},[a,r]);l(function(){n.current=d("ReQL").fromTableAscending(e.table("messages")).getKeyRange(b).filter(function(b){return b.isUnsent&&(i||(i=d("I64"))).equal(b.senderId,a)}).subscribe(function(a,b){b.operation!=="delete"&&u(b.value)});return r},[b,u,r]);return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatXACSunsettingBanner.react",["fbt","ix","MWXButton.react","MWXImage.react","MWXRow.react","MWXRowItem.react","MWXText.react","goURIOnWindow","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l="https://www.facebook.com/help/messenger-app/619453488713104?ref=learn_more",m={button:{flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",$$css:!0},card:{backgroundColor:"xcrg951",boxShadow:"x7m3og9",position:"x10l6tqk",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0},imageRow:{paddingTop:"x1nn3v0j",$$css:!0}};function a(){var a,b,d=h._("__JHASH__TDoMKgQOS58__JHASH__"),e=h._("__JHASH__9PUf24O7tfB__JHASH__");return k.jsxs("div",{className:"xcrg951 x7m3og9 x10l6tqk xh8yej3 x1vjfegm",children:[k.jsxs(a=c("MWXRow.react"),{paddingHorizontal:12,paddingTop:12,children:[k.jsx(b=c("MWXRowItem.react"),{xstyle:m.imageRow,children:k.jsx(c("MWXImage.react"),{src:i("331359")})}),k.jsxs(b,{expanding:!0,children:[k.jsx(a,{paddingHorizontal:0,paddingTop:0,children:k.jsx(b,{children:k.jsx(c("MWXText.react"),{color:"primary",type:"headline4",children:d})})}),k.jsx(a,{paddingHorizontal:0,paddingTop:8,children:k.jsx(b,{children:k.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:e})})})]})]}),k.jsx(a,{paddingHorizontal:12,paddingTop:8,paddingVertical:12,wrap:"forward",children:k.jsx(b,{xstyle:m.button,children:k.jsx(c("MWXButton.react"),{label:h._("__JHASH__W_KwwnBzw9K__JHASH__"),onPress:function(){c("goURIOnWindow")(window.open("","_blank"),l)},type:"primary"})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMAWCanThreadBeCutover",["LSContactBitOffset","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("ReQLSuspense").useArray(function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(b.tables.participants,[]).getKeyRange(a),d("ReQL").fromTableAscending(b.tables.contacts,["capabilities","capabilities2"]))},[b,a],f.id+":26");return e.every(function(a){a[0];a=a[1];return a!=null&&d("LSContactBitOffset").has(75,a)===!0})}g["default"]=a}),98);
__d("useMAWCanThreadBeCutoverOnDemand",["LSContactBitOffset","LSMessagingThreadTypeUtil","MAWThreadCutover","ReQL","ReQLSuspense","useMAWCanThreadBeCutover","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.contacts,d("LSContactBitOffset").contactCapabilityFields).getKeyRange(a)},[e,a],f.id+":33");g=g!=null&&d("LSContactBitOffset").has(76,g);var i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.threads,["threadType"]).getKeyRange(a)},[e,a],f.id+":50");i=i?d("LSMessagingThreadTypeUtil").isOpenOneToOne(i.threadType):!1;b=((b=(b=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.messages_ranges_v2__generated,["minMessageId"]).getKeyRange(a)},[e,a],f.id+":62"))==null?void 0:b.minMessageId)!=null?b:"")==="";var j=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.mi_act_mapping_table.index("jid")).getKeyRange(a)},[e,a],f.id+":68");j=j!=null;var k=d("MAWThreadCutover").useIsCutoverOpenThread(a),l=d("MAWThreadCutover").useIsCutoverSecureThread(a);k=k||l;l=c("useMAWCanThreadBeCutover")(a);return g&&i&&!b&&!j&&!k&&l}g["default"]=a}),98);
__d("useMAWTriggerOnDemandCutover",["I64","Int64Hooks","LSFactory","LSPlatformWaitForTaskCompletion","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","QPLUserFlow","WALoggerDeferred","promiseDone","qpl","react","useMAWCanThreadBeCutoverOnDemand","useMWNavigation","useMWPThreadPointQueryOneToOneCutoverThreadThenNavigate","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[OD-Cutover] Cutover finished successfully for ThreadKey: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[OD-Cutover] Triggering cutover for ThreadKey: ",""]);m=function(){return a};return a}b=j||d("react");var n=b.useRef,o=b.useState;function a(a){var b=a.threadKey,e=a.triggerSource,f=(h||(h=c("useReStore")))(),g=c("useMAWCanThreadBeCutoverOnDemand")(b),j=n(null);a=o(!1);var p=a[0],q=a[1],r=c("useMWNavigation")(),s=c("useMWPThreadPointQueryOneToOneCutoverThreadThenNavigate")();d("Int64Hooks").useEffectInt64(function(){var a=j.current==null||j.current!==g;a&&g&&(j.current=g,q(!0),c("promiseDone")(d("WALoggerDeferred").LOG(m(),(i||(i=d("I64"))).to_string(b))),c("QPLUserFlow").start(c("qpl")._(1056847893,"505")),e==="inbox"?s&&s({contactId:b,isOnDemandCutover:!0,navigationApi:r}):c("LSPlatformWaitForTaskCompletion")(f,function(a){return c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(a),{waJid:b})},"readwrite").then(function(){c("promiseDone")(d("WALoggerDeferred").LOG(l(),(i||(i=d("I64"))).to_string(b))),c("QPLUserFlow").endSuccess(c("qpl")._(1056847893,"505"))})["catch"](function(a){a="[OD-Cutover] Cutover finished with an error for ThreadKey: "+(i||(i=d("I64"))).to_string(b)+".\nError: "+a;c("promiseDone")(d("WALoggerDeferred").LOG(k(),a));c("QPLUserFlow").endFailure(c("qpl")._(1056847893,"505"),a)})["finally"](function(){q(!1)}))},[g,f,r,b,s,e]);return p}g["default"]=a}),98);
__d("ChannelShareDialogLoggingContext",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["BROADCAST_CHANNEL_CREATION","THREAD_DETAILS_SHARE_ITEM","THREAD_DETAILS_QUICK_ACTION","CONTEXT_BANNER_QUICK_ACTION"]);c=a;f["default"]=c}),66);
__d("MWChannelInviteDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWChannelInviteDialog.react").__setRef("MWChannelInviteDialog.entrypoint")};g["default"]=a}),98);
__d("MWInChatTabContextProvider.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=e(!1);function a(){return j(k)}function b(a){a=a.children;return i.jsx(k.Provider,{value:!0,children:a})}b.displayName=b.name+" [from "+f.id+"]";g.useInChatTab=a;g.InChatTabContextProvider=b}),98);
__d("MAWInThreadBannerNuxReqCondWrapper.react",["CometErrorBoundary.react","cr:4958","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.threadKey;return b("cr:4958")&&i.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:i.jsx(b("cr:4958"),{threadKey:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatTabInThreadBanner.react",["CometErrorBoundary.react","CometPlaceholder.react","LSMessagingThreadTypeUtil","MWLSInThreadBannerComponent.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.thread;if(d("LSMessagingThreadTypeUtil").isSecure(a.threadType)||d("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType))return null;else return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:i.jsx(c("MWLSInThreadBannerComponent.react"),{threadKey:a.threadKey})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSPageType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,AI:1});f["default"]=a}),66);
__d("MWContextBannerChannelActivationPrompt.react",["fbt","ix","BroadcastChannelQPL","MWXImage.react","MWXTextPairing.react","react","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useCallback;function a(){var a=l(function(){var a;(a=d("BroadcastChannelQPL")).logCreateChannelNavigationToThreadEnd();a.logCCTVJoinNavigationToThreadEnd();a.logCreateChannelToThreadViewQPLSuccess();a.logCCTVJoinSuccess()},[]);a=c("useSinglePartialViewImpression")({onImpressionStart:a});return k.jsxs("div",{className:"x6s0dn4 x78zum5 xdt5ytf xl56j7k x1pdq3kb xkrivgy x4ii5y1 x1gryazu x1lr1uin x2b8uid",ref:a,children:[k.jsx(c("MWXImage.react"),{src:i("196163"),xstyle:m.image}),k.jsx(c("MWXTextPairing.react"),{body:h._("__JHASH__0beiJBlEXW1__JHASH__"),headline:h._("__JHASH__c0b5-Kz1eAl__JHASH__"),level:4,testid:void 0,textAlign:"center"})]})}a.displayName=a.name+" [from "+f.id+"]";var m={banner:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",marginTop:"x1pdq3kb",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",maxWidth:"x1lr1uin",textAlign:"x2b8uid",$$css:!0},image:{marginBottom:"x1hq5gj4",$$css:!0}};g["default"]=a}),98);
__d("MWContextBannerEndToEndEncryptedBanner.react",["fbt","ix","CometColumn.react","CometColumnItem.react","CometIcon.react","CometRow.react","CometRowItem.react","FDSTextWithIcon.react","MWXLink.react","MWXText.react","XMessengerHelpCenterContentControllerRouteBuilder","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||d("react"),l={banner:{backgroundColor:"xlhe6ec",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingStart:"x1swvt13",paddingLeft:null,paddingRight:null,paddingEnd:"x1pi30zi",paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0}};function a(){var a;a=(a=c("XMessengerHelpCenterContentControllerRouteBuilder").buildUri({cms_id:"786613221989782"}))==null?void 0:a.toString();return k.jsx(c("CometRow.react"),{align:"center",paddingHorizontal:0,paddingTop:12,children:k.jsx(c("CometRowItem.react"),{children:k.jsxs(c("CometColumn.react"),{spacing:8,verticalAlign:"center",xstyle:l.banner,children:[k.jsx(c("CometColumnItem.react"),{expanding:!0,children:k.jsx(c("MWXText.react"),{align:"center",type:"bodyLink4",children:k.jsx(c("FDSTextWithIcon.react"),{iconBefore:k.jsx(c("CometIcon.react"),{icon:d("fbicon")._(i("1596805"),10),size:10}),children:h._("__JHASH__Kow3rs5K3HC__JHASH__")})})}),k.jsx(c("CometColumnItem.react"),{children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:h._("__JHASH__yxX1nJvmnv5__JHASH__",[h._implicitParam("=m1",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:h._("__JHASH__bPYVQTNBjFa__JHASH__",[h._implicitParam("=m1",k.jsx(c("MWXLink.react"),{href:a,target:"_blank",children:h._("__JHASH__vo_wtcDrjQ6__JHASH__")}))])}))])})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSNullstateDescriptionType",[],(function(a,b,c,d,e,f){a=Object.freeze({DEFAULT:0,SUBTEXT:1,TITLE_SMALL_DEFAULT:2,TITLE_SMALL_SUBTEXT:3});f["default"]=a}),66);
__d("MWContextBannerNullstateDescription.react",["I64","LSIntEnum","LSNullstateDescriptionType","MWXText.react","RecoverableViolation.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=a.kind;a=a.text;if((i||(i=d("I64"))).equal(b,(i||(i=d("I64"))).zero)||(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSNullstateDescriptionType").SUBTEXT))||(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSNullstateDescriptionType").TITLE_SMALL_DEFAULT))||(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSNullstateDescriptionType").TITLE_SMALL_SUBTEXT)))return k.jsx("div",{className:"xsag5q8",children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:a})});else return k.jsx(c("RecoverableViolation.react"),{errorMessage:"Unhandled nullstate description",projectName:"messenger_comet"})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPWebWorkerDisconnectedBanner.react",["ix","CometContextualMessage.react","CometImageFromIXValue.react","MAWIssueNewUserVisibleErrors","MWXButtonGroup.react","fbs","promiseDone","react","useMAWGetUserVisibleErrors"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useState;function a(){var a=c("useMAWGetUserVisibleErrors")(),b=a[0],e=a[1];a=l(!1);var f=a[0],g=a[1];a=k(function(){c("promiseDone")(e(),function(){window.location.reload(!0)})},[e]);var i=k(function(){c("promiseDone")(e(),function(){g(!0)})},[g,e]),m=d("MAWIssueNewUserVisibleErrors").errorMsgBodyToFbtMap.get(b==null?void 0:b.errorBodyText),n=d("MAWIssueNewUserVisibleErrors").errorMsgTitleToFbtMap.get(b==null?void 0:b.errorTitleText);return b&&m!=null&&n!=null&&c("CometContextualMessage.react")&&!f?j.jsx("div",{className:"xjf5wm9 xdj266r x11i5rnm xat24cr x1mh8g0r x10l6tqk x17qophe x13vifvy xh8yej3",children:j.jsx(c("CometContextualMessage.react"),{addOnPrimary:j.jsx(c("MWXButtonGroup.react"),{align:"justify",paddingHorizontal:12,primary:{label:c("fbs")._("__JHASH__PnVpnKg9Gg___JHASH__"),onPress:a,testid:"mw-encrypted-backups-in-thread-web-worker-failure-reset"}}),body:m,headline:j.jsx(j.Fragment,{children:n}),headlineAriaLabel:n,icon:j.jsx(c("CometImageFromIXValue.react"),{alt:n,source:h("1351648")}),level:4,onClose:i})}):void 0}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWCurrentVisibleMessage",["FBLogger","I64","Int64Hooks","LSFactory","LSMessagePointQueryStoredProcedure","MWMessageElementRefList","MWPVisibleMessageContext.react","ReQL","ReQLSuspense","promiseDone","react","setTimeout","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=j||d("react");var k=b.useCallback,l=b.useEffect,m=b.useRef,n=b.useState;function a(a,b){var e=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),g=e.visibleMessage,j=m(c("MWMessageElementRefList")()),o=a==null?void 0:a.threadKey,p=a==null?void 0:a.threadType,q=m(),r=(h||(h=c("useReStore")))(),s=d("ReQLSuspense").useFirst(function(){if(o==null)return d("ReQL").empty();if(g==null)return d("ReQL").fromTableDescending(r.tables.messages_ranges_v2__generated).getKeyRange(o);var a=g.timestamp;return d("ReQL").fromTableDescending(r.tables.messages_ranges_v2__generated).getKeyRange(o).bounds({lte:[a]}).filter(function(b){var c=b.maxTimestampMs;b=b.minTimestampMs;return(i||(i=d("I64"))).ge(a,b)&&(i||(i=d("I64"))).le(a,c)})},[o,g,r],f.id+":58");e=n(function(){return s});var t=e[0],u=e[1];l(function(){q.current=void 0,g==null&&b.current!=null&&b.current.scrollToBottom()},[b,g]);var v=k(function(a){var d=b.current;if(d!=null){c("setTimeout")(function(){return d.scrollElementIntoViewIfNeeded(a)},0);return}},[b]),w=k(function(a){if(a!==q.current)return j.current.get(a,function(b){v(b),q.current=a})},[v]);l(function(){s!=null?u(s):g==null&&u(function(){})},[g,s,u]);l(function(){g!=null&&t!=null&&w(g.messageId)},[r,g,t,w]);d("Int64Hooks").useEffectInt64(function(){if(a!=null&&s==null&&g!=null){var b,e=g.messageId;b=(i||(i=d("I64"))).to_int32((b=p)!=null?b:(i||(i=d("I64"))).neg_one);b!==-1&&(b===15||b===16)&&c("FBLogger")("occam").mustfix("useMWCurrentVisibleMessage: incorrect call to MPQ with secure mailbox");c("promiseDone")(r.runInTransaction(function(b){return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(b),{messageId:e,threadKey:a.threadKey,threadType:a.threadType})},"readwrite"))}},[r,g,s,o,p,a]);return{messageElementRefs:j,messageRange:t,visibleMessage:(e=g)!=null?e:void 0}}g["default"]=a}),98);
__d("MWThreadUtilHooks",["LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWLSThread","MWPActor.react","ReQL","ReQLSuspense","useMWCurrentVisibleMessage","useMWLSIsViewerThreadAdminUsingThreadKey","useMWV2ConversationScrollerRefs","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){var b=c("useMWV2ConversationScrollerRefs")();b=c("useMWCurrentVisibleMessage")(a,b.scrollerRef);b=b.messageRange;b=(b=b==null?void 0:b.isLoadingBefore)!=null?b:!1;var e=a.threadKey,g=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(g.tables.messages).getKeyRange(e).filter(function(a){return!a.isAdminMessage})},[g,e],f.id+":37");var i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableDescending(g.tables.attachments).getKeyRange(e)},[g,e],f.id+":46");a=a!=null||i!=null;return!(a||b)}function j(a){var b=i(a);return!b?!1:d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)}function a(a){var b=i(a);a=d("MWLSThread").useThread(a.threadKey,function(a){return a.threadSubtype});return!b?!1:d("MWCMThreadTypes.react").isIGBroadcastChannelThread(a)}function b(a){var b=j(a);a=c("useMWLSIsViewerThreadAdminUsingThreadKey")(a.threadKey);return d("MWPActor.react").isAPPlus()&&b&&a}g.useMWIsThreadWithZeroMessage=i;g.useMWIsFBBroadcastChannelWithZeroMessage=j;g.useMWIsIGBroadcastChannelWithZeroMessage=a;g.useMWIsAdminAndFBBroadcastChannelWithZeroMessage=b}),98);
__d("usePageType",["I64","ReQL","ReQLSuspense","gkx","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=(i||(i=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){var c;return d("ReQL").fromTableAscending(b.tables.contacts,["pageType"]).getKeyRange((c=a)!=null?c:(h||(h=d("I64"))).zero)},[b,a],f.id+":24");return!c("gkx")("23425")?void 0:(e==null?void 0:e.pageType)!=null?e.pageType:void 0}g["default"]=a}),98);
__d("MWContextBanner.react",["fbt","BaseView.react","CometPlaceholder.react","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","LSPageType","LSThreadBitOffset","LSThreadTitle.react","LSVerificationBadge.react","MAWThreadCutover","MWCMThreadTypes.react","MWContextBannerChannelActivationPrompt.react","MWContextBannerEndToEndEncryptedBanner.react","MWContextBannerNullstateDescription.react","MWEditMessageOverlay.react","MWPWebWorkerDisconnectedBanner.react","MWThreadPicture.react","MWThreadUtilHooks","MWXText.react","ReQL","ReQLSuspense","cr:1607","cr:5777","cr:7232","gkx","isFeatureLimitEnabled","react","stylex","useIsAdmodOnboardingEnabledForThread.react","useIsReadOnlyFeatureLimitedWithThreadType","useMWPEditMessageDeemphasizer","usePageType","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=k||d("react"),o={align:{verticalAlign:"xxymvpz",$$css:!0},container:{paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,paddingEnd:"xn6708d",paddingTop:"x1cnzs8",$$css:!0},image:{display:"x78zum5",justifyContent:"xl56j7k",marginBottom:"xod5an3",$$css:!0},title:{marginBottom:"xod5an3",$$css:!0}};function p(a){var e=a.isBusinessSupport,f=a.isReadOnlyFeatureLimited;a=a.thread;var g=d("useIsAdmodOnboardingEnabledForThread.react").useIsAdmodOnboardingEnabledForThread(a.threadKey),h=d("MWThreadUtilHooks").useMWIsAdminAndFBBroadcastChannelWithZeroMessage(a);if(f||e)return null;if(g&&b("cr:7232")!=null)return n.jsx(b("cr:7232"),{thread:a});if(d("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&(l||(l=d("I64"))).gt(a.authorityLevel,(m||(m=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").SERVER_PARTIAL))&&b("cr:5777")!=null)if(h&&c("gkx")("24139"))return n.jsx(c("MWContextBannerChannelActivationPrompt.react"),{});else return n.jsx(b("cr:5777"),{thread:a});return null}p.displayName=p.name+" [from "+f.id+"]";function a(a){var e=a.threadKey;a=a.threadType;var g=c("useIsReadOnlyFeatureLimitedWithThreadType")(a),k=d("MAWThreadCutover").useIsCutoverSecureThread(e),q=d("LSMessagingThreadTypeUtil").isDiscoverableChannel(a);a=d("MWCMThreadTypes.react").isJoinedCMThread(a);var r=c("useMWPEditMessageDeemphasizer")(),s=(i||(i=c("useReStore")))(),t=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(s.tables.threads,["authorityLevel","isCustomThreadPicture","needsAdminApprovalForNewParticipant","nullstateDescriptionText1","nullstateDescriptionText2","nullstateDescriptionText3","nullstateDescriptionType1","nullstateDescriptionType2","nullstateDescriptionType3","parentThreadKey","threadDescription","threadInviteLink","threadInvitesEnabledV2","threadKey","threadName","threadPictureUrl","threadPictureUrlExpirationTimestampMs","threadPictureUrlFallback","threadType","capabilities","capabilities2","capabilities3","capabilities4"]).getKeyRange(e)},[s,e],f.id+":132"),u=c("usePageType")(t==null?void 0:t.threadKey);if(t==null)return null;var v=d("LSThreadBitOffset").has(47,t);if(v)return null;v=t.nullstateDescriptionText1;var w=t.nullstateDescriptionText2,x=t.nullstateDescriptionText3,y=t.nullstateDescriptionType1,z=t.nullstateDescriptionType2,A=t.nullstateDescriptionType3,B=(l||(l=d("I64"))).equal(t.parentThreadKey,(m||(m=d("LSIntEnum"))).ofNumber(-18)),C=d("LSMessagingThreadTypeUtil").isSecure(t.threadType);g=g&&(!C||c("isFeatureLimitEnabled")());var D=n.jsx("span",{className:"xxymvpz",children:n.jsx(c("CometPlaceholder.react"),{fallback:null,children:n.jsx(c("LSVerificationBadge.react"),{size:"large",threadKey:t.threadKey})})}),E=n.jsx(c("LSThreadTitle.react"),{thread:t,wrapOutput:function(a,b){return b}});return n.jsxs(c("BaseView.react"),{children:[n.jsxs("div",{className:(j||(j=c("stylex")))(o.container,r),"data-testid":void 0,children:[n.jsx("div",{className:"x78zum5 xl56j7k xod5an3",children:n.jsx(c("MWThreadPicture.react"),{badgeSize:14,photoSize:60,threadKey:t.threadKey})}),n.jsx("div",{className:"xod5an3",children:n.jsxs(c("MWXText.react"),{align:"center",numberOfLines:1,type:"headlineEmphasized3",children:[E,!q&&!a&&!c("gkx")("24081")&&D]})}),u!=null&&(l||(l=d("I64"))).equal(u,(m||(m=d("LSIntEnum"))).ofNumber(c("LSPageType").AI))?n.jsx("div",{className:"xod5an3",children:n.jsx(c("MWXText.react"),{align:"center",color:"primary",type:"body4",children:h._("__JHASH__5MDaoXA0f1Z__JHASH__")})}):null,v!=null&&y!=null?n.jsx(c("MWContextBannerNullstateDescription.react"),{kind:y,text:v}):null,w!=null&&z!=null?n.jsx(c("MWContextBannerNullstateDescription.react"),{kind:z,text:w}):null,x!=null&&A!=null?n.jsx(c("MWContextBannerNullstateDescription.react"),{kind:A,text:x}):null,b("cr:1607")!=null&&n.jsx(b("cr:1607"),{threadKey:e}),n.jsx(p,{isBusinessSupport:B,isReadOnlyFeatureLimited:g,thread:t}),C&&!k?n.jsx(c("MWContextBannerEndToEndEncryptedBanner.react"),{}):null,C&&c("MWPWebWorkerDisconnectedBanner.react")?n.jsx(c("MWPWebWorkerDisconnectedBanner.react"),{}):null]}),n.jsx(c("MWEditMessageOverlay.react"),{})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWThreadNullstateGreetingAndInstruction.react",["fbt","MWPreloadedText","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useContext;function a(a){var b=a.nullstate;a=a.nullstateCtas;b=b.welcomeText;var d=k(c("MWPreloadedText")),e=h._("__JHASH__zLWQrS74qZX__JHASH__");a=b!==e.toString()&&a.length>0;return d.text!=null||!a&&b==null?null:j.jsxs("div",{className:"xurb0ha x1sxyh0",children:[b!=null&&j.jsx("div",{className:"x1hhzuzn",children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"headline4",children:b})}),a&&j.jsx("div",{className:"x1hhzuzn",children:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"headline4",children:e})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWThreadNullstatePrivacyText.react",["fbt","I64","JSResourceForInteraction","LSIntEnum","LSNullstateCTAType","MWPreloadedText","MWXLink.react","MWXText.react","P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent","gkx","react","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react")),m=i.useContext;function a(a){var b=a.nullstate,e=a.threadKey;a=a.threadTitle;var f=m(c("MWPreloadedText")),g=b.privacyText,i=b.privacyTextCtaTitle,n=b.privacyTextNonWelcomeScreen;a=h._("__JHASH__pMA_7iE0GY1__JHASH__",[h._param("name",a),h._param("= public info link",l.jsx(c("MWXLink.react"),{color:"primary",href:"https://www.facebook.com/help/messenger-app/719578818758231",role:"link",target:"_blank",children:l.jsx(c("MWXText.react"),{type:"body4",children:h._("__JHASH__WAqQCKR95Tr__JHASH__")})}))]);var o=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWPrivacyDisclosureDialog.react").__setRef("MWThreadNullstatePrivacyText.react")),p=o[0];o=l.jsx(c("MWXLink.react"),{color:"primary",onClick:function(){p({entryPoint:"NULL_STATE",threadKey:e},function(){}),c("P2bDifferentiationPrivacyDisclosureOpenClickWebFalcoEvent").log(function(){return{consumer_id:"0",entry_point:"NULL_STATE",page_id:(j||(j=d("I64"))).to_string(e)}})},role:"link",target:"_blank",children:i!=null?l.jsx(c("MWXText.react"),{color:"blueLink",type:"body4",children:i}):null});i=f.text!=null&&!!n;f=i||g!=null?l.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:i?n:g}):null;return l.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:c("gkx")("24144")&&(j||(j=d("I64"))).equal(b.privacyTextCtaType,(k||(k=d("LSIntEnum"))).ofNumber(c("LSNullstateCTAType").PRIVACY_DISCLOSURE))?l.jsxs(l.Fragment,{children:[f," ",o]}):a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ThreadNullstateCTAs.react",["I64","Int64Hooks","LSIntEnum","LSNullstateCTAType","LsBotComposerQuickReplyDisplayedFalcoEvent","MWV2ThreadNullstatePill.react","react","stylex","useMWV2SendIcebreakerMessage","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useState,n={cta_list:{alignItems:"xuk3077",display:"x78zum5",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",$$css:!0},cta_list_item:{alignSelf:"xamitd3",paddingBottom:"xsag5q8",paddingEnd:"xn6708d",paddingLeft:null,paddingRight:null,paddingStart:"x1ye3gou",textAlign:"x2b8uid",$$css:!0},cta_list_item_center:{alignSelf:"xamitd3",paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,paddingEnd:"xn6708d",$$css:!0}};function a(a){var b=a.initiatingSource,e=a.lsSource,f=a.nullstate,g=a.nullstateCtas,i=a.threadKey;a=a.threadType;var o=c("useMWV2SendIcebreakerMessage")(i,a,e,b),p=g.map(function(a){return a.ctaIdentifier}).filter(Boolean);a=m(!1);var q=a[0],r=a[1];e=c("useVisibilityObserver")({onVisible:d("Int64Hooks").useCallbackInt64(function(){if(!q&&p.length>0){r(!0);var a=(j||(j=d("I64"))).to_string(i);c("LsBotComposerQuickReplyDisplayedFalcoEvent").log(function(){return{displayed_quick_reply:{item_ids:p,num_items:String(p.length),type:60},page:{id:a}}})}},[q,p,i])});return l.jsx("ul",{className:"xuk3077 x78zum5 xdt5ytf xl56j7k xdj266r x11i5rnm xat24cr x1mh8g0r",ref:e,children:g.map(function(a){var b=(j||(j=d("I64"))).equal(f.ctaType,(k||(k=d("LSIntEnum"))).ofNumber(c("LSNullstateCTAType").GET_STARTED))&&f.ctaId!=null&&(j||(j=d("I64"))).equal(f.ctaId,a.ctaId);return l.jsx("li",{className:(h||(h=c("stylex")))(n.cta_list_item,b?n.cta_list_item_center:!1),children:l.jsx(c("MWV2ThreadNullstatePill.react"),{onClick:function(){return o(f,a)},children:a.title})},(j||(j=d("I64"))).to_string(a.ctaId))})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ThreadNullstate.react",["CometScrollableArea.react","Int64Hooks","LSThreadTitle.react","MWPreloadedText","MWThreadNullstateGreetingAndInstruction.react","MWThreadNullstatePrivacyText.react","MWV2ThreadNullstateCTAs.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={privacy_text:{paddingBottom:"xx6bls6",paddingStart:"xurb0ha",paddingLeft:null,paddingRight:null,paddingEnd:"x1sxyh0",$$css:!0},privacy_text_offset:{paddingBottom:"xg8j3zb",paddingTop:"x1iorvi4",$$css:!0}};a=i.memo(function(a){var b=a.initiatingSource,d=a.lsSource;d=d===void 0?"unknown":d;var e=a.nullstate,f=a.nullstateCtas,g=a.threadKey,h=a.threadName;a=a.threadType;var l=j(c("MWPreloadedText")),m=e.privacyText;l=i.jsxs("div",{children:[i.jsx(c("MWThreadNullstateGreetingAndInstruction.react"),{nullstate:e,nullstateCtas:f}),l.text!=null?null:i.jsx(c("MWV2ThreadNullstateCTAs.react"),{initiatingSource:b,lsSource:d,nullstate:e,nullstateCtas:f,threadKey:g,threadType:a}),m!=null?i.jsx("div",{className:"xx6bls6 xurb0ha x1sxyh0",children:i.jsx(c("MWThreadNullstatePrivacyText.react"),{nullstate:e,threadKey:g,threadTitle:i.jsx(c("LSThreadTitle.react"),{thread:{threadKey:g,threadName:h,threadType:a},wrapOutput:function(a,b){return b}})})}):null]});return i.jsx(c("CometScrollableArea.react"),{xstyle:k.privacy_text_offset,children:l})},d("Int64Hooks").mostlyShallowEqual);g["default"]=a}),98);
__d("MWOpenThreadDetail.react",["CometDebounce","CometErrorBoundary.react","CometPlaceholder.react","I64","Int64Hooks","LSFactory","LSFetchAdditionalThreadDataStoredProcedure","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMAutoJoinNotifNUX.react","MWCMThreadTypes.react","MWChatUnsendNUX.react","MWChatXACSunsettingBanner.react","MWContextBanner.react","MWLSThreadDisplayContext","MWMessageList","MWPActor.react","MWPMessageListColumn.react","MWPQuickReplies.react","MWPersistentIcebreakers","MWPreloadableQueries","MWQuickPromotionThreadViewBannerContainer.react","MWV2ThreadNullstate.react","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","cr:1598","cr:1600","cr:1690","cr:4723","cr:488","cr:5483","cr:7100","cr:7233","emptyFunction","gkx","logMessengerWebFalcoEvent","promiseDone","react","useCommunityFolder","useIsAdmodOnboardingEnabledForThread.react","useLSMessagingInitiatingSource","useMWReportThreadOpenOnMountAndFocusWithLogger","usePageletMetadata","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||d("react"),n=c("CometDebounce")(c("logMessengerWebFalcoEvent"));function o(a){var b=(k||(k=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("MWPreloadableQueries").threadNullStateQuery(b,a)},[b,a],f.id+":88"),g=d("ReQLSuspense").useArray(function(){return d("MWPreloadableQueries").threadNullStateCtaQuery(b,a)},[b,a],f.id+":95");return[e,g]}function p(a,e){var f=(k||(k=c("useReStore")))();d("Int64Hooks").useEffectInt64(function(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var c=(yield (h||(h=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableDescending(f.tables.threads).getKeyRange(a)),d("ReQL").firstAsync(d("ReQL").fromTableDescending(f.tables.messages).getKeyRange(a)),d("ReQL").toArrayAsync(d("ReQL").fromTableDescending(f.tables.reactions).getKeyRange(a).take(20))])),g=c[0],j=c[1];c=c[2];if(j==null||g==null)return;c=c.reduce(function(a,b){return(i||(i=d("I64"))).max(a,(a=b.reactionCreationTimestampMs)!=null?a:(i||(i=d("I64"))).zero)},(i||(i=d("I64"))).zero);j=i.max(j.timestampMs,c);c=i.compare(j,g.lastActivityTimestampMs)>-1;n({threadKey:g.threadKey,threadType:g.threadType},"thread_and_message_list_last_activity_mismatch",e,{hasMissingMessage:!c,threadLastActivityTimeMs:i.to_string(g.lastActivityTimestampMs),threadLastMessageTimeMs:i.to_string(j)})})())},[f,e,a])}function a(a){var e,g=a.entryPoint,h=a.messageListRef,l=a.thread,n=(k||(k=c("useReStore")))();a=o(l.threadKey);var q=a[0],r=a[1];a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(n.tables.cm_channel_list.index("threadIdCommunityId"),["channelPrivacy"]).getKeyRange(l.threadKey)},[n,l.threadKey],f.id+":186");e=(e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(n.tables.threads,["lastActivityTimestampMs"]).getKeyRange(l.threadKey).map(function(a){a=a.lastActivityTimestampMs;return!(i||(i=d("I64"))).equal(a,i.zero)})},[n,l.threadKey],f.id+":195"))!=null?e:!1;c("usePageletMetadata")("threadType",(i||(i=d("I64"))).to_string(l.threadType));var s=d("MWPActor.react").isAPPlus(),t=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(l.threadType),u=c("useLSMessagingInitiatingSource")(),v=b("cr:7100")!=null?m.jsx(b("cr:7100"),{thread:l}):null,w=d("MWCMThreadTypes.react").isJoinedCMThread(l.threadType),x=d("LSThreadBitOffset").has(167,l)&&w,y=d("LSThreadBitOffset").has(193,l);d("Int64Hooks").useEffectInt64(function(){x&&c("promiseDone")(n.runInTransaction(function(a){return c("LSFetchAdditionalThreadDataStoredProcedure")(c("LSFactory")(a),{threadKey:l.threadKey})},"readwrite"))},[n,l.threadKey,x]);var z=d("Int64Hooks").useCallbackInt64(function(){return m.jsxs(m.Fragment,{children:[m.jsx(c("MWPQuickReplies.react"),{threadKey:l.threadKey}),m.jsx(c("MWPersistentIcebreakers"),{initiatingSource:u,lsSource:"inboxInThread",nullstateCtas:r,threadKey:l.threadKey,threadType:l.threadType})]})},[l.threadKey,l.threadType,r,u]),A=d("Int64Hooks").useCallbackInt64(function(){return m.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnGrowJustified,{children:[m.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:20}),m.jsx(c("MWContextBanner.react"),{threadKey:l.threadKey,threadType:l.threadType}),m.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:10})]})},[l.threadKey,l.threadType]);p(l.threadKey,g);var B=c("useCommunityFolder")(l),C=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),D=d("useIsAdmodOnboardingEnabledForThread.react").useIsAdmodOnboardingEnabledForThread(l.threadKey);C=C!=null&&C==="ChatTab";a=(a==null?void 0:a.channelPrivacy)!=null&&(i||(i=d("I64"))).equal(a==null?void 0:a.channelPrivacy,(j||(j=d("LSIntEnum"))).ofNumber(2));var E=c("gkx")("23433"),F=c("gkx")("23434"),G=(i||(i=d("I64"))).gt(l.parentThreadKey,(i||(i=d("I64"))).zero)&&(i||(i=d("I64"))).gt(l.threadKey,(i||(i=d("I64"))).zero);C=b("cr:4723")!=null&&!C?m.jsx(b("cr:4723"),{thread:l}):null;var H=b("cr:1690")!=null?m.jsx(b("cr:1690"),{thread:l}):null;y=c("MWChatXACSunsettingBanner.react")!=null&&y?m.jsx(c("MWChatXACSunsettingBanner.react"),{}):null;var I=b("cr:5483")!=null&&w&&!a?m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsx(b("cr:5483"),{folderId:l.parentThreadKey})}):null;E=b("cr:1598")!=null&&w&&a&&E?m.jsx(b("cr:1598"),{groupId:l.parentThreadKey,threadId:l.threadKey}):null;w=b("cr:488")!=null&&w&&a&&F?m.jsx(b("cr:488"),{groupId:l.parentThreadKey,threadId:l.threadKey}):null;a=G?m.jsx(c("MWQuickPromotionThreadViewBannerContainer.react"),{communityId:B==null?void 0:B.folderId,fbGroupId:B==null?void 0:B.fbGroupId,threadId:l.threadKey}):null;F=b("cr:7233")!=null&&D?m.jsx(c("CometErrorBoundary.react"),{fallback:c("emptyFunction"),children:m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsx(b("cr:7233"),{threadKey:l.threadKey})})}):null;G=c("useMWReportThreadOpenOnMountAndFocusWithLogger")(l);return q!=null&&!e?m.jsxs(m.Fragment,{children:[G,a,F,v,m.jsx(c("MWCMAutoJoinNotifNUX.react"),{thread:l}),H,I,E,w,y,C,m.jsx(c("MWContextBanner.react"),{threadKey:l.threadKey,threadType:l.threadType}),m.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:null}),m.jsx(c("MWV2ThreadNullstate.react"),{initiatingSource:u,lsSource:"inboxInThread",nullstate:q,nullstateCtas:r,threadKey:l.threadKey,threadName:l.threadName,threadType:l.threadType})]}):m.jsxs(m.Fragment,{children:[G,a,F,v,m.jsx(c("MWCMAutoJoinNotifNUX.react"),{thread:l}),H,y,I,E,w,m.jsx(c("MWChatUnsendNUX.react"),{senderUnsendNUXEnabled:!0}),C,m.jsx(c("MWMessageList"),{entryPoint:g,ref:h,renderFooter:z,renderHeader:A,thread:l}),s&&t&&b("cr:1600")!=null?m.jsx(b("cr:1600"),{thread:l}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWOpenAndSecureThreadView.react",["I64","LSIntEnum","LSMessagingThreadTypeUtil","MWLSDatabaseLazySync","MWOpenThreadDetail.react","MWPAudioPlaybackThreadContext.react","MWPThreadGradientBackground.react","MessengerWebUXLogger","cr:6982","promiseDone","react","useGroupsCometChatsEngagementImpressionLogger","useIsChatPreviewsEnabled","useIsReactionsV2Enabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));a=k;e=a.memo;var m=a.useEffect;f=e(function(a){var e=a.entryPoint,f=a.messageListRef;a=a.thread;var g=(h||(h=c("useReStore")))(),k=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(a.threadKey),n=c("MessengerWebUXLogger").useImpressionLoggerRef({eventName:"thread_view_impression"}),o=c("useGroupsCometChatsEngagementImpressionLogger")({client_extras:e?{entry_point:e}:void 0,community_id:(i||(i=d("I64"))).to_string(a.parentThreadKey),event:"chat_preview_open",surface:"chat_preview",thread_id:i.to_string(a.threadKey)});m(function(){k&&c("promiseDone")(d("MWLSDatabaseLazySync").sync(g,(j||(j=d("LSIntEnum"))).ofNumber(118)))},[g,k]);var p=d("LSMessagingThreadTypeUtil").isSecure(a.threadType),q=d("useIsChatPreviewsEnabled").useIsChatPreviewsEnabled(a.threadKey);return l.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2",ref:q?o:n,children:l.jsx(d("MWPThreadGradientBackground.react").MWPThreadGradientBackground,{children:l.jsx(d("MWPAudioPlaybackThreadContext.react").MWPAudioPlaybackThreadContextProvider,{threadKey:a.threadKey,children:b("cr:6982")==null||!p?l.jsx(c("MWOpenThreadDetail.react"),{entryPoint:e,messageListRef:f,thread:a}):l.jsx(b("cr:6982"),{entryPoint:e,messageListRef:f,thread:a})})})})});g["default"]=f}),98);
__d("MWV2ChatTabThreadLinkHashContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=e(null);function a(a){var b=a.children;a=a.threadLinkHash;return i.jsx(k.Provider,{value:(a=a)!=null?a:null,children:b})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(k)}g.MWV2ChatTabThreadLinkHashContextProvider=a;g.useGetChatTabThreadLinkHash=b}),98);
__d("XPlatWebAudioPlaybackContextProvider.react",["cr:6234","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){a=a.children;return a}a.displayName=a.name+" [from "+f.id+"]";e=(c=b("cr:6234")==null?void 0:b("cr:6234").MWPAudioPlaybackContextProvider)!=null?c:a;d=e;g["default"]=d}),98);
__d("MWV2ChatTab.react",["CometErrorBoundary.react","CometPageletWithDiv.react","CometTransientDialogProvider.react","I64","Int64Hooks","InteractionTracingMetrics","JSResourceForInteraction","LSFactory","LSMessagingThreadTypeUtil","LSPlatformWaitForTaskCompletion","LSThreadBitOffset","LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure","MAWInThreadBannerNuxReqCondWrapper.react","MAWThreadCutover","MWChatConnectionStatusCard.react","MWChatInteraction","MWChatStateContext","MWChatTabInThreadBanner.react","MWInChatTabContextProvider.react","MWInboxThreadMessagesSpinner.react","MWJewelEntrypoint","MWOpenAndSecureThreadView.react","MWPNewMessageAnnouncementForScreenReaders.react","MWPThreadIsPage.react","MWPThreadThemeProvider.react","MWPVisibleMessageContext.react","MWThreadKey.react","MWV2ChatTabHeaderLoadingWithGlimmers.react","MWV2ChatTabLoadingWithGlimmers.react","MWV2ChatTabSSR","MWV2ChatTabThreadLinkHashContext.react","MWV2ComposerHasContentContext.react","MWV2EnsureThatChatTabExists","MWV2ErrorComposer.react","MWV2FileDropzone.react","MWV2TabContainer","MetaConfig","ReQL","ReQLSuspense","XPlatWebAudioPlaybackContextProvider.react","cr:1113","cr:4346","cr:5001","cr:6111","cr:7654","cr:8060","cr:8061","cr:8673","cr:8674","cr:8675","cr:8676","emptyFunction","gkx","lazyLoadComponent","promiseDone","react","stylex","useC4gEngagementImpressionLogging","useMAWTriggerOnDemandCutover","useMWChatStateUpdateThreadKeyDescriptorIfAuthoritative","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));e=k;var m=e.memo,n=e.useLayoutEffect,o=e.useRef,p=(e=b("cr:7654"))!=null?e:l.Fragment,q=(e=b("cr:8061"))!=null?e:function(a,b){return[!1,!0,null]},r=(e=b("cr:1113"))!=null?e:c("emptyFunction"),s=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWInboxPinnedMessagesBanner.react").__setRef("MWV2ChatTab.react"));function t(a){var b=a.children,e=a.threadKey,g=(h||(h=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.threads).getKeyRange(e)},[g,e],f.id+":122");if(a==null)return;return b(a)}t.displayName=t.name+" [from "+f.id+"]";function u(a){var e=a.otherContactIdForDefaultE2eeThread,f=a.shouldUseDefaultE2eeOneToOne,g=a.tab,h=a.thread;a=a.threadLinkHash;var i=h.themeFbid,j=h.threadKey,k=h.threadSubtype,m=h.threadType;r({groupThreadSubtype:k,threadKey:j,threadType:m});c("useC4gEngagementImpressionLogging")({threadKey:j,threadType:m});k=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(m);var q=d("LSThreadBitOffset").has(167,h),u=!d("LSThreadBitOffset").has(56,h),v=d("LSMessagingThreadTypeUtil").isSecure(m),w=o({getScrollAreaElement:c("emptyFunction"),jumpToMostRecentMessage:c("emptyFunction"),restoreScrollPosition:c("emptyFunction")}),x=d("MWChatStateContext").useChatState(function(a){return a.focusedTabId});n(function(){if(x!==g.tabId){var a;(a=w.current)==null?void 0:a.restoreScrollPosition()}},[x,g.tabId]);k=k&&d("LSThreadBitOffset").has(106,h)&&c("MetaConfig")._("105");v=l.jsxs(l.Fragment,{children:[g.tabId!==x?null:l.jsx(c("MWPNewMessageAnnouncementForScreenReaders.react"),{thread:h}),v?l.jsx(c("MAWInThreadBannerNuxReqCondWrapper.react"),{threadKey:j}):null,l.jsx(c("MWChatConnectionStatusCard.react"),{}),l.jsx(c("MWChatTabInThreadBanner.react"),{thread:h}),k&&l.jsx(s,{thread:h}),l.jsxs(d("MWV2FileDropzone.react").MWV2FileDropzone,{isMediaOnly:u,thread:h,children:[l.jsx(c("MWOpenAndSecureThreadView.react"),{entryPoint:"popup_chat_box",messageListRef:w,thread:h}),l.jsx(c("CometErrorBoundary.react"),{fallback:function(){return l.jsx(c("MWV2ErrorComposer.react"),{})},children:l.jsx(d("MWV2ChatTabThreadLinkHashContext.react").MWV2ChatTabThreadLinkHashContextProvider,{threadLinkHash:a,children:l.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWComposer",children:b("cr:8676")!=null?l.jsx(b("cr:8676"),{afterSendMessage:function(){var a;(a=w.current)==null?void 0:a.jumpToMostRecentMessage()},isPreviewThread:!1,threadKey:j,threadType:m}):b("cr:8675")!=null?l.jsx(b("cr:8675"),{afterSendMessage:function(){var a;(a=w.current)==null?void 0:a.jumpToMostRecentMessage()},isPreviewThread:!1,threadKey:j,threadType:m}):b("cr:8673")!=null&&l.jsx(t,{threadKey:j,children:function(a){return l.jsx(b("cr:8673").MWChatComposerGating,{afterSendMessage:function(){var a;(a=w.current)==null?void 0:a.jumpToMostRecentMessage()},isPreviewThread:!1,thread:a})}})})})})]})]});k=b("cr:6111")!=null&&q?l.jsx(b("cr:6111"),{tab:g,thread:h,children:v}):null;u=function(a){return f?l.jsx(l.Fragment,{children:a}):l.jsx(d("MWThreadKey.react").MWThreadKeyProvider,{id:j,children:a})};a=b("cr:5001")==null?void 0:b("cr:5001").MWAdmodOnboardingSuggestedActionsContextProvider;q=c("MWJewelEntrypoint").entrypoint==="ONBOARDING_SOFTBLOCK";k=k!=null?k:f&&b("cr:8060")!=null?l.jsx(b("cr:8060"),{otherContactIdForDefaultE2eeThread:e,tab:g}):l.jsxs(c("MWV2TabContainer"),{tab:g,threadKey:j,children:[l.jsxs(d("CometPageletWithDiv.react").Placeholder,{fallback:l.jsx(c("MWV2ChatTabHeaderLoadingWithGlimmers.react"),{tab:g}),name:"MWChatTabHeader",children:[b("cr:4346")!=null?l.jsx(b("cr:4346"),{tab:g,thread:h}):null,b("cr:8674")!=null?l.jsx(b("cr:8674"),{tab:g,threadKey:j,threadType:m}):null]}),l.jsx(d("MWV2ChatTabSSR").Placeholder,{fallback:l.jsx(c("MWInboxThreadMessagesSpinner.react"),{}),children:g.doNotBlockWithEBUpsell!==!0&&q?l.jsx(p,{children:v}):v})]});e=function(a){return c("gkx")("24125")?l.jsx(c("CometTransientDialogProvider.react"),{children:l.jsx(c("MWPThreadThemeProvider.react"),{themeFbid:i,children:a})}):l.jsx(c("MWPThreadThemeProvider.react"),{themeFbid:i,children:l.jsx(c("CometTransientDialogProvider.react"),{children:a})})};return l.jsx(d("MWPThreadIsPage.react").Provider,{threadKey:j,children:u(l.jsx(c("XPlatWebAudioPlaybackContextProvider.react"),{children:l.jsx(d("MWPVisibleMessageContext.react").MWPVisibleMessageContextProvider,{children:e(l.jsx(d("MWV2ComposerHasContentContext.react").MWV2ComposerHasContentContextProvider,{children:l.jsx(d("MWInChatTabContextProvider.react").InChatTabContextProvider,{children:a!=null?l.jsx(a,{children:k}):k})}))})}))})}u.displayName=u.name+" [from "+f.id+"]";function v(a,b){var e=d("MAWThreadCutover").useIsDualThreadCutoverOpenThread(a),g=(d("MAWThreadCutover").useIsCutoverOpenThread(a)||b!=null&&d("LSThreadBitOffset").has(128,b))&&!e&&c("gkx")("24126");b=d("MAWThreadCutover").useGetCutoverSecureThreadKey((j||(j=d("I64"))).to_string(a));var i=c("gkx")("24126")?b:null,k=(h||(h=c("useReStore")))();d("Int64Hooks").useEffectInt64(function(){if(!g)return;if(i==null)c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(k,function(b){return c("LSThreadPointQueryAndRestoreMessagesWithJIDStoredProcedure")(c("LSFactory")(b),{waJid:a})},"readwrite"));else{var b=d("MWChatInteraction").get((j||(j=d("I64"))).to_string(a));if(b!=null){var e;d("MWChatInteraction").set(i,b);(e=c("InteractionTracingMetrics")).addMetadata(b,"thread_id",i);e.addMetadata(b,"thread_type",15..toString());e.addMetadata(b,"is_secure",!0);e.addMetadata(b,"redirectedFromPreCutover",1)}}},[i,k,g,a]);b=d("ReQLSuspense").useFirst(function(){return i!=null?d("ReQL").fromTableAscending(k.tables.threads).getKeyRange((j||(j=d("I64"))).of_string(i)):d("ReQL").empty()},[k,i],f.id+":445");e=e?void 0:b;return e}var w={hidden:{display:"x1s85apg",$$css:!0}};function a(a){var b,e=a.isMinimized;e=e===void 0?!1:e;var g=a.tab;a=a.threadKeyDescriptor;var j=(h||(h=c("useReStore")))(),k=a.threadKey,m=a.clientThreadKey,n=a.threadLinkHash;d("MWV2EnsureThatChatTabExists").useMWV2EnsureThatChatTabExists(k,a.threadType,m);a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(j.tables.threads,["folderName","themeFbid","threadKey","threadType","parentThreadKey","threadSubtype","threadName","authorityLevel","cannotUnsendReason","threadStatus","cannotReplyReason","clientThreadKey"].concat(d("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(k)},[j,k],f.id+":483");var o=d("ReQLSuspense").useFirst(function(){return m!=null?d("ReQL").fromTableAscending(j.tables.threads.index("clientThreadKey")).getKeyRange(m):d("ReQL").empty()},[j,m],f.id+":501"),p=v(k,a);a=(p=(p=p)!=null?p:a)!=null?p:o;c("useMWChatStateUpdateThreadKeyDescriptorIfAuthoritative")(a,g,{shouldClearOldHiddenTab:!0,shouldUpdateThreadType:!0});o=q((p=a==null?void 0:a.threadKey)!=null?p:k,a==null?void 0:a.threadType);p=o[0];var r=o[1];o=o[2];b=(b=c("useMAWTriggerOnDemandCutover")({threadKey:(b=a==null?void 0:a.threadKey)!=null?b:k,triggerSource:"chatTab"}))!=null?b:!1;if(a!=null&&d("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)&&!r||b)return e?null:l.jsx(c("MWV2ChatTabLoadingWithGlimmers.react"),{tab:g});return a!=null?l.jsx(d("MWV2ChatTabSSR").Placeholder,{fallback:l.jsx(c("MWV2ChatTabLoadingWithGlimmers.react"),{tab:g}),children:l.jsx("div",{className:(i||(i=c("stylex")))(e?w.hidden:void 0),"data-testid":void 0,children:l.jsx(u,{otherContactIdForDefaultE2eeThread:o,shouldUseDefaultE2eeOneToOne:a!=null&&d("LSMessagingThreadTypeUtil").isOpenOneToOne(a.threadType)&&p,tab:g,thread:a,threadLinkHash:n})})}):null}a.displayName=a.name+" [from "+f.id+"]";e=m(a);g["default"]=e}),98);
__d("MW3PBotCommandsPill.react",["fbt","JSResourceForInteraction","MWXPressable.react","MWXText.react","ReQL","ReQLSuspense","react","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l=c("JSResourceForInteraction")("MW3PBotCommandsDialog.react").__setRef("MW3PBotCommandsPill.react"),m={commandsPill:{backgroundColor:"x1qhmfi1",borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",paddingStart:"x1sln4lm",paddingLeft:null,paddingRight:null,paddingEnd:"x1iji9kk",paddingTop:"x1yrsyyn",paddingBottom:"x10b6aqq",$$css:!0},commandsPillContainer:{display:"x78zum5",justifyContent:"xl56j7k",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0}};function a(a){var b=a.threadKey,e=(i||(i=c("useReStore")))(),g=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.tables.custom_thread_commands.index("rank")).getKeyRange(b).filter(function(a){return!a.isOpenPersistentMenu})},[e,b],f.id+":46");a=c("useMWXLazyDialog")(l);var j=a[0];return g.length===0?null:k.jsx("div",{className:"x78zum5 xl56j7k xyamay9 x1l90r2v",children:k.jsx(c("MWXPressable.react"),{onPress:function(){return j({commands:g})},overlayRadius:"inherit",xstyle:m.commandsPill,children:k.jsx(c("MWXText.react"),{align:"center",type:"headline4",children:h._("__JHASH__ey53XOJ4uK9__JHASH__",[h._plural(g.length,"number")])})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWContextBannerQuickActionsEditChatInfo.react",["MWXCircleButton.react","react","useMWCMEditChatInfoDialogEntrypoint"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.icon,d=a.label;a=a.threadKey;var e=c("useMWCMEditChatInfoDialogEntrypoint")(a);return i.jsx(c("MWXCircleButton.react"),{icon:b,label:d,onPress:function(){return e()},size:36})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCopyLinkPublicChatQuickAction.react",["fbt","MWPBumpEntityKey","MWVerticalRhythm","MWXCircleButton.react","MWXIconLink","MWXText.react","cometPushToast","react","useCopyText"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useCallback,l=h._("__JHASH__6ygymPD56Yw__JHASH__"),m=h._("__JHASH__NNt0oNKP6tq__JHASH__");function a(a){a=a.threadInviteLink;a=c("useCopyText")({value:a});a[0];a[1];var b=a[2];a=k(function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","copy_link"),b(),d("cometPushToast").cometPushSimpleToast(m)},[b]);return j.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconLink"),label:l,onPress:a,size:36}),j.jsx(c("MWVerticalRhythm"),{height:8}),j.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:l})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWShareThreadQuickActionButton.react",["fbt","MWXCircleButton.react","MWXColumnItem.react","MWXIconShare","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._("__JHASH__zzzD0_ypABg__JHASH__");function a(a){a=a.onPress;return j.jsxs(j.Fragment,{children:[j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconShare"),label:k,onPress:a,size:36})}),j.jsx(c("MWXColumnItem.react"),{paddingTop:8,children:j.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:k})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWSharePublicChatQuickAction.react",["ChannelShareDialogLoggingContext","MWChannelInviteDialog.entrypoint","MWShareThreadQuickActionButton.react","react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.thread;a=c("useMWXEntryPointDialog")(c("MWChannelInviteDialog.entrypoint"),{});var d=a[0];return i.jsx("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:i.jsx(c("MWShareThreadQuickActionButton.react"),{onPress:function(){d({channelThread:b,loggingContext:c("ChannelShareDialogLoggingContext").CONTEXT_BANNER_QUICK_ACTION})}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXIconPencil",["MWXSvgIcon","SVGIcon","cr:9238","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9238")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWContextBannerQuickActions.react",["fbt","CommunityMessagingEnableState","I64","LSCommunityBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWAddMemberToGroupCircleButton.react","MWCMBulkInviteDialog.entrypoint","MWCMIsAnyCMThread","MWCMShortLinkShare.react","MWCMThreadTypes.react","MWCMisStandAloneCommunity","MWContextBannerQuickActionsEditChatInfo.react","MWCopyLinkPublicChatQuickAction.react","MWEditChannelDialogTrigger.react","MWEditThreadNameDialogTrigger.react","MWGroupLimitContainer.react","MWInboxInfoMembersSectionStorageKey","MWInboxPersistedUIState","MWLSGroupMembershipDialog.entrypoint","MWPBumpEntityKey","MWSharePublicChatQuickAction.react","MWVerticalRhythm","MWXCircleButton.react","MWXIconFriendGenericAdd","MWXIconGroup","MWXIconLink","MWXIconPencil","MWXText.react","MessengerWebUXLogger","WebUXLoggingSurfaceContextProvider","canMWAddMemberToGroupThread","emptyFunction","isFeatureLimitEnabled","justknobx","promiseDone","react","useCommunityFolder","useCommunityMembers","useIsReadOnlyFeatureLimitedWithThreadType","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;var m=b.useMemo,n=b.useRef,o=h._("__JHASH__4Z6iwQf0KqP__JHASH__"),p=h._("__JHASH__a3y4zGfm_2Z__JHASH__");function q(a){var b=a.thread;a=n(null);var e=c("useCommunityFolder")(b),f=c("MWCMIsAnyCMThread")(b.threadType),g=c("MWCMisStandAloneCommunity")(e==null?void 0:e.communityType),i=d("MWCMThreadTypes.react").isBroadcastThread(b.threadType),q=d("LSMessagingThreadTypeUtil").isDiscoverableChannel(b.threadType),r=d("LSMessagingThreadTypeUtil").isSecure(b.threadType);r=c("useIsReadOnlyFeatureLimitedWithThreadType")(b.threadType)&&(!r||c("isFeatureLimitEnabled")());var s=d("useCommunityMembers").useClearMemberList(),t=m(function(){if(e!=null&&f)return[e.enableState,d("LSThreadBitOffset").has(120,b),d("LSCommunityBitOffset").has(17,e),e.fbGroupId];else return[void 0,!1,!1,(j||(j=d("I64"))).zero]},[f,e,b]),u=t[0],v=t[1];t=t[2];u=f&&(j||(j=d("I64"))).equal((u=u)!=null?u:(k||(k=d("LSIntEnum"))).ofNumber(c("CommunityMessagingEnableState").ENABLED),(k||(k=d("LSIntEnum"))).ofNumber(c("CommunityMessagingEnableState").DISABLE_REQUESTED));var w=d("MWInboxPersistedUIState").usePersistedUIState(!1,d("MWInboxInfoMembersSectionStorageKey").storageKey),x=w[0];w=c("useMWXEntryPointDialog")(c("MWCMBulkInviteDialog.entrypoint"),{});var y=w[0];w=c("useMWXEntryPointDialog")(c("MWLSGroupMembershipDialog.entrypoint"),{groupID:(j||(j=d("I64"))).to_string((w=e==null?void 0:e.fbGroupId)!=null?w:(j||(j=d("I64"))).zero)});var z=w[0];w=m(function(){return[f?h._("__JHASH__6ygymPD56Yw__JHASH__"):h._("__JHASH__5q5wieIjbh7__JHASH__"),f?h._("__JHASH__um66LGyp2bC__JHASH__"):h._("__JHASH___jI2RJo8mJV__JHASH__"),e!=null&&i?h._("__JHASH__1cAdDa3Rt1T__JHASH__"):h._("__JHASH__1Av2Yy1o2_Y__JHASH__")]},[i,f,e]);var A=w[0],B=w[1];w=w[2];var C=d("LSThreadBitOffset").has(60,b),D=d("LSThreadBitOffset").has(81,b);r=c("canMWAddMemberToGroupThread")(b,r);var E=d("LSThreadBitOffset").has(26,b),F=d("LSThreadBitOffset").has(108,b),G=C&&D,H=c("MessengerWebUXLogger").useInteractionLogger();return l.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"thread_context_banner",children:l.jsxs("ul",{className:"x6s0dn4 x78zum5 xl56j7k xsag5q8 x1y1aw1k",children:[f&&!u?v?l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconFriendGenericAdd"),label:o,onPress:function(){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","quick_actions_direct_invite");return y({fbThreadId:(j||(j=d("I64"))).to_string(b.threadKey),parentSurface:"thread_view",source:"invite_button",surface:"thread_view"},c("emptyFunction"))},size:36}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:o})]}):l.jsx(c("MWCMShortLinkShare.react"),{thread:b,children:function(a,b){return l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconLink"),label:A,onPress:b,size:36}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:A})]})}}):null,!f&&q&&F&&(j||(j=d("I64"))).equal(b.threadInvitesEnabledV2,(k||(k=d("LSIntEnum"))).ofNumber(1))?l.jsxs(l.Fragment,{children:[b.threadInviteLink!=null&&l.jsx(c("MWSharePublicChatQuickAction.react"),{thread:b}),b.threadInviteLink!=null&&l.jsx(c("MWCopyLinkPublicChatQuickAction.react"),{threadInviteLink:b.threadInviteLink})]}):null,!f&&r?l.jsx(c("MWGroupLimitContainer.react"),{groupLimitReachedContent:null,thread:b,children:l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWAddMemberToGroupCircleButton.react"),{label:A,threadKey:b.threadKey,threadType:b.threadType}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:A})]})}):null,q&&G?l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWEditChannelDialogTrigger.react"),{threadKey:b.threadKey,children:function(a,b){return l.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconPencil"),label:p,onPress:function(){return a()},ref:b,size:36})}}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:p})]}):null,!f&&C&&!G?l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWEditThreadNameDialogTrigger.react"),{threadKey:b.threadKey,children:function(a,d){return l.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconPencil"),label:B,onPress:function(){a(),H==null?void 0:H({eventName:"open_edit_thread_name_dialog",threadKey:b.threadKey,threadType:b.threadType})},ref:d,size:36})}}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:B})]}):null,f&&D&&!u&&t&&!g?l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWContextBannerQuickActionsEditChatInfo.react"),{icon:c("MWXIconPencil"),label:p,threadKey:b.threadKey}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:p})]}):c("justknobx")._("1116")?null:E?l.jsxs("li",{className:"x6s0dn4 x78zum5 xdt5ytf x187xtus",children:[l.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconGroup"),label:w,onPress:function(){return z({folder:e},function(){f&&!x&&c("promiseDone")(s())})},ref:a,size:36}),l.jsx(c("MWVerticalRhythm"),{height:8}),l.jsx(c("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:w})]}):null]})})}q.displayName=q.name+" [from "+f.id+"]";function a(a){return l.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"thread_context_banner",children:l.jsx(q,babelHelpers["extends"]({},a))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPublicChatMemberRequestsBanner.react",["fbt","ix","CometContextualMessage.react","CometErrorBoundary.react","CometPlaceholder.react","FBLogger","FDSSkittleIcon.react","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","LSVerifyContactRowExistsStoredProcedure","MWCMThreadTypes.react","MWInboxInfoPanelContext.react","Promise","ReQL","ReQLSuspense","TetraButtonGroup.react","cr:4923","fbicon","promiseDone","react","usePrevious","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=m||(m=d("react"));e=m;var o=e.useEffect,p=e.useState;function q(a){if(a.length===0){c("FBLogger")("messenger_comet").mustfix("No member requests?");return void 0}else if(a.length===1){var b;return h._("__JHASH__bWQyKZ80V0d__JHASH__",[h._param("name",((b=a[0][1])==null?void 0:b.name)||"")])}else{b=a.length-1;return h._("__JHASH__ZU2Oj6CpDJW__JHASH__",[h._plural(b,"number"),h._param("name",((b=a[0][1])==null?void 0:b.name)||"")])}}function r(a){var e=a.memberRequests,f=a.setWasClosed;a=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext();var g=a.isOnMemberRequestsPageRef,j=a.pushMemberRequestsPage,k=a.setShouldNavToMemberRequests,l=a.setThreadInfoVisible,m=a.threadInfoVisible;return n.jsx("div",{className:"xcrg951 x7m3og9 x1vjfegm",children:n.jsx(c("CometContextualMessage.react"),{addOnPrimary:n.jsx(c("TetraButtonGroup.react"),{primary:{label:h._("__JHASH__N4aWocdoeuZ__JHASH__",[h._plural(e.length)]),onPress:function(){g.current!==!0&&(m===!0?j():(k(!0),l(!0))),f(!0)},padding:"wide",type:"secondary"}}),body:q(e),headline:h._("__JHASH__wwx2l6C4JXf__JHASH__",[h._plural(e.length,"number")]),icon:n.jsx(c("FDSSkittleIcon.react"),{color:"gray",icon:b("cr:4923")!=null?b("cr:4923"):d("fbicon")._(i("497883"),16),size:36}),level:4,onClose:function(){f(!0)}})})}r.displayName=r.name+" [from "+f.id+"]";function s(a){var e=a.threadKey;a=p(!1);var g=a[0],h=a[1],i=(l||(l=c("useReStore")))(),m=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(i.tables.group_membership_approval_requests).getKeyRange(e).map(function(a){var b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(i.tables.contacts).getKeyRange(a.contactId),f.id+":175");return[a,b]})},[i,e],f.id+":170"),q=m.length,s=c("usePrevious")(q);a=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext();var t=a.isOnMemberRequestsPageRef;o(function(){t.current!==!0&&s!==null&&q>s&&h(!1)},[q,s,h,t]);o(function(){var a=m.map(function(a){return a[0].contactId});c("promiseDone")(i.runInTransaction(function(e){return(j||(j=b("Promise"))).all(a.map(function(a){return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(e),{authorityLevel:(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:k.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:k.ofNumber(c("LSContactIdType").FBID),contactType:k.ofNumber(c("LSContactType").USER),contactViewerRelationship:k.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:k.ofNumber(c("LSContactGender").UNKNOWN),id:a,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:k.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})}))},"readwrite"))},[i,m]);return!g&&m.length>0?n.jsx(r,{memberRequests:m,setWasClosed:h}):null}s.displayName=s.name+" [from "+f.id+"]";function t(a){a=a.thread;var b=d("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType),c=d("LSThreadBitOffset").has(66,a)&&!d("MWCMThreadTypes.react").isStandardCMThread(a.threadType);return c&&b?n.jsx(s,{threadKey:a.threadKey}):null}t.displayName=t.name+" [from "+f.id+"]";function a(a){a=a.thread;return n.jsx(c("CometErrorBoundary.react"),{children:n.jsx(c("CometPlaceholder.react"),{fallback:null,children:n.jsx(t,{thread:a})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPublicChatNUXDialog.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","LSMessagingThreadTypeUtil","MWPublicChatsNUXQuickPromotionContainer.entrypoint","react","useCometRelayEntrypointContextualEnvironmentProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){a=a.thread;var b=k(),e=b[0],f=b[1],g=c("useCometRelayEntrypointContextualEnvironmentProvider")(),h=d("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType);j(function(){e==null&&h&&f(function(){return d("CometRelay").loadEntryPoint(g,c("MWPublicChatsNUXQuickPromotionContainer.entrypoint"),{})});return function(){e==null?void 0:e.dispose()}},[e,g,h]);if(e!=null)return i.jsx(c("CometErrorBoundary.react"),{children:i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:e,props:{}})})});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureAudioAttachmentContent.react",["MWAudioPlayer.react","MWPMessageIsReply","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.dbAttachment,e=a.getPlayableUrl,f=a.message;a=a.outgoing;return i.jsx(d("MWAudioPlayer.react").MWAudioPlayer,{attachment:b,getPlayableUrl:e,isReply:c("MWPMessageIsReply")(f),outgoing:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureFileAttachmentContent.react",["MAWChatFile.react","MWXMessageBubble.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectBottom,d=a.connectTop,e=a.dbAttachment;a=a.outgoing;return i.jsx(c("MWXMessageBubble.react"),{align:a?"right":"left",color:"incoming",connectBottom:b,connectTop:d,style:{padding:0},children:i.jsx(c("MAWChatFile.react"),{file:e})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatImagePlaceholder.react",["CometObjectFitContainer.react","MDSGlimmer.react","MWPStableImage.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={glimmer:{display:"x1lliihq",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function a(a){var b=a.height;a=a.width;if(a==null)return null;if(b==null)return null;var e=a/b;return j.jsx(d("MWPStableImage.react").MWPStableImageContainer,{aspectRatio:e,className:(h||(h=c("stylex")))(!1),height:b,maxHeight:200,maxWidth:480,width:a,children:j.jsx(c("CometObjectFitContainer.react"),{contentAspectRatio:e,objectFitMode:"CONTAINER_WIDTH_BASED_ASPECT_RATIO",children:j.jsx(c("MDSGlimmer.react"),{index:1,xstyle:k.glimmer})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureImageAttachmentContent.react",["CometPlaceholder.react","MWV2ChatImage.react","MWV2ChatImagePlaceholder.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectTop,d=a.dbAttachment,e=a.getPlayableUrl,f=a.getPreviewUrl,g=a.mediaRenderQpl,h=a.message,j=a.outgoing,k=a.previewHeight;a=a.previewWidth;return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2ChatImagePlaceholder.react"),{height:k,width:a}),children:i.jsx(c("MWV2ChatImage.react"),{attachment:d,connectTop:b,getPlayableUrl:e,getPreviewUrl:f,mediaRenderQpl:g,message:h,navigateToRouteForMediaViewer:!1,outgoing:j})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureStickerAttachmentContent.react",["MWV2Sticker.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.dbAttachment;a=a.getPreviewUrl;return i.jsx(c("MWV2Sticker.react"),{attachment:b,getPreviewUrl:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecureVideoAttachmentContent.react",["CometPlaceholder.react","MWV2ChatImagePlaceholder.react","MWV2ChatVideo.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.connectTop,d=a.dbAttachment,e=a.getPreviewUrl,f=a.mediaRenderQpl,g=a.message,h=a.outgoing,j=a.previewHeight;a=a.previewWidth;return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(c("MWV2ChatImagePlaceholder.react"),{height:j,width:a}),children:i.jsx(c("MWV2ChatVideo.react"),{attachment:d,connectTop:b,getPreviewUrl:e,mediaRenderQpl:f,message:g,navigateToRouteForMediaViewer:!1,outgoing:h})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSInsertAnonymousTaskContext",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(311).add({taskId:a[0],projectName:a[1]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("LSAnonymizedMsgrE2EEXmaReceiverFetchDispatch",["LSInsertAnonymousTaskContext","LSIssueNewTaskUsingSyncChannel","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("pk",a[0]),d[0].set("content_ref",a[1]),d[1]=d[0].get("pk"),d[0],d[4]=["LSMailboxAnonymizedMsgrE2EEXmaReceiverFetchSyncAction",".",c.i64.to_string(d[1])].join(""),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskUsingSyncChannel"),d[4],c.i64.cast([0,765]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,2]),!1,c.i64.cast([0,0])).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskInsertion"),d[3])},function(a){return c.storedProcedure(b("LSInsertAnonymousTaskContext"),d[3],"LS_MsgrXmaReceiverFetch")}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSAnonymizedMsgrE2EEXmaReceiverFetchDispatchStoredProcedure",["LSAnonymizedMsgrE2EEXmaReceiverFetchDispatch","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.pk;d[1]=b.contentRef;return c("LSAnonymizedMsgrE2EEXmaReceiverFetchDispatch").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("constructAttachmentFromXmaDataclass",["fbt","I64","LSIntEnum","MNXMAPreviewImageDecorationType"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=h._("__JHASH__rtAku5xCKsP__JHASH__"),l=function(a){switch(a){case"XMA_OPEN_NATIVE":return"xma_open_native";case"XMA_WEB_URL":return"xma_web_url";default:return"fallback"}},m=function(a){var b;if(a==null)return{};var c=a==null?void 0:a.image;return{headerImageUrl:(b=c==null?void 0:c.url)!=null?b:void 0,headerImageUrlExpirationTimestampMs:(c==null?void 0:c.expiration_timestamp_ms)!=null?(i||(i=d("I64"))).of_string(c==null?void 0:c.expiration_timestamp_ms):void 0,headerImageUrlFallback:(b=c==null?void 0:c.url_fallback)!=null?b:void 0,headerImageUrlMimeType:(b=c==null?void 0:c.mime_type)!=null?b:void 0,headerSubtitleText:(c=a==null?void 0:a.subtitle)!=null?c:void 0,headerTitle:(b=a==null?void 0:a.title)!=null?b:void 0}},n=function(a){if(a==null)return;switch(a){case"COLLAGE":case"INSTAGRAM_ICON":case"LIVE":case"MESSENGER_ICON":case"VIDEO":case"YOUTUBE_SHORTS":case"YOUTUBE_VIDEO":return(j||(j=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType")[a]);default:return(j||(j=d("LSIntEnum"))).ofNumber(c("MNXMAPreviewImageDecorationType").DEFAULT)}},o=function(a){var b;if(a==null)return{};var c=a==null?void 0:a.preview;return{maxSubtitleNumOfLines:(a==null?void 0:a.max_subtitle_num_lines)!=null?(i||(i=d("I64"))).of_int32(a==null?void 0:a.max_subtitle_num_lines):void 0,maxTitleNumOfLines:(a==null?void 0:a.max_title_num_lines)!=null?(i||(i=d("I64"))).of_int32(a==null?void 0:a.max_title_num_lines):void 0,previewHeight:(c==null?void 0:c.height)!=null?(i||(i=d("I64"))).of_int32(c==null?void 0:c.height):void 0,previewImageDecorationType:n(c==null?void 0:c.image_decoration_type),previewUrl:(b=c==null?void 0:(b=c.media)==null?void 0:b.url)!=null?b:void 0,previewUrlExpirationTimestampMs:(c==null?void 0:(b=c.media)==null?void 0:b.expiration_timestamp_ms)!=null?(i||(i=d("I64"))).of_string(c==null?void 0:(b=c.media)==null?void 0:b.expiration_timestamp_ms):void 0,previewUrlFallback:(b=c==null?void 0:(b=c.media)==null?void 0:b.url_fallback)!=null?b:void 0,previewUrlMimeType:(b=c==null?void 0:(b=c.media)==null?void 0:b.mime_type)!=null?b:void 0,previewWidth:(c==null?void 0:c.width)!=null?(i||(i=d("I64"))).of_int32(c==null?void 0:c.width):void 0,subtitleText:(b=a==null?void 0:a.subtitle)!=null?b:void 0,titleText:(c=a==null?void 0:a.title)!=null?c:void 0}},p=function(a,b,c){var e=["default_cta","cta_1","cta_2","cta_3"].reduce(function(e,f,g){if(a[f]!=null){var h;g=babelHelpers["extends"]({},c,{actionUrl:(h=(h=(h=a[f])==null?void 0:h.action_url)!=null?h:(h=a[f])==null?void 0:h.native_url)!=null?h:void 0,attachmentIndex:(i||(i=d("I64"))).zero,ctaId:i.add(b,i.of_int32(g+1)),nativeUrl:(g=(g=(h=a[f])==null?void 0:h.native_url)!=null?g:(h=a[f])==null?void 0:h.action_url)!=null?g:void 0,title:(g=(h=a[f])==null?void 0:h.title)!=null?g:k.toString(),type_:l((h=a[f])==null?void 0:h.cta_type)});e[f]=g}return e},{cta_1:void 0,cta_2:void 0,cta_3:void 0,default_cta:void 0});return e},q=function(a){return a==null?{}:{defaultCtaId:a==null?void 0:a.ctaId,defaultCtaTitle:a==null?void 0:a.title,defaultCtaType:a==null?void 0:a.type_}},r=function(a,b){var c;return a==null?{}:(c={},c["attachmentCta"+b+"Id"]=a==null?void 0:a.ctaId,c["cta"+b+"Title"]=a==null?void 0:a.title,c["cta"+b+"Type"]=a==null?void 0:a.type_,c)};a=function(a,b,c){if((a==null?void 0:a.content)==null)return null;a=a.content;if(a.__typename==="XMSGXmaSingleContent"){var d=p(a,b,c);b=babelHelpers["extends"]({},q(d==null?void 0:d.default_cta),r(d==null?void 0:d.cta_1,1),r(d==null?void 0:d.cta_2,2),r(d==null?void 0:d.cta_3,3),m(a.header),o(a.body));c=Object.keys(d).filter(function(a){return d[a]!=null}).map(function(a){return d[a]});return[b,c]}return null};b=a;g["default"]=b}),98);
__d("useReceiverFetchXMA",["FBLogger","I64","LSAnonymizedMsgrE2EEXmaReceiverFetchDispatchStoredProcedure","LSFactory","MAWReceiverFetchQPLLogger","Promise","ReQL","ReQLSuspense","asyncToGeneratorRuntime","constructAttachmentFromXmaDataclass","gkx","promiseDone","react","useJSON","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(j||d("react")).useEffect,m=c("gkx")("23991"),n=new Map();function o(a){try{a=JSON.parse(a);return JSON.stringify(a.fetch_params)}catch(a){c("FBLogger")("messenger_e2ee_web").mustfix("Error retrieving fetch_params from the contentRef");return""}}function p(a,b){if((a==null?void 0:a.contentRef)!=null){var e={contentRef:o(a==null?void 0:a.contentRef),pk:a.pk};d("MAWReceiverFetchQPLLogger").logFetchStart((k||(k=d("I64"))).to_string(a.pk));c("promiseDone")(b.runInTransaction(function(a){return c("LSAnonymizedMsgrE2EEXmaReceiverFetchDispatchStoredProcedure")(c("LSFactory")(a),e)},"readwrite"))}}function q(a,e,f,g){c("promiseDone")(a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var h=(yield (i||(i=b("Promise"))).all([d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(f.threadKey,f.messageId)),d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.attachment_ctas))])),j=h[0];h=h[1];h=h!=null?(k||(k=d("I64"))).add(h.ctaId,(k||(k=d("I64"))).one):(k||(k=d("I64"))).one;if((j==null?void 0:j.attachmentFbid)!=null){h=(h=c("constructAttachmentFromXmaDataclass")(g,h,{attachmentFbid:j==null?void 0:j.attachmentFbid,attachmentIndex:(k||(k=d("I64"))).zero,messageId:f.messageId,threadKey:f.threadKey}))!=null?h:[];var l=h[0];h=h[1];h=(h=h==null?void 0:h.map(function(b){if(b!=null)return a.attachment_ctas.add(b)}).filter(Boolean))!=null?h:[];yield (i||(i=b("Promise"))).all(h);yield a.attachments.put(babelHelpers["extends"]({},j,l,{xmaContentType:void 0}));d("MAWReceiverFetchQPLLogger").logFetchSuccess(e);n["delete"](e)}});return function(b){return a.apply(this,arguments)}}(),"readwrite"))}function a(a,b){var e,g=(h||(h=c("useReStore")))(),i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.client_xmas).getKeyRange((k||(k=d("I64"))).of_string(a))},[a,g],f.id+":129");l(function(){if(!m)return;if((i==null?void 0:i.xmaDataclass)==null&&!n.has(a)){n.set(a,"PENDING");try{p(i,g)}catch(b){d("MAWReceiverFetchQPLLogger").logFetchFailure(a,b.message),c("FBLogger")("maw_receiver_fetch").mustfix("Error parsing content ref")}}},[g,a,i]);var j=c("useJSON")((e=i==null?void 0:i.xmaDataclass)!=null?e:"{}");l(function(){(j==null?void 0:j.content)!=null&&n.get(a)==="PENDING"&&m&&(d("MAWReceiverFetchQPLLogger").logLoadCompleted(a),q(g,a,b,j))},[j,a,g,b])}g["default"]=a}),98);
__d("MAWSecureAttachment.react",["I64","LSAuthorityLevel","LSIntEnum","MAWAttachmentBlob.react","MAWGetAttachmentThumbnailBlob","MAWSecureAudioAttachmentContent.react","MAWSecureFileAttachmentContent.react","MAWSecureImageAttachmentContent.react","MAWSecureStickerAttachmentContent.react","MAWSecureVideoAttachmentContent.react","MWPMessageListAttachmentContainer.react","MWV2ChatImagePlaceholder.react","MWXMAAttachment.react","MessagingAttachmentType","ReQL","ReQLSuspense","react","useReStore","useReceiverFetchXMA"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useEffect;function n(a){var b=a.dbAttachment,e=a.connectBottom,f=a.connectTop,g=a.mediaRenderQpl,h=a.message;a=a.outgoing;var i=b.attachmentFbid,m=b.attachmentType,n=b.authorityLevel,o=b.previewHeight!=null?(j||(j=d("I64"))).to_float(b.previewHeight):b.previewHeightLarge!=null?(j||(j=d("I64"))).to_float(b.previewHeightLarge):void 0,p=b.previewWidth!=null?(j||(j=d("I64"))).to_float(b.previewWidth):b.previewWidthLarge!=null?(j||(j=d("I64"))).to_float(b.previewWidthLarge):void 0;switch(!0){case i===(j||(j=d("I64"))).to_string((j||(j=d("I64"))).max_int)&&(j||(j=d("I64"))).equal(n,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)):return l.jsx(c("MWV2ChatImagePlaceholder.react"),{height:o,width:p});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)):return l.jsx(c("MAWSecureImageAttachmentContent.react"),{connectTop:f,dbAttachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,getPreviewUrl:c("MAWGetAttachmentThumbnailBlob"),mediaRenderQpl:g,message:h,outgoing:a,previewHeight:o,previewWidth:p});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)):return l.jsx(c("MAWSecureVideoAttachmentContent.react"),{connectTop:f,dbAttachment:b,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:g,message:h,outgoing:a,previewHeight:o,previewWidth:p});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO)):return l.jsx(c("MAWSecureAudioAttachmentContent.react"),{dbAttachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,message:h,outgoing:a});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)):return l.jsx(c("MAWSecureImageAttachmentContent.react"),{connectTop:f,dbAttachment:b,getPlayableUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob,mediaRenderQpl:g,message:h,outgoing:a,previewHeight:o,previewWidth:p});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)):return l.jsx(c("MAWSecureStickerAttachmentContent.react"),{dbAttachment:b,getPreviewUrl:d("MAWAttachmentBlob.react").getAttachmentBlob});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)):return l.jsx(d("MWXMAAttachment.react").MWXMAAttachment,{attachment:b,connectBottom:e,connectTop:f,getFaviconUrlXMA:function(a,b){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"favicon")},getHeaderUrlXMA:function(a){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"header")},getPlayableUrl:function(a,b){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"preview")},getPreviewUrlXMA:function(a,b){return d("MAWAttachmentBlob.react").getInfoUrlXMA(a,"preview")},outgoing:a});case(j||(j=d("I64"))).equal(m,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").FILE)):return l.jsx(c("MAWSecureFileAttachmentContent.react"),{connectBottom:e,connectTop:f,dbAttachment:b,outgoing:a});default:return"Unsupported attachment type"}}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.connectBottom,e=a.connectTop,g=a.mediaRenderQpl,i=a.message,o=a.outgoing,p=(h||(h=c("useReStore")))();a=i.authorityLevel;var q=i.messageId,r=i.threadKey,s=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(p.table("attachments")).getKeyRange(r,q)},[p,q,r,a],f.id+":198");c("useReceiverFetchXMA")((a=s==null?void 0:s.attachmentFbid)!=null?a:"",i);m(function(){g==null?void 0:g.addAnnotations({bool:{has_db_attachment:s!=null,is_outgoing:o}})},[g,o,s]);return s==null?null:l.jsx(c("MWPMessageListAttachmentContainer.react"),{connectTop:e,message:i,paint:(j||(j=d("I64"))).equal(s.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO))?!1:void 0,children:l.jsx(n,{connectBottom:b,connectTop:e,dbAttachment:s,mediaRenderQpl:g,message:i,outgoing:o})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWEncryptionPlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__C8O2a78lb6C__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWFutureproofPlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__4rmC_sX93Dk__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWUnavailablePlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__M9fzIhDqITQ__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWUnavailableStoryPlaceholder.react",["fbt","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx(c("MWV2TombstonedMessage.react"),{children:h._("__JHASH__pGZ-I0iz-G0__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWSecurePlaceholder.react",["CometPlaceholder.react","I64","LSIntEnum","MAWEncryptionPlaceholder.react","MAWFutureproofPlaceholder.react","MAWUnavailablePlaceholder.react","MAWUnavailableStoryPlaceholder.react","MWPMessageListColumn.react","ReQL","ReQLSuspense","react","recoverableViolation","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||d("react");function m(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.attachments).getKeyRange(a.threadKey,a.messageId)},[b,a.threadKey,a.messageId],f.id+":30")}function n(a){a=a.message;a=a;a=m(a);if(a==null)return null;a=a.defaultCtaType;if(a==="xma_montage_share")return l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWUnavailableStoryPlaceholder.react"),{})});c("recoverableViolation")("Unexpected case where message is tombstone type but the attachment is not xma montage share","messenger_e2ee_web");return l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWUnavailablePlaceholder.react"),{})})}n.displayName=n.name+" [from "+f.id+"]";function a(a){a=a.message;var b=a.displayedContentTypes,e=null;(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(65536))?e=l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWEncryptionPlaceholder.react"),{})}):(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(131072))?e=l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWFutureproofPlaceholder.react"),{})}):(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(262144))?e=l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MAWUnavailablePlaceholder.react"),{})}):(i||(i=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(256))&&(e=l.jsx(n,{message:a}));return l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSMessageContentType",[],(function(a,b,c,d,e,f){a=Object.freeze({TEXT:1,MEDIA_PREVIEW:2,AUDIO_CLIP:4,XMA_FALLBACK:8,LWA_WAVE:16,ADMIN:32,FILE_ATTACHMENT:64,GLYPH:128,TOMBSTONE:256,STORY_REPLY:512,SINGLE_XMA:1024,HSCROLL_XMA:2048,STICKER:4096,FORWARD_INDICATOR:8192,ANIMATED_IMAGE:16384,NULL_STATE:32768,ENCRYPTION_PLACEHOLDER:65536,FUTUREPROOF_PLACEHOLDER:131072,UNAVAILABLE_PLACEHOLDER:262144});f["default"]=a}),66);
__d("useMediaRenderQpl",["I64","LSIntEnum","LSMessageContentType","QPLUserFlow","Random","objectEntries","qpl","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useEffect,l=b.useMemo,m=b.useRef,n=c("qpl")._(25302828,"2195");function a(a){var b=m(),d=m();k(function(){return function(){b.current!=null&&d.current!==b.current&&c("QPLUserFlow").endCancel(n,{instanceKey:b.current})}},[]);var e=l(function(){if(!o(a))return null;var e=p();b.current=e;c("QPLUserFlow").start(n,{annotations:{string:{content_type:r(a),transport_key:a.transportKey}},cancelOnUnload:!0,instanceKey:e});return{addAnnotations:function(a){c("QPLUserFlow").addAnnotations(n,a,{instanceKey:e})},addPoint:function(a,b){b&&c("QPLUserFlow").addAnnotations(n,b,{instanceKey:e}),c("QPLUserFlow").addPoint(n,a,{instanceKey:e})},endFail:function(a,b){c("QPLUserFlow").endFailure(n,a,{annotations:b,instanceKey:e}),d.current=e},endSuccess:function(a){c("QPLUserFlow").endSuccess(n,{annotations:a,instanceKey:e}),d.current=e},markError:function(a,b,d){return c("QPLUserFlow").markError(n,a,{debugInfo:b,error:d,instanceKey:e})}}},[]);return e}function o(a){a=a.displayedContentTypes;return(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(2))}function p(){return Date.now()+Math.round(d("Random").random()*1e4)}var q=c("objectEntries")(c("LSMessageContentType")).reduce(function(a,b){var c=b[0];b=b[1];a.set(b,c);return a},new Map());function r(a){a=(i||(i=d("I64"))).to_float(a.displayedContentTypes);return(a=q.get(a))!=null?a:"UNKNOWN"}g["default"]=a}),98);
__d("MAWSecureAttachmentRenderer.react",["CometPlaceholder.react","MAWMsg","MAWSecureAttachment.react","MAWSecurePlaceholder.react","MWPMessageParsingUtils","react","useMediaRenderQpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback;function k(a,b,e,f,g){b=d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectTop(a,b,"below");e=d("MWPMessageParsingUtils").MessageWithAttachments.shouldConnectBottom(a,e,"below");return i.jsx(c("CometPlaceholder.react"),{fallback:null,children:d("MAWMsg").isMediaMsg(a)||d("MAWMsg").isXMAMsg(a)?i.jsx(c("MAWSecureAttachment.react"),{connectBottom:e,connectTop:b,mediaRenderQpl:g,message:a,outgoing:f}):i.jsx(c("MAWSecurePlaceholder.react"),{message:a})})}k.displayName=k.name+" [from "+f.id+"]";function a(a){var b=c("useMediaRenderQpl")(a);a=j(function(a,c,d,e){return k(a,c,d,e,b)},[b]);return a}g.render=k;g.useRenderAttachmentWithQpl=a}),98);
__d("MAWCutoverEncryptedBackupsBanner.react",["CometErrorBoundary.react","cr:7563","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.isShown;return i.jsx(i.Fragment,{children:a&&b("cr:7563")?i.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:i.jsx(b("cr:7563"),{})}):null})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWMessageListRow.react",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWSecureAttachmentRenderer.react","MWMessageRow.react","MWPVisibleMessageContext.react","MWV2MessageActionsVisibility.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a){var b=a.domElementRef,c=a.lastEbMessageTime,e=a.modal,f=a.row,g=a.thread;a=d("MWV2MessageActionsVisibility.react").useStopHoveringRef();var h=d("LSMessagingThreadTypeUtil").isSecure(g.threadType),k=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();k=k.visibleMessage;var l=f.message;h=h?(i||(i=d("I64"))).equal(g.threadKey,l.threadKey):!1;var m=!1;if(k!=null){var n=k.messageId;switch(k.source){case"Reply":case"Pinned":m=n===l.messageId;break;default:m=!1}}k=d("MAWSecureAttachmentRenderer.react").useRenderAttachmentWithQpl(l);n={domElementRef:b,hasMessageEmphasisRing:m,isModal:e===l.messageId,isSecureMessage:h,lastEbMessageTime:c,message:l,nextMessage:f.nextMessage,prevMessage:f.prevMessage,renderAttachment:k,stopHoveringRef:a,threadType:d("Int64Hooks").useMemoInt64(function(){return g.threadType},[g.threadType])};return j.jsx(d("MWMessageRow.react").MWMessageRow,babelHelpers["extends"]({},n))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWMessageList.react",["BaseTheme.react","CometErrorBoundary.react","CometPageletWithDiv.react","CometScreenReaderText.react","I64","MAWMessageListRow.react","MWBaseTheme","MWContextBanner.react","MWInboxThreadMessagesSpinner.react","MWPMessageListColumn.react","MWPMessageListFocusTable.react","MWPThreadCapabilitiesContext","MWPTypingIndicators.react","MWV2MessageRowSimple.react","ReQL","ReQLSuspense","cr:2368","cr:3907","cr:7567","cr:844","gkx","qex","react","useMAWOfflineQueueLoadingIndicator","useMWMessageRowTheme","useMWPAriaLabelForMessageListGrid","useReStore","useThreadLastMessageTimeMs","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react")),l=j,m=l.useId,n=l.useState;function a(a){var b=a.theme;b=b===void 0?d("MWBaseTheme").empty:b;var e=a.threadKey;a=a.threadType;var f=d("MWPTypingIndicators.react").useTypingParticipants(e),g=d("MWPTypingIndicators.react").useAccessibilityText(f);if(f.length>0)return k.jsx(c("BaseTheme.react"),{config:b,children:k.jsx(c("MWV2MessageRowSimple.react"),{children:k.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:[k.jsx("div",{"aria-live":"polite",children:k.jsx(c("CometScreenReaderText.react"),{text:g})}),k.jsx(d("MWPTypingIndicators.react").MWPTypingIndicators,{threadKey:e,threadType:a})]})})});else return null}a.displayName=a.name+" [from "+f.id+"]";var o=d("withCometPlaceholder").withCometPlaceholder(a);l=k.forwardRef(e);function e(a,e){var g=a.cutoverOpenThread,j=a.entryPoint,l=a.onScrollToBottom,p=a.thread,q=(h||(h=c("useReStore")))(),r=c("useThreadLastMessageTimeMs")(p.threadKey);a=(a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(q.tables.threads,["lastActivityTimestampMs"]).getKeyRange(p.threadKey).map(function(a){a=a.lastActivityTimestampMs;return r!=null?(i||(i=d("I64"))).lt(r,a):!0})},[q,r,p.threadKey],f.id+":128"))!=null?a:!1;var s=c("useMWPAriaLabelForMessageListGrid")(p),t=c("useMWMessageRowTheme")(),u=n(""),v=u[0];u=u[1];var w=m(),x=c("useMAWOfflineQueueLoadingIndicator")(!1,p),y=!x&&a&&!((x=c("qex")._("97"))!=null?x:!1),z=b("cr:844")==null?void 0:b("cr:844")(p.threadKey);a=k.jsx(b("cr:2368"),{entryPoint:j,onScrollToBottom:l,pageSize:c("gkx")("23432")?3:15,ref:e,renderFooter:function(){return k.jsxs(k.Fragment,{children:[k.jsx(o,{theme:t,threadKey:p.threadKey,threadType:p.threadType}),y&&b("cr:7567")?k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:k.jsx(b("cr:7567"),{})}):null]})},renderHeader:function(){return k.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnGrowJustified,{children:[k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:20}),k.jsx(c("MWContextBanner.react"),{threadKey:p.threadKey,threadType:p.threadType}),k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:10})]})},renderLoadingAnimation:function(){return k.jsx(c("MWInboxThreadMessagesSpinner.react"),{})},renderRow:function(a){var b=a.domElementRef,d=a.message,e=a.nextMessage;a=a.prevMessage;return k.jsx(c("MAWMessageListRow.react"),{domElementRef:b,lastEbMessageTime:z,modal:v,row:{message:d,nextMessage:e,prevMessage:a},thread:p})},secondaryThread:g,thread:p});return k.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x5yr21d","data-testid":void 0,id:w,children:k.jsx(d("CometPageletWithDiv.react").Placeholder,{className:"x78zum5 xdt5ytf x1iyjqo2 x5yr21d",fallback:null,name:"MWV2MessageList",children:k.jsx(d("MWPThreadCapabilitiesContext").Provider,{thread:p,children:k.jsx(c("MWPMessageListFocusTable.react"),{ariaLabel:s,modal:v,setModal:u,children:b("cr:3907")==null?a:k.jsx(b("cr:3907"),{id:w,children:a})})})})})}e.displayName=e.name+" [from "+f.id+"]";a=l;g["default"]=a}),98);
__d("MWPOneToOneThreadBlockedContext.react",["I64","Int64Hooks","LSContactBlockedByViewerStatus","LSIntEnum","MWV2OneToOneThreadBlockedContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=a.children,e=a.participants,f=a.thread;a=d("Int64Hooks").useMemoInt64(function(){if(!((i||(i=d("I64"))).equal(f.threadType,(j||(j=d("LSIntEnum"))).ofNumber(1))||(i||(i=d("I64"))).equal(f.threadType,(j||(j=d("LSIntEnum"))).ofNumber(15))))return!1;var a={contents:!1};e.forEach(function(b,e,f){if(!(i||(i=d("I64"))).equal(b[1].blockedByViewerStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))){a.contents=!0;return}});return a.contents},[f.threadType,e]);return k.jsx(d("MWV2OneToOneThreadBlockedContext.react").MWV2OneToOneThreadBlockedContext,{blocked:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2SeenHead.react",["GenderConst","I64","LSIntEnum","MWMessageDeliveryStatus","getLSMediaContactProfilePictureUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b,e=a[0];a=a[1];return{gender:c("GenderConst").NOT_A_PERSON,id:(h||(h=d("I64"))).to_string(a.id),imageSrc:c("getLSMediaContactProfilePictureUrl")(a),name:(b=e.nickname)!=null?b:a.name,timestamp:h.to_float(e.readActionTimestampMs)}}function a(a,b){var c={contents:(h||(h=d("I64"))).zero};a.forEach(function(a,e,f){e=a[0];if(!(h||(h=d("I64"))).equal(e.contactId,b)&&(h||(h=d("I64"))).gt(e.deliveredWatermarkTimestampMs,c.contents)){c.contents=e.deliveredWatermarkTimestampMs;return}});return c.contents}function b(a){return new Set([(h||(h=d("I64"))).to_string(a)])}function e(a,b,c,e,f,g){var k=[];b.forEach(function(b,e,f){if(c.has(e)||a.isAdminMessage)return;if(!(h||(h=d("I64"))).equal(a.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2)))return;f=b[0];var l=(h||(h=d("I64"))).equal(a.senderId,f.contactId);f=h.le(a.timestampMs,f.readWatermarkTimestampMs);if(l||f){k.push(j(b));if(!g){c.add(e);return}else return}});var l=k.length===0&&c.size===1;if(k.length<=0)if((h||(h=d("I64"))).equal(a.senderId,f))return d("MWMessageDeliveryStatus").getDeliveryStatusForMessageSentByYou(a,e,l);else return{type:"NoneStatus"};if(!g)if(k.length>1)return{heads:k,type:"MultipleSeenHeads"};else return{head:k[0],type:"SingleSeenHead"};f=k.length===b.size-1;return{delivered:f,heads:k,type:"DeliveredAndRead"}}g.calculateMaxDeliveredTimestamp=a;g.makeExistingSeenHeads=b;g.deliveryStatusForMessage=e}),98);
__d("MWPBaseMessageList_DEPRECATED",["BaseHeadingContextWrapper.react","CometHideableComponentExperiment.react","LSMessagingThreadTypeUtil","MWPActor.react","MWPMessageAuthor.react","MWPOneToOneThreadBlockedContext.react","MWV2SeenHead.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.children,e=a.messages,f=a.participants,g=a.renderRow;a=a.thread;var h=d("MWPActor.react").useActor(),j=d("MWV2SeenHead.react").calculateMaxDeliveredTimestamp(f,h),k=d("MWV2SeenHead.react").makeExistingSeenHeads(h),l=d("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&d("LSMessagingThreadTypeUtil").isSecure(a.threadType),m=[];for(var n=e.length-1|0;n>=0;--n){var o=n===0?void 0:e[n-1|0],p=n>=(e.length-1|0)?void 0:e[n+1|0],q=e[n],r=d("MWV2SeenHead.react").deliveryStatusForMessage(q,f,k,j,h,l);m.push(i.jsx(c("CometHideableComponentExperiment.react"),{callingSurface:"thread_view",disableHidding:!0,children:i.jsx(d("MWPMessageAuthor.react").MWPMessageAuthor,{contactId:q.senderId,threadKey:q.threadKey,children:g({message:q,nextMessage:p,prevMessage:o,status:r})})},q.messageId))}if(m.length===0)return null;else return i.jsx(c("BaseHeadingContextWrapper.react"),{children:i.jsx("div",{className:"x1ja2u2z",children:i.jsx(c("MWPOneToOneThreadBlockedContext.react"),{participants:f,thread:a,children:b(m.reverse())})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MAWMessageList_DEPRECATED.react",["BaseTheme.react","CometErrorBoundary.react","CometPageletWithDiv.react","CometScreenReaderText.react","I64","Int64Hooks","MAWLoadingStateOutstandingOfflineQueueSelector","MAWMessageListRow.react","MAWStateContext.react","MWBaseTheme","MWPBaseMessageList_DEPRECATED","MWPMessageListColumn.react","MWPMessageListFocusTable.react","MWPThreadCapabilitiesContext","MWPTypingIndicators.react","MWV2MessageRowSimple.react","ReQL","ReQLSuspense","cr:3907","cr:7567","cr:844","qex","react","useMWMessageRowTheme","useMWPAriaLabelForMessageListGrid","useReStore","useThreadLastMessageTimeMs","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i,m=l.useEffect,n=l.useId,o=l.useState;function p(a,b){return new Map(d("ReQLSuspense").useArray(function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(b.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(b.tables.contacts)).map(function(a){var b=a[0];a=a[1];return[(j||(j=d("I64"))).to_string(a.id),[b,a]]})},[b,a.threadKey],f.id+":82"))}function q(a,b){m(function(){var c;if((a==null?void 0:(c=a.scrollPositionRef.current)==null?void 0:c.type)==="Bottom"&&b.length>0){c=a.scrollerRef.current;c==null?void 0:c.scrollToBottom()}},[b,a])}function a(a){var b=a.scrollerRefs,e=a.theme;e=e===void 0?d("MWBaseTheme").empty:e;var f=a.threadKey;a=a.threadType;var g=d("MWPTypingIndicators.react").useTypingParticipants(f),h=d("MWPTypingIndicators.react").useAccessibilityText(g);q(b,g);if(g.length>0)return k.jsx(c("BaseTheme.react"),{config:e,children:k.jsx(c("MWV2MessageRowSimple.react"),{children:k.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:[k.jsx("div",{"aria-live":"polite",children:k.jsx(c("CometScreenReaderText.react"),{text:h})}),k.jsx(d("MWPTypingIndicators.react").MWPTypingIndicators,{threadKey:f,threadType:a})]})})});else return null}a.displayName=a.name+" [from "+f.id+"]";var r=d("withCometPlaceholder").withCometPlaceholder(a);function e(a){var e=a.messageElementRefs,g=a.messages,i=a.scrollerRefs,l=a.thread,m=(h||(h=c("useReStore")))();a=p(l,m);var q=c("useMWPAriaLabelForMessageListGrid")(l),s=c("useMWMessageRowTheme")(),t=o(""),u=t[0],v=t[1],w=n(),x=d("Int64Hooks").useMemoInt64(function(){return l.threadType},[l.threadType]),y=c("useThreadLastMessageTimeMs")(l.threadKey);t=(t=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(m.tables.threads,["lastActivityTimestampMs"]).getKeyRange(l.threadKey).map(function(a){a=a.lastActivityTimestampMs;return y!=null?(j||(j=d("I64"))).lt(y,a):!0})},[m,y,l.threadKey],f.id+":178"))!=null?t:!1;var z=d("MAWStateContext.react").useMAWSelector(d("MAWLoadingStateOutstandingOfflineQueueSelector").outstandingOfflineQueueSelector()),A=b("cr:844")==null?void 0:b("cr:844")(l.threadKey);t=!z&&t&&!((z=c("qex")._("97"))!=null?z:!1);return k.jsxs(k.Fragment,{children:[k.jsx(c("MWPBaseMessageList_DEPRECATED"),{messages:g,participants:a,renderRow:function(a){var b=a.message,d=a.nextMessage;a=a.prevMessage;return k.jsx(c("MAWMessageListRow.react"),{domElementRef:e.set(b.messageId),lastEbMessageTime:A,modal:u,row:{message:b,nextMessage:d,prevMessage:a},thread:l})},thread:l,children:function(a){a=k.jsxs(k.Fragment,{children:[a,k.jsx(r,{scrollerRefs:i,theme:s,threadKey:l.threadKey,threadType:x})]});return k.jsx("div",{"data-testid":void 0,id:w,children:k.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWV2MessageList",children:k.jsx(d("MWPThreadCapabilitiesContext").Provider,{thread:l,children:k.jsx(c("MWPMessageListFocusTable.react"),{ariaLabel:q,modal:u,setModal:v,children:b("cr:3907")==null?a:k.jsx(b("cr:3907"),{id:w,children:a})})})})})}}),t&&b("cr:7567")?k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:k.jsx(b("cr:7567"),{})}):null]})}e.displayName=e.name+" [from "+f.id+"]";g["default"]=e}),98);
__d("useSecureThreadDetailGetDevices",["I64","MAWJids","MAWJobDefinitions","MAWTimedJob","ReQL","ReQLSuspense","WAJobOrchestratorTypes","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useEffect,k=b.useRef;function a(a,b){var e=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(b.table("participants"),["contactId"]).getKeyRange(a.threadKey).filter(function(b){return!(i||(i=d("I64"))).equal(b.contactId,a.threadKey)}).map(function(a){return d("MAWJids").toUserJid((i||(i=d("I64"))).to_string(a.contactId))})},[b,a.threadKey],f.id+":30"),g=k(new Set());j(function(){var a=g.current.size!==e.length||!e.every(function(a){return g.current.has(a)});if(!a&&e.length>2)return;a=new Set(e);g.current=a;c("promiseDone")(d("MAWTimedJob").TimedUIJobStarters.fireAndForget(d("MAWJobDefinitions").createStartJobInfo("getDevices",{ignoreDhash:!1,reason:"details-participants-changed",scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW},users:a})))},[e])}g["default"]=a}),98);
__d("MAWSecureThreadDetail.react",["CometPlaceholder.react","ComponentMountUnmountSubspanLogger.react","I64","LSAuthorityLevel","LSIntEnum","MAWArmadilloLinkContext.react","MAWMessageList.react","cr:5983","react","useReStore","useSecureThreadDetailGetDevices"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react")),m=k.useState;function a(a){var e=a.cutoverOpenThread,f=a.entryPoint,g=a.messageListRef;a=a.thread;var k=(h||(h=c("useReStore")))();c("useSecureThreadDetailGetDevices")(a,k);k=m(!0);var n=k[0],o=k[1];k=e!=null&&(i||(i=d("I64"))).equal(e.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE));return l.jsxs(l.Fragment,{children:[l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MAWCutoverEncryptedBackupsBanner",children:b("cr:5983")!=null&&k&&l.jsx(b("cr:5983"),{isShown:!n})}),l.jsxs(d("MAWArmadilloLinkContext.react").MAWArmadilloLinkProvider,{children:[l.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MAWSecureThreadDetail"}),l.jsx(c("MAWMessageList.react"),{cutoverOpenThread:e,entryPoint:f,onScrollToBottom:function(a){return o(a)},ref:g,thread:a})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSInitiateThreadMigration",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return a[3]!==void 0?(d[0]=new c.Map(),d[0].set("open_message_thread_key",a[0]),d[0].set("armadillo_thread_key",a[1]),d[0].set("trace_id",a[3]),d[0].set("should_copy_messages",a[2]),d[1]=d[0].get("open_message_thread_key"),d[0],d[2]=d[0].get("armadillo_thread_key"),d[0],d[3]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),[c.i64.to_string(d[1]),"_",c.i64.to_string(d[2])].join(""),c.i64.cast([0,436]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))):(d[0]=new c.Map(),d[0].set("open_message_thread_key",a[0]),d[0].set("armadillo_thread_key",a[1]),d[0].set("should_copy_messages",a[2]),d[1]=d[0].get("open_message_thread_key"),d[0],d[2]=d[0].get("armadillo_thread_key"),d[0],d[3]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),[c.i64.to_string(d[1]),"_",c.i64.to_string(d[2])].join(""),c.i64.cast([0,436]),d[3],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0])))},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSInitiateThreadMigrationStoredProcedure",["LSInitiateThreadMigration","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.openMessageThreadKey;d[1]=b.armadilloThreadKey;d[2]=b.shouldCopyMessages;d[3]=b.traceId;return c("LSInitiateThreadMigration").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("MAWSecureThreadDetail_DEPRECATED.react",["CometHeroHoldTrigger.react","CometPageletWithDiv.react","CometPlaceholder.react","ComponentMountUnmountSubspanLogger.react","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWArmadilloLinkContext.react","MAWFetchMoreMessages","MAWMessageList_DEPRECATED.react","MWContextBanner.react","MWInboxThreadMessagesSpinner.react","MWPMessageListColumn.react","MWV2MessageScroller.react","ReQL","ReQLSuspense","cr:5983","emptyFunction","logMessengerWebFalcoEvent","react","useMAWMarkThreadAsRead","useMWChatLoadMoreItemsIncrementally","useMWCurrentVisibleMessage","useMWV2ConversationScrollerRefs","useReStore","useSecureThreadDetailGetDevices"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react"));e=i;var m=e.useCallback,n=e.useImperativeHandle,o=e.useMemo,p=e.useState,q=3;function r(a,b){var c=(k||(k=d("I64"))).compare(a.primarySortKey,b.primarySortKey);if(c!==0)return c;c=k.compare((c=a.secondarySortKey)!=null?c:(k||(k=d("I64"))).zero,(c=b.secondarySortKey)!=null?c:(k||(k=d("I64"))).zero);return c!==0?c:k.compare(a.timestampMs,b.timestampMs)}function s(a,b){var e=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){var f=d("ReQL").fromTableAscending(e.tables.messages.index("messageDisplayOrder")).getKeyRange(b.threadKey);if(a!=null)return f.bounds({gte:d("ReQL").key(a.minTimestampMs),lte:d("ReQL").key(a.maxTimestampMs)});else if((k||(k=d("I64"))).lt(b.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))||d("LSMessagingThreadTypeUtil").isSecure(b.threadType))return f;return d("ReQL").empty()},[e,a,b.authorityLevel,b.threadKey,b.threadType],f.id+":91")}function t(a,b){var e=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){if(b==null)return d("ReQL").empty();var f=d("ReQL").fromTableAscending(e.tables.messages).getKeyRange(b.threadKey);if(a!=null)return d("ReQL").fromTableAscending(e.tables.messages).getKeyRange(b.threadKey).bounds({gte:d("ReQL").key(a.minTimestampMs),lte:d("ReQL").key(a.maxTimestampMs)});else if((k||(k=d("I64"))).lt(b.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))||d("LSMessagingThreadTypeUtil").isSecure(b.threadType))return f;return d("ReQL").empty()},[e,b,a],f.id+":125")}function u(a,b){var c=(k||(k=d("I64"))).compare(a.primarySortKey,b.primarySortKey);if(c!==0)return c;c=a.secondarySortKey;var e=b.secondarySortKey;if(c==null)if(e!=null)return-1;else return(k||(k=d("I64"))).compare(a.timestampMs,b.timestampMs);if(e==null)return 1;c=k.compare(c,e);return c!==0?c:k.compare(a.timestampMs,b.timestampMs)}function v(a,b,e,f,g){var h=s(a,e),i=t(b,f);d("Int64Hooks").useEffectInt64(function(){if(f!=null&&i.length===0){var a=f.threadKey,b=f.threadType;c("logMessengerWebFalcoEvent")({threadKey:a,threadType:b},"no_open_messages_in_cutover_thread",g,{cutoverThreadKey:(k||(k=d("I64"))).to_string(e.threadKey),reason:"no_messages_fetched_for_open"})}},[g,i.length,f,e.threadKey]);return o(function(){if(a!=null&&!a.hasMoreBefore)return i.sort(u).concat(h.sort(r));else return h.sort(r)},[a,h,i])}function a(a){var e,f=a.cutoverOpenThread,g=a.entryPoint,i=a.messageListRef;a=a.thread;var j=c("useMWV2ConversationScrollerRefs")(),k=(h||(h=c("useReStore")))(),o=m(function(){var a;return((a=j.scrollPositionRef.current)==null?void 0:a.value)===void 0&&((a=j.scrollPositionRef.current)==null?void 0:a.type)==="Bottom"},[j]),r=d("MAWFetchMoreMessages").useFetchCutoverMessages(a.threadKey,f==null?void 0:f.threadKey,a.threadType),s=c("useMWCurrentVisibleMessage")(a,j.scrollerRef),t=s.messageRange,u=c("useMWCurrentVisibleMessage")(f,j.scrollerRef);u=u.messageRange;e=(e=t==null?void 0:t.hasMoreAfter)!=null?e:!1;var w=p(!1),x=w[0],y=w[1];r=c("useMWChatLoadMoreItemsIncrementally")(e,void 0,void 0,v(t,u,a,f,g),r,(w=t==null?void 0:t.hasMoreBefore)!=null?w:!1);w=r[0];var z=r[1];r=r[2];c("useSecureThreadDetailGetDevices")(a,k);n(i,function(){return{getScrollAreaElement:c("emptyFunction"),jumpToMostRecentMessage:c("emptyFunction"),restoreScrollPosition:function(){var a=j.scrollerRef.current,b=j.scrollPositionRef.current;if(a!=null&&b!=null)switch(b.type){case"Bottom":a.scrollToBottom();break;case"Top":case"Between":a.scrollToPosition(b.value,!1);break;case"Island":break}}}},[j.scrollPositionRef,j.scrollerRef]);k=t==null||t.isLoadingBefore;i=f!=null&&(u==null||u.isLoadingBefore);t=w.length>=q;return l.jsxs(l.Fragment,{children:[l.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MAWCutoverEncryptedBackupsBanner",children:b("cr:5983")!=null&&f&&l.jsxs(l.Fragment,{children:[l.jsx(b("cr:5983"),{isShown:x}),l.jsx(c("CometHeroHoldTrigger.react"),{description:"MAWCutoverLoadingMessages",hold:i&&!t})]})}),l.jsxs(d("MAWArmadilloLinkContext.react").MAWArmadilloLinkProvider,{children:[l.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MAWSecureThreadDetail"}),l.jsxs(c("MWV2MessageScroller.react"),{fetchMore:z,hasMoreAfter:e,hasMoreBefore:r,markThreadAsRead:c("useMAWMarkThreadAsRead")(a,g),onScroll:function(){y(!o())},scrollerRefs:j,thread:a,children:[l.jsxs(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{children:[l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:20}),l.jsx(c("CometHeroHoldTrigger.react"),{description:"MAWLoadingMessages",hold:k&&!t}),r?l.jsx(c("MWInboxThreadMessagesSpinner.react"),{}):l.jsx(c("MWContextBanner.react"),{threadKey:a.threadKey,threadType:a.threadType}),l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:10})]}),l.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:null}),l.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MAWMessageList",children:l.jsx(c("MAWMessageList_DEPRECATED.react"),{messageElementRefs:s.messageElementRefs.current,messages:w,scrollerRefs:j,thread:a})}),e?l.jsx(c("MWInboxThreadMessagesSpinner.react"),{}):null]})]})]})}a.displayName=a.name+" [from "+f.id+"]";e=l.memo(a);g.messageSortOrder=r;g.useMessagesUnsorted=s;g.useMessagesWithMaybeCutover=v;g.MAWSecureThreadDetail_DEPRECATED=e}),98);
__d("updateEphemeralDuration",["JSResourceForInteraction","MAWBridgeSendAndReceive","Promise","WATimeUtils","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,f,g,i,j){var k=d("WATimeUtils").millisTime();if(c("gkx")("23920"))return c("JSResourceForInteraction")("MAWEphemeralSettingsUpdate").__setRef("updateEphemeralDuration").load().then(function(a){return a.updateEphemeralSettings(e,k,f,j)}).then(function(a){g();return!0});else if(a!=null)return d("MAWBridgeSendAndReceive").sendAndReceive("backend","setEphemeralSettingsFromFrontend",{ephemeralExpirationInSec:e,ephemeralLastUpdatedOrSetTimestamp:d("WATimeUtils").castMilliSecondsToUnixTime(k),isEphemeralSettingReset:f,threadId:a}).then(function(a){a.success?g():i();return a.success});i();return(h||(h=b("Promise"))).resolve(!1)}g["default"]=a}),98);
__d("useMAWMaybeResetEphemeralSettings",["Int64Hooks","MAWEphemeralGatingUtil","MAWGetEphemeralSettings","MAWMiActOnActThreadReady","Promise","WALoggerDeferred","promiseDone","react","updateEphemeralDuration","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[reset ephemeral settings]: fail to reset settings for chatJid ",", previous settings was ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[reset ephemeral settings]: success to reset settings for chatJid ",", previous settings was ",""]);k=function(){return a};return a}var l=(i||d("react")).useRef,m=0;function a(a){var b=c("useAsyncReStore")(),e=l(null);d("Int64Hooks").useEffectInt64(function(){(e.current==null||e.current!==a)&&(e.current=a,d("MAWEphemeralGatingUtil").isResetEphemeralSettingsEnabled()&&c("promiseDone")(b,function(b){return c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(b.tables,a,"useMAWResetEphemeralSettings",function(b,c,d){return n(a,d)}))}))},[a,b])}function n(a,e){var f=d("MAWEphemeralGatingUtil").getExpirationOptions();return e!=null?d("MAWGetEphemeralSettings").getEphemeralSetting(e,a).then(function(b){b&&b.ephemeralExpirationInSec>0&&!f.includes(b.ephemeralExpirationInSec)&&c("promiseDone")(c("updateEphemeralDuration")(e,m,!0,function(){void d("WALoggerDeferred").LOG(k(),e,b.ephemeralExpirationInSec)},function(){void d("WALoggerDeferred").LOG(j(),e,b.ephemeralExpirationInSec)},a))}):(h||(h=b("Promise"))).resolve()}g["default"]=a}),98);
__d("MAWSecureThreadDetailWrapper.react",["CometErrorBoundary.react","CometHeroHoldTrigger.react","FBLogger","I64","Int64Hooks","LSAuthorityLevel","LSFactory","LSInitiateThreadMigrationStoredProcedure","LSIntEnum","MAWSecureThreadDetail_DEPRECATED.react","MAWThreadCutover","MWFailChatTabOpenQPLEvent","MemoryUtils","QPLUserFlow","WAHex","cr:1957","cr:3200","cr:4646","emptyFunction","logMessengerWebFalcoEvent","qpl","react","useAsyncReStore","useMAWMaybeResetEphemeralSettings"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.useCallback,m=e.useEffect,n=e.useRef,o=e.useState,p=(e=b("cr:3200"))!=null?e:c("emptyFunction"),q=(e=b("cr:4646"))!=null?e:c("emptyFunction");function r(a,b){var e=(i||(i=d("I64"))).to_int32(a);d("Int64Hooks").useEffectInt64(function(){c("QPLUserFlow").start(c("qpl")._(25306607,"1883"),{annotations:{string:{entryPoint:b,thread_id:(i||(i=d("I64"))).to_string(a)}},instanceKey:e})},[b,e,a]);var f=l(function(a){c("QPLUserFlow").addPoint(c("qpl")._(25306607,"1883"),a,{instanceKey:e})},[e]),g=l(function(a){c("QPLUserFlow").endSuccess(c("qpl")._(25306607,"1883"),{annotations:{string:{is_cutover:String(a)}},instanceKey:e})},[e]),h=l(function(a){c("QPLUserFlow").addAnnotations(c("qpl")._(25306607,"1883"),{string:a},{instanceKey:e})},[e]),j=l(function(a){c("QPLUserFlow").addAnnotations(c("qpl")._(25306607,"1883"),{"int":a},{instanceKey:e})},[e]),k=l(function(a,b){c("QPLUserFlow").endFailure(c("qpl")._(25306607,"1883"),a,{annotations:{string:{is_cutover:String(b)}},instanceKey:e})},[e]);return{addQplAnnotations:h,addQPLAnnotationsInt:j,addQplPoint:f,qplEndFailure:k,qplEndSuccess:g}}function s(a,b){if(a==null)return"not_cutover_thread";return b!=null?a.showOpenMessageHistory===!1?"dual_thread_cutover":"show":"loading"}function a(a){var e=a.entryPoint,f=a.messageListRef,g=a.thread;a=r(g.threadKey,e);var h=a.addQplAnnotations,u=a.addQPLAnnotationsInt,v=a.addQplPoint,w=a.qplEndFailure,x=a.qplEndSuccess;c("useMAWMaybeResetEphemeralSettings")(g.threadKey);p(g.threadKey);var y=n(""),z=l(function(a){switch(a){case"loading":return;case"show":h({showOpenHistory:"show"});x(!0);return;case"hide":h({showOpenHistory:"hide"});x(!0);return;case"not_cutover_thread":x(!1);return;case"dual_thread_cutover":x(!1);return;case"error":w(y.current,!0);return;default:a;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable showOpenMsgHistoryState: %s",a)}},[h,w,x]),A=c("useAsyncReStore")(),B=l(function(a,b){return A.then(function(e){return e.runInTransaction(function(e){return c("LSInitiateThreadMigrationStoredProcedure")(c("LSFactory")(e),{armadilloThreadKey:b,openMessageThreadKey:a,shouldCopyMessages:!1,traceId:d("WAHex").randomHex(8)})},"readwrite")})},[A]),C=d("MAWThreadCutover").useGetCutoverMapping(g.threadKey),D=d("MAWThreadCutover").useCutoverOpenThread(g.threadKey);q(g.threadKey);a=o(s(C,D));var E=a[0],F=a[1];d("Int64Hooks").useEffectInt64(function(){z(E);if(E==="show"||E==="hide")return;if(C==null)return;if(D!=null&&C.showOpenMessageHistory!==!1)return F("show")},[C,D,z,E]);var G=n(!1);m(function(){if((C==null?void 0:C.armadilloThreadId)==null||(C==null?void 0:C.openThreadId)==null)return;if(G.current===!0)return;G.current=!0;v("thread_migration_initiating_start");var a=d("MemoryUtils").getCurrentMemory();a=a.usedJSHeapSize;u({usedJSHeapSizeStart:a});h();B(C.openThreadId,C.armadilloThreadId).then(function(){G.current=!1;v("thread_migration_initiating_end");var a=d("MemoryUtils").getCurrentMemory();a=a.usedJSHeapSize;u({usedJSHeapSizeEnd:a})})["catch"](function(a){G.current=!1,y.current="fail_to_init_thread_migration",F("error"),c("FBLogger")("messenger_e2ee_web").catching(a).mustfix("fail_to_init_thread_migration"),w(y.current,!0)})},[u,h,v,C==null?void 0:C.armadilloThreadId,C==null?void 0:C.openThreadId,B,w,x]);var H=D!=null;d("Int64Hooks").useEffectInt64(function(){if(y.current==="")return;if(E!=="hide"){var a;c("logMessengerWebFalcoEvent")({threadKey:g.threadKey,threadType:g.threadType},"no_open_messages_in_cutover_thread",e,{cutoverThreadKey:(i||(i=d("I64"))).to_string((a=C==null?void 0:C.openThreadId)!=null?a:(i||(i=d("I64"))).neg_one),hasCutoverOpenThread:H.toString(),reason:y.current,showOpenMsgHistoryState:E})}z(E)},[C,e,E,H,g.threadKey,g.threadType,z]);a=D!=null&&(i||(i=d("I64"))).equal(D.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE));var I=(E==="show"||C!=null)&&(D==null||!a),J="";E==="loading"?J="openMsgHistory":I&&(D==null?J="cutoverOpenThread":a||(J="authorityLevel"));return k.jsx(t,{message:"Error while loading secure thread messages",threadKey:g.threadKey,children:k.jsxs(k.Fragment,{children:[k.jsx(c("CometHeroHoldTrigger.react"),{description:"MAWCutoverShowHistoryDetermination-"+J,hold:E==="loading"||I}),b("cr:1957")!=null?k.jsx(b("cr:1957"),{cutoverOpenThread:E==="show"?D:void 0,entryPoint:e,messageListRef:f,thread:g}):k.jsx(d("MAWSecureThreadDetail_DEPRECATED.react").MAWSecureThreadDetail_DEPRECATED,{cutoverOpenThread:E==="show"?D:void 0,entryPoint:e,messageListRef:f,thread:g})]})})}a.displayName=a.name+" [from "+f.id+"]";function t(a){var b=a.children,d=a.message,e=a.threadKey;return k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},onError:function(a){c("MWFailChatTabOpenQPLEvent")(e,a.toString()),c("FBLogger")("messenger_web_product").catching(a).mustfix(d+": %s",a.toString())},children:b})}t.displayName=t.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("FriendAddFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{children:[i.jsx("path",{d:"M105 920.25c0 1.242-.895 2.25-2 2.25s-2-1.008-2-2.25.572-2.25 2-2.25 2 1.008 2 2.25",transform:"translate(351.5 156) translate(.5)"}),i.jsx("path",{fillRule:"nonzero",d:"M105.5 920.25c0 1.506-1.105 2.75-2.5 2.75s-2.5-1.244-2.5-2.75c0-1.638.878-2.75 2.5-2.75 1.622 0 2.5 1.112 2.5 2.75zm-1 0c0-1.13-.489-1.75-1.5-1.75-1.011 0-1.5.62-1.5 1.75 0 .979.686 1.75 1.5 1.75s1.5-.771 1.5-1.75z",transform:"translate(351.5 156) translate(.5)"}),i.jsx("path",{d:"M106.564 929h-7.129a.938.938 0 0 1-.935-.936v-.515a3.058 3.058 0 0 1 3.049-3.049h2.902a3.058 3.058 0 0 1 3.049 3.049v.515a.938.938 0 0 1-.936.936",transform:"translate(351.5 156) translate(.5)"}),i.jsx("path",{fillRule:"nonzero",d:"M106.564 929.5h-7.129c-.79 0-1.435-.645-1.435-1.436v-.515a3.558 3.558 0 0 1 3.549-3.549h2.902a3.558 3.558 0 0 1 3.549 3.549v.515c0 .791-.645 1.436-1.436 1.436zm0-1a.438.438 0 0 0 .436-.436v-.515c0-1.4-1.148-2.549-2.549-2.549h-2.902a2.558 2.558 0 0 0-2.55 2.549l.001.515c0 .239.197.436.435.436h7.13z",transform:"translate(351.5 156) translate(.5)"}),i.jsx("path",{fillRule:"nonzero",d:"M107 922h3a.5.5 0 0 0 0-1h-3a.5.5 0 0 0 0 1z",transform:"translate(351.5 156)"}),i.jsx("path",{fillRule:"nonzero",d:"M108 920v3a.5.5 0 0 0 1 0v-3a.5.5 0 0 0-1 0z",transform:"translate(351.5 156)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("PencilFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{d:"M461.985 1075.58a.938.938 0 0 0-.272-.492l-1.325-1.325a.902.902 0 0 0-1.272 0l-1.003 1.003a.385.385 0 0 0 0 .545l2.075 2.076c.15.15.395.15.545 0l1.003-1.003a.9.9 0 0 0 .249-.805m-11.142 6.423a1.164 1.164 0 0 0-.343.828v1.78c0 .215.175.39.391.39h1.778c.313 0 .608-.122.83-.343l5.887-5.889a.39.39 0 0 0 0-.551l-2.103-2.103a.391.391 0 0 0-.553 0l-5.887 5.888z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);